(window.webpackJsonp=window.webpackJsonp||[]).push([[27,4,5,7,8,13,14,15,16,17,19,20,21,23,24,30,31,34,35,38,41,42,43,44,46,58,59,60,62,63,64,65,67,68,69,71,73,74,75,76,77,78,79,80,81,82,83,84,85,86,88,89,90,94,95,97,98,99,100,104,108,109,110,111,117,118,119],{132:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"Place",(function(){return _}));var o=n(17),c=n(129),l=n(130),h=(n(15),n(73),n(74),n(508),n(45),n(257),n(89),n(514),n(14),n(133)),f=n(512),_=function(){function e(t){var n,r;if(Object(c.a)(this,e),"string"==typeof t){var l=this.__parse_from_string(t),h=Object(o.a)(l,2);n=h[0],r=h[1]}else{var f=Object(o.a)(t,2);n=f[0],r=f[1]}var _=[n,r];this._x=_[0],this._y=_[1]}return Object(l.a)(e,[{key:"key",get:function(){return[this._x,this._y].toString()}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"to_a",get:function(){return[this.x,this.y]}},{key:"to_h",get:function(){return{x:this.x,y:this.y}}},{key:"human_x",get:function(){return h.Board.dimension-this._x}},{key:"kanji_human_x",get:function(){return e.TO_KANJI_REPLACE_TABLE_X[this.human_x]}},{key:"kanji_human_y",get:function(){return e.TO_KANJI_REPLACE_TABLE_Y[this.human_y]}},{key:"yomiage_x",get:function(){return f.PlaceYomiageInfo.fetch(this.human_x.toString()).yomiage}},{key:"yomiage_y",get:function(){return f.PlaceYomiageInfo.fetch(this.human_y.toString()).yomiage}},{key:"human_y",get:function(){return this._y+1}},{key:"flip_all",get:function(){return e.fetch([h.Board.dimension-1-this._x,h.Board.dimension-1-this._y])}},{key:"flop",get:function(){return e.fetch([h.Board.dimension-1-this._x,this._y])}},{key:"flop_if",value:function(e){return e?this.flop:this}},{key:"sp_flip_if_white",value:function(e){return"white"===e.key?this.flip_all:this}},{key:"to_sfen",get:function(){return[h.Board.dimension-this._x,e.TO_SFEN_REPLACE_TABLE_Y[this._y]].join("")}},{key:"css_place_key",get:function(){return["place",this.human_x,this.human_y].join("_")}},{key:"human_xy_ary",get:function(){return[this.human_x,this.human_y]}},{key:"kanji_human",get:function(){return[this.kanji_human_x,this.kanji_human_y].join("")}},{key:"digit_human",get:function(){return[this.human_x,this.human_y].join("")}},{key:"rotate_add",value:function(t,n){var r=this.__new_pos(this._x,t),o=this.__new_pos(this._y,n);return e.fetch([r,o])}},{key:"__new_pos",value:function(e,t){return Math.trunc((e+t+h.Board.dimension)%h.Board.dimension)}},{key:"__parse_from_string",value:function(s){var t=s.split("").map((function(t){var n;return Number(null!==(n=e.ANY_TO_NUMBER_REPLACE_TABLE[t])&&void 0!==n?n:t)})),n=Object(o.a)(t,2),r=n[0],c=n[1];return[h.Board.dimension-r,c-1]}}],[{key:"fetch",value:function(t){return t instanceof this?t:Object.freeze(new e(t))}},{key:"xy_valid_p",value:function(e,t){return 0<=e&&e<h.Board.dimension&&0<=t&&t<h.Board.dimension}}]),e}();_.ANY_TO_NUMBER_REPLACE_TABLE={"１":1,"２":2,"３":3,"４":4,"５":5,"６":6,"７":7,"８":8,"９":9,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9},_.TO_KANJI_REPLACE_TABLE_X={1:"１",2:"２",3:"３",4:"４",5:"５",6:"６",7:"７",8:"８",9:"９"},_.TO_KANJI_REPLACE_TABLE_Y={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九"},_.TO_SFEN_REPLACE_TABLE_Y=["a","b","c","d","e","f","g","h","i"],e.argv[1]===r&&(console.log(_.fetch("6a").key),console.log(_.fetch([1,2]).key))}.call(this,n(131),"/index.js")},133:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"Board",(function(){return m}));var o=n(129),c=n(130),l=(n(506),n(14)),h=n.n(l),f=n(3),_=n(484),d=n(132),m=function(){function e(){Object(o.a)(this,e),this._surface={}}return Object(c.a)(e,[{key:"place_on",value:function(e){this.delete_at(e.place),f.a.set(this._surface,e.place.key,e)}},{key:"lookup",value:function(e){return this._surface[e.key]}},{key:"delete_at",value:function(e){f.a.delete(this._surface,e.key)}},{key:"clear",value:function(){this._surface={}}},{key:"piece_exist_by_x",value:function(t,n,r){for(var o=!1,c=0;c<e.dimension;c++){var l=d.Place.fetch([t,c]),h=this.lookup(l);if(h&&h.location.key===n.key&&h.piece.key===r.key){o=!0;break}}return o}},{key:"soldiers",get:function(){return Object.values(this._surface)}},{key:"piece_counts_hash",get:function(){var e={};return h.a.forEach(this.soldiers,(function(t){e[t.piece.key]=(e[t.piece.key]||0)+1})),e}},{key:"flip_all",get:function(){var t=new e;return h.a.forEach(this._surface,(function(e,n){var r=new _.Soldier(Object.assign({},e.attributes,{location:e.location.flip,place:e.place.flip_all}));t.place_on(r)})),t}},{key:"flop",get:function(){var t=new e;return h.a.forEach(this._surface,(function(e,n){var r=new _.Soldier(Object.assign({},e.attributes,{location:e.location,place:e.place.flop}));t.place_on(r)})),t}},{key:"slide_xy",value:function(t,n){var r=new e;return h.a.forEach(this._surface,(function(e,o){var c=new _.Soldier(Object.assign({},e.attributes,{location:e.location,place:e.place.rotate_add(t,n)}));r.place_on(c)})),r}},{key:"shuffle_apply",value:function(t){if(!(t*t<this.soldiers.length)){var n=this.all_places(t),r=h.a.shuffle(n),o=new e,i=0;return h.a.forEach(this._surface,(function(e,t){var n=new _.Soldier(Object.assign({},e.attributes,{location:e.location,place:r[i]}));o.place_on(n),i+=1})),o}}},{key:"all_places",value:function(t){for(var n=e.dimension-t,r=[],o=0;o<t;o++)for(var c=0;c<t;c++){var l=d.Place.fetch([n+c,0+o]);r.push(l)}return r}},{key:"to_sfen",get:function(){var t=this,n=[];return h.a.times(e.dimension,(function(r){var o="",c=0;h.a.times(e.dimension,(function(e){var n=d.Place.fetch([e,r]),l=t.lookup(n);if(h.a.isNil(l))c++;else{c>=1&&(o+=c,c=0),l.promoted&&(o+="+");var f=l.piece.key;"white"===l.location.key&&(f=f.toLowerCase()),o+=f}})),c>=1&&(o+=c),n.push(o)})),n.join("/")}}],[{key:"dimension",get:function(){return 9}},{key:"danger_zone_size",get:function(){return 3}},{key:"vector_flip",value:function(e,t){return[this.dimension-e-1,this.dimension-t-1]}}]),e}();e.argv[1]===r&&console.log(m.dimension)}.call(this,n(131),"/index.js")},2:function(e,t,n){"use strict";n.r(t),n.d(t,"support",(function(){return r}));var r={mixins:[n(258).root_support],props:{base:{type:Object,required:!1}}}},258:function(e,t,n){"use strict";n.r(t),n.d(t,"root_support",(function(){return r}));var r={data:function(){return{}}}},259:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"SfenParser",(function(){return j}));n(479);var o=n(129),c=n(130),l=n(489),h=n(480),f=n(481),_=n(478),d=(n(51),n(257),n(89),n(45),n(488)),m=n.n(d),y=n(3),v=n(14),k=n.n(v),D=n(133),x=n(504),A=n(483),w=n(132),F=n(484),E=n(69),C=n(509);n(90);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(_.a)(e);if(t){var o=Object(_.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var P,j=function(e){Object(h.a)(n,e);var t=B(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"reset",value:function(){Object(l.a)(Object(_.a)(n.prototype),"reset",this).call(this),this.attributes={}}},{key:"parse",value:function(){this.raw_body=this.raw_body.replace(/startpos/,"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1");var e=m()("sfen\\s+(?<board>\\S+)\\s+(?<b_or_w>\\S+)\\s+(?<hold_pieces>\\S+)\\s+(?<turn_counter_next>\\d+)(\\s+moves\\s+(?<moves>.*))?");this.attributes=m.a.exec(this.raw_body,e)}},{key:"board",get:function(){var e=this,t=new D.Board;return this.attributes.board.split("/").forEach((function(n,r){var o=0;m.a.forEach(n,m()("(?<promoted>\\+?)(?<piece>\\S)"),(function(n,i){if(/\d+/.test(n.piece))o+=Number(n.piece);else{var c=new F.Soldier({place:new w.Place([o,r]),piece:A.Piece.fetch(n.piece),promoted:"+"===n.promoted,location:e.__location_by_upper_or_lower_case(n.piece)});t.place_on(c),o++}}))})),t}},{key:"base_location",get:function(){var e=null;return e="b"===this.attributes.b_or_w?"black":"white",E.Location.fetch(e)}},{key:"hold_pieces",get:function(){var e=this,t=this.hold_pieces_empty_hash();return"-"!==this.attributes.hold_pieces&&m.a.forEach(this.attributes.hold_pieces,m()("(?<count>\\d+)?(?<piece_char>\\S)"),(function(n,i){var r=A.Piece.fetch(n.piece_char),o=Number(n.count||1),c=e.__location_by_upper_or_lower_case(n.piece_char);o+=t[c.key][r.key]||0,y.a.set(t[c.key],r.key,o)})),t}},{key:"turn_base",get:function(){return Number(this.attributes.turn_counter_next)-1}},{key:"move_infos",get:function(){var e=this,t=[];return k.a.forEach(this.moves,(function(n,i){var r=C.MoveHash.parse(n);if(!r)return!1;r.location=e.location_by_offset(i),t.push(r)})),t}},{key:"moves",get:function(){return this.moves_exist_p?this.attributes.moves.split(/\s+/):[]}},{key:"moves_exist_p",get:function(){return""!==(this.attributes.moves||"")}},{key:"init_sfen_from_one",get:function(){var e=[];return e.push("position"),e.push("sfen"),e.push(this.attributes.board),e.push(this.attributes.b_or_w),e.push(this.attributes.hold_pieces),e.push(1),e.join(" ")}},{key:"init_sfen",get:function(){var e=[];return e.push("position"),e.push("sfen"),e.push(this.init_sfen_strip),e.join(" ")}},{key:"init_sfen_strip",get:function(){var e=[];return e.push(this.attributes.board),e.push(this.attributes.b_or_w),e.push(this.attributes.hold_pieces),e.push(this.attributes.turn_counter_next),e.join(" ")}},{key:"to_sfen",get:function(){var e=[];return e.push("position"),e.push("sfen"),e.push(this.attributes.board),e.push(this.attributes.b_or_w),e.push(this.attributes.hold_pieces),e.push(this.attributes.turn_counter_next),this.moves_exist_p&&(e.push("moves"),e.push(this.attributes.moves)),e.join(" ")}},{key:"__location_by_upper_or_lower_case",value:function(e){var t=null;return t=/[A-Z]/.test(e)?"black":"white",E.Location.fetch(t)}}],[{key:"sfen_flop",value:function(e){var source=this.parse(e);return source.attributes.board=source.board.flop.to_sfen,source.attributes.moves=source.move_infos.map((function(e){return e.to_flop_sfen})).join(" "),source.to_sfen}}]),n}(x.ParserBase);e.argv[1]===r&&(P=j.parse("position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d"),console.log(P),P=j.parse("position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d"),console.log(P))}.call(this,n(131),"/index.js")},266:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"KifParser",(function(){return O}));n(479);var o=n(129),c=n(130),l=n(489),h=n(480),f=n(481),_=n(478),d=(n(506),n(257),n(265),n(51),n(89),n(488)),m=n.n(d),y=n(525),v=n.n(y),k=n(504),D=n(133),x=n(483),A=n(132),w=n(69),F=n(259),E=n(490),C=n(484),B=n(518);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(_.a)(e);if(t){var o=Object(_.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var j=m()(Object.values({header:"(?<key>.*)：s*(?<value>.*)",board:"\\|(?<board>.*)\\|",direct_location:"(?<direct_location>^[上下先後]手番)",latest_triangle:"^手数＝.*(?<latest_triangle>[▲△])",comment:"^\\*(?<comment>.*)",hand:"^\\s*(?<number>\\d+)\\s+                                # 1    ; 手数\n         (?<to>[１-９1-9一二三四五六七八九]+)?                   # 76   ; 移動先\n         (?<same>同)?\\s*                                        # 同   ; 座標を書いてくれ\n         (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と]) # 歩   ; 駒\n         (?<suffix>[左右直]?[寄引上]?)                           # 上   ; KI2っぽい表記は読み捨てる\n         (?<motion>不?成|打|合|生)?                              # 打   ; 成や打\n         (\\((?<origin_place>\\d+)\\))?                          # (77) ; 移動元"}).join("|"),"x"),O=function(e){Object(h.a)(n,e);var t=P(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"reset",value:function(){Object(l.a)(Object(_.a)(n.prototype),"reset",this).call(this),this.move_infos=[],this.comments_pack={},this.board_lines=[],this.direct_location=null,this.hold_pieces=this.hold_pieces_empty_hash()}},{key:"board",get:function(){if(this.board_lines.length>=1)return this.board_setup_from_board_lines();var e=new F.SfenParser;return e.raw_body=this.preset_info.sfen,e.parse(),e.board}},{key:"preset_key",get:function(){var e=this.header["手合割"];return"その他"===e?null:e||"平手"}},{key:"preset_info",get:function(){return E.PresetInfo.lookup(this.preset_key)}},{key:"base_location",get:function(){return this.direct_location?this.direct_location:this.preset_key?w.Location.fetch(this.preset_info.first_location_key):w.Location.fetch("black")}},{key:"parse",value:function(){var e=this,t=null;this.raw_body.split(/\n/).forEach((function(line){var n=m.a.exec(line,j);if(n)if(n.key){var r=n.value.trim();if(e.header[n.key]=r,n.key.match(/手の持駒/))if("なし"===r);else{var s=B.KanjiNumber.kanji_to_number_string(r);s=s.replace(/\s+/g,""),m.a.forEach(s,m()("(?<piece_char>\\D)(?<count>\\d*)"),(function(t,r){var o=x.Piece.lookup_by_name(t.piece_char),c=Number(t.count||1),l=n.key.match(/[上後]/)?"white":"black";c+=e.hold_pieces[l][o.key]||0,e.hold_pieces[l][o.key]=c}))}}else if(n.comment){var i=e.move_infos.length;e.comments_pack[i]=e.comments_pack[i]||[],e.comments_pack[i].push(n.comment)}else if(n.board)e.board_lines.push(n.board);else if(n.direct_location)e.direct_location=w.Location.fetch(n.direct_location.match(/[上後]/)?"white":"black");else if(n.latest_triangle)e.direct_location=w.Location.fetch("▲"===n.latest_triangle?"white":"black");else if(n.number){var o={};o.location=e.location_by_offset(Number(n.number)-1),n.origin_place&&(o.origin_place=A.Place.fetch(n.origin_place)),v()(n.to||n.same),n.to?(o.place=A.Place.fetch(n.to),t=o.place):(v()(n.same),v()(t),o.place=t),"成"===n.motion&&(o.promoted_trigger=!0),"打"===n.motion&&(o.drop_piece=x.Piece.lookup_by_name(n.piece)),e.move_infos.push(o)}}))}},{key:"move_infos",get:function(){return this._move_infos},set:function(e){this._move_infos=e}},{key:"comments_pack",get:function(){return this._comments_pack},set:function(e){this._comments_pack=e}},{key:"board_setup_from_board_lines",value:function(){v()(this.board_lines.length>=1);var e=new D.Board;return this.board_lines.forEach((function(t,n){m.a.forEach(t,m()("(?<arrow>.)(?<piece>\\S)"),(function(t,r){if("・"===t.piece);else{var o="v"===t.arrow?"white":"black",c=x.Piece.lookup_by_name(t.piece),l=!1;c||(c=x.Piece.lookup_by_promoted_name(t.piece),v()(c),l=!0);var h=new C.Soldier({place:new A.Place([r,n]),piece:c,promoted:l,location:w.Location.fetch(o)});e.place_on(h)}}))})),e}}]),n}(k.ParserBase);if(e.argv[1]===r){var R=new O;R.raw_body="\n   1 ２六歩(27)   ( 0:16/00:00:16)\n   2 ３四歩(33)   ( 0:22/00:00:22)\n   3 ７六歩(77)   ( 0:06/00:00:22)\n   4 ８四歩(83)   ( 0:13/00:00:35)\n   5 ２五歩(26)   ( 0:09/00:00:31)\n   6 ８五歩(84)   ( 0:16/00:00:51)\n   7 ７八金(69)   ( 0:04/00:00:35)\n   8 ３二金(41)   ( 0:09/00:01:00)\n   9 ２四歩(25)   ( 0:04/00:00:39)\n  10 同 歩(23)    ( 0:10/00:01:10)\n",R.parse(),console.log(R.move_infos),console.log(R.comments_pack),console.log(void 0===R.init_sfen)}}.call(this,n(131),"/index.js")},267:function(e,t,n){"use strict";n.r(t),n.d(t,"navi_module",(function(){return l}));n(89),n(264),n(70),n(71);var r=n(14),o=n.n(r),c=n(69),l={props:{sp_summary:{type:String,default:"is_summary_on"},sp_slider:{type:String,default:"is_slider_off"},sp_setting:{type:String,default:"is_setting_off"},sp_controller:{type:String,default:"is_controller_off"},sp_viewpoint:{type:String,default:"black"},sp_turn_slider_focus:{type:String,default:"is_turn_slider_focus_on"},sp_op_disabled:{type:Boolean,default:!1},sp_hidden_if_piece_stand_blank:{type:Boolean,default:!1},sp_flip_if_white:{type:Boolean,default:!1},sp_key_event_capture_enabled:{type:Boolean,default:!1},sp_shift_key_mag:{type:Number,default:10},sp_system_key_mag:{type:Number,default:50}},data:function(){return{new_viewpoint:null}},mounted:function(){"is_turn_slider_focus_on"===this.sp_turn_slider_focus&&this.turn_slider_focus(),window.addEventListener("keydown",this.keydown_hook,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.keydown_hook)},created:function(){this.new_viewpoint=this.sp_viewpoint},watch:{sp_viewpoint:function(e){this.new_viewpoint=e},new_viewpoint:function(e){this.$emit("update:sp_viewpoint",e)}},methods:{keydown_hook:function(e){if(this.debug_p,!this.sp_op_disabled&&!this.focus_on_input_tag_p()&&!this.shortcut_hook(e)&&this.sp_key_event_capture_enabled&&(this.view_p||this.play_p)){var t=document.activeElement;if(this.$NavigateBlock){var n=[this.$NavigateBlock.$refs.first,this.$NavigateBlock.$refs.previous,this.$NavigateBlock.$refs.next,this.$NavigateBlock.$refs.last];if(void 0!==t&&"BODY"!==t.tagName&&!o.a.includes(n,t))return}"Backspace"!==e.code&&"ArrowUp"!==e.code&&"ArrowLeft"!==e.code&&"k"!==e.key&&"p"!==e.key&&"b"!==e.key||(this.relative_move(-1,e),e.preventDefault()),"Space"!==e.code&&"Enter"!==e.code&&"ArrowDown"!==e.code&&"ArrowRight"!==e.code&&"j"!==e.key&&"n"!==e.key&&"f"!==e.key||(this.relative_move(1,e),e.preventDefault())}},focus_on_input_tag_p:function(){var e=document.activeElement;if("TEXTAREA"===e.tagName||"INPUT"===e.tagName)return!0},navi_relative_move:function(e,t){this.relative_move(e,t)},relative_move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&(t.shiftKey&&this.sp_shift_key_mag&&(e*=this.sp_shift_key_mag),(t.ctrlKey||t.altKey||t.metaKey)&&this.sp_system_key_mag&&(e*=this.sp_system_key_mag)),this.current_turn_add(e,t),this.turn_slider_focus()||(e>0?this.nav_focus_to("next"):this.nav_focus_to("previous"))},move_to_first:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.current_turn_set(this.turn_offset_min,e),this.turn_slider_focus()||this.nav_focus_to("first")},move_to_last:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.current_turn_set(this.turn_offset_max,e),this.turn_slider_focus()||this.nav_focus_to("last")},current_turn_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.current_turn_set(this.mediator.turn_offset+e,t)},current_turn_set:function(e,t){var n=this.mediator.turn_clamp(e);this.turn_offset!==n&&(this.state_reset(),this.view_p&&this.view_mode_mediator_update(n),this.play_p&&this.play_mode_mediator_seek_to(n),this.sound_play("piece_put"),this.$emit("update:sp_turn",this.turn_offset),t&&(this.log("局面を人が故意に変更"),this.$emit("one_way:sp_turn_user_changed",this.turn_offset)))},current_turn_set_by_slider:function(e,t){t?this.log("スライダーをユーザーが動かした : ".concat(e)):this.log("スライダーは勝手に動いた : ".concat(e)),this.current_turn_set(e,t)},nav_focus_to:function(e){var t=this.navigate_block_element_refs(e);return!!t&&(t.focus(),!0)},turn_slider_focus:function(){var e=this.navigate_block_element_refs("TurnSliderBlock");return!!e&&e.focus_to_self()},navigate_block_element_refs:function(e){if(this.base.$NavigateBlock)return this.base.$NavigateBlock.$refs[e]},board_flip_toggle:function(){this.new_viewpoint=c.Location.fetch(this.new_viewpoint).flip.key,this.sound_play("flip_sound"),this.turn_slider_focus()}},computed:{fliped:function(){return"white"===this.new_viewpoint},inside_controller_p:function(){return"is_setting_on"===this.sp_setting||"is_controller_on"===this.sp_controller&&(this.view_p||this.play_p)},inside_slider_p:function(){return"is_slider_on"===this.sp_slider&&(this.view_p||this.play_p)},inside_navigate_p:function(){return this.inside_controller_p||this.inside_slider_p}}}},268:function(e,t,n){"use strict";n.r(t),n.d(t,"shortcut_module",(function(){return _}));n(47),n(27),n(21),n(48),n(49);var r=n(485),o=(n(15),n(36),n(69)),c=n(132),l=n(458);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var _={data:function(){return{mouseover_info:null,shuffle_mode_p:!1}},methods:{shortcut_hook:function(e){if(!this.play_p&&!this.edit_p)return!0;var t,n=h(o.Location.values);try{for(n.s();!(t=n.n()).done;){var l=t.value;if(e.key.toLowerCase()===l.char_key&&(this.soldier_hold_unless_lifted_p(e),this.membership_click_handle(l,e)))return e.preventDefault(),!0}}catch(e){n.e(e)}finally{n.f()}if(this.edit_p&&("Backspace"===e.code||"Delete"===e.code||!this.meta_p(e)&&"t"===e.key)&&(this.soldier_hold_unless_lifted_p(e),this.piece_box_other_click(e)))return e.preventDefault(),!0;if("Escape"===e.code&&this.hold_cancel(e))return e.preventDefault(),!0;if("q"===e.key){if(this.lifted_p&&this.hold_cancel(e))return e.preventDefault(),!0;if(this.mouseover_info&&"board"===this.mouseover_info.type){var f=c.Place.fetch(this.mouseover_info.xy),_=this.mediator.board.lookup(f);if(_)return this.piece_stand_piece_click(_.location,_.piece,_.promoted,null),e.preventDefault(),!0}}if(!this.meta_p(e)&&("v"===e.key||"r"===e.key||"Space"===e.code)&&this.mouseover_info&&"board"===this.mouseover_info.type)return this.board_cell_right_click(this.mouseover_info.xy,e),e.preventDefault(),!0;if(this.edit_p&&"?"===e.key)return this.shortcut_modal_toggle_handle(),e.preventDefault(),!0;if(this.edit_p&&this.meta_p(e)){var d,m=this.arrow_vector_table[e.key];if(m)return(d=this.mediator).slide_xy.apply(d,Object(r.a)(m)),e.preventDefault(),!0}return!(!this.edit_p||("!"===e.key&&(this.shuffle_mode_p=!this.shuffle_mode_p,this.shuffle_mode_p?this.$buefy.toast.open({message:"盤面シャッフルモード: ON (TAP: 1-9)",position:"is-bottom",queue:!1,duration:2e3,type:"is-primary"}):this.$buefy.toast.open({message:"盤面シャッフルモード: OFF",position:"is-bottom",queue:!1,duration:500})),!this.shuffle_mode_p||"1"!==e.key&&"2"!==e.key&&"3"!==e.key&&"4"!==e.key&&"5"!==e.key&&"6"!==e.key&&"7"!==e.key&&"8"!==e.key&&"9"!==e.key))&&(this.shuffle_run(e.key),e.preventDefault(),!0)},board_mouseover_handle:function(e,t){this.mouseover_info={type:"board",xy:e}},piece_stand_mouseover_handle:function(e,t,n){this.mouseover_info={type:"MembershipStand",location:e,piece:t}},piece_box_mouseover_handle:function(e,t){this.mouseover_info={type:"PieceBox",piece:e}},mouseleave_handle:function(){this.mouseover_info=null},soldier_hold_unless_lifted_p:function(e){this.mouseover_info&&(this.lifted_p||("board"===this.mouseover_info.type&&this.board_cell_left_click(this.mouseover_info.xy,e),"MembershipStand"===this.mouseover_info.type&&this.piece_stand_piece_click(this.mouseover_info.location,this.mouseover_info.piece,!1,e),"PieceBox"===this.mouseover_info.type&&this.piece_box_piece_click(this.mouseover_info.piece,e)))},shortcut_modal_toggle_handle:function(){this.shortcut_modal_active_p()?this.shortcut_modal_close_handle():this.shortcut_modal_show_handle()},shortcut_modal_show_handle:function(){var e=this;this.shortcut_modal_close_handle(),this.$shortcut_modal&&alert("this.$shortcut_modal"),this.$shortcut_modal=this.$buefy.modal.open({parent:this,hasModalCard:!0,props:{},animation:"",onCancel:function(){e.shortcut_modal_close_handle()},canCancel:["escape","outside"],component:l.default})},shortcut_modal_close_handle:function(){this.$shortcut_modal&&(this.$shortcut_modal.close(),this.$shortcut_modal=null)},shortcut_modal_active_p:function(){return!!this.$shortcut_modal}},computed:{arrow_vector_table:function(){return{ArrowRight:[1,0],ArrowLeft:[-1,0],ArrowUp:[0,-1],ArrowDown:[0,1]}}}}},269:function(e,t,n){"use strict";n.r(t),n.d(t,"edit_mode_module",(function(){return x}));n(29),n(21),n(28),n(37),n(38);var r=n(485),o=n(11),c=(n(89),n(15),n(36),n(70),n(71),n(14)),l=n.n(c),h=n(519),f=n(132),_=(n(133),n(505)),d=n(484),m=n(69),y=(n(507),n(520)),v=n(521);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x={props:{sp_play_mode_legal_move_only:{type:Boolean,default:!0},sp_play_mode_legal_jump_only:{type:Boolean,default:!0},sp_play_mode_legal_pawn_drop:{type:Boolean,default:!0},sp_play_mode_auto_promote:{type:Boolean,default:!0},sp_play_mode_not_put_if_death_soldier:{type:Boolean,default:!0},sp_play_mode_only_own_piece_to_move:{type:Boolean,default:!0},sp_play_mode_can_not_kill_same_team_soldier:{type:Boolean,default:!0},sp_edit_mode_double_click_time_ms:{type:Number,default:350},sp_play_effect_type:{type:String,default:null},sp_move_cancel:{type:String,default:"is_move_cancel_standard"},sp_view_mode_soldier_movable:{type:Boolean,default:!0}},data:function(){return{place_from:null,have_piece:null,have_piece_location:null,have_piece_promoted:null,me_running_p:!1,_me_last_event:null,_CursorObject:null,mouse_stick:!1,dialog_soldier:null,_last_clicked_cell:null,_double_tap_time:null,last_move_info:null,killed_soldier:null}},watch:{new_run_mode:function(){this.state_reset()}},beforeDestroy:function(){this.virtual_piece_destroy()},methods:{board_cell_pointerdown_handle:function(e,t){var n=this.sp_board_cell_pointerdown_user_handle;!n||n(f.Place.fetch(e),t)},board_cell_left_click:function(e,t){var n=this;this.log("board_cell_left_click"),this.log("shiftKey: ".concat(t.shiftKey)),this.$data._last_clicked_cell=t.target;var r=f.Place.fetch(e),o=this.sp_board_cell_left_click_user_handle;if(!(o&&(this.log("ユーザー指定のクリックハンドル実行: ".concat(r.css_place_key)),o(r,t))||this.break_if_view_mode)){this.killed_soldier=this.mediator.board.lookup(r);var c=null,h=null;if(this.origin_soldier1&&(h=(c=new d.Soldier({piece:this.origin_soldier1.piece,place:r,promoted:this.origin_soldier1.promoted,location:this.origin_soldier1.location})).promotable_p||this.origin_soldier1.promotable_p),this.cpu_location_p)return this.log("片方の手番だけを操作できるようにする sp_human_side の指定があってCPU側なので無効とする"),void this.$emit("operation_invalid1");if(this.sp_play_mode_only_own_piece_to_move&&this.play_p&&!this.lifted_p&&this.killed_soldier&&this.killed_soldier.location!==this.mediator.current_location)return this.log("自分の手番で相手の駒を持ち上げようとしたので無効とする"),void this.$emit("operation_invalid2");if(this.play_p&&this.have_piece&&this.killed_soldier)return this.log("駒台や駒箱から持ち上げた駒を盤上の駒の上に置こうとしたので無効とする"),void this.if_standard_then_unhold();if(this.sp_play_mode_not_put_if_death_soldier&&this.play_p&&this.have_piece&&!this.killed_soldier){var y=this.soldier_create_from_stand_or_box_on(r),v=y.piece.piece_vector.force_promote_length;if(null!=v&&y.top_spaces<=v)return void this.log("駒台や駒箱から持ち上げた駒を置こうとしたけど死に駒なので無効とする")}if(this.lifted_p||this.killed_soldier){if(this.play_p&&this.sp_play_mode_can_not_kill_same_team_soldier&&this.put_on_my_soldier_p(this.killed_soldier))return this.log("自分の駒の上に駒を重ねようとしたので無効とする(盤上の移動元の駒を含まない)"),"is_move_cancel_rehold"===this.move_cancel_info.key?(this.log("盤上の駒を持って別の盤上の駒に持ち直した"),void this.soldier_hold(r,t)):void this.if_standard_then_unhold();if(this.edit_p){var k=this.$data._double_tap_time;if(this.$data._double_tap_time=Date.now(),this.killed_soldier&&l.a.isEqual(this.place_from,r)&&k){var D=this.$data._double_tap_time-k,x=D<this.sp_edit_mode_double_click_time_ms;if(this.log("ダブルクリック判定: (".concat(D," ms < ").concat(this.sp_edit_mode_double_click_time_ms,") -> ").concat(x)),x)return this.log("操作モードで盤上の駒を持って同じ位置に戻したときに盤上の駒を裏返す"),this.mediator.board.place_on(this.killed_soldier.transform_clone),void this.piece_hold_and_put_for_bug(r,t)}}if(l.a.isEqual(this.place_from,r))return this.log("盤上の駒を持って同じ位置に戻したので状況キャンセル"),void this.state_reset();if(this.edit_p&&(this.log("lifted_from_p: ".concat(this.lifted_p)),this.meta_p(t)&&!this.lifted_p&&this.killed_soldier))return this.log("盤上の駒を裏返す"),this.mediator.board.place_on(this.killed_soldier.transform_clone),void this.piece_hold_and_put_for_bug(r,t);if(!this.lifted_p)return this.log("盤上の駒を持ちあげる"),void this.soldier_hold(r,t);if(this.sp_play_mode_legal_move_only&&this.play_p&&this.place_from){var A=_.PieceVector.fetch(this.origin_soldier1.piece.key),w=this.place_from.x,F=this.place_from.y,E=null,C=!1;if(!C){E=this.origin_soldier1.promoted?A.promoted_once_vectors:A.basic_once_vectors;var B=_.PieceVector[E];B&&(C=B.some((function(e){if(e){var t=e[0],o=e[1]*n.origin_soldier1.location.value_sign,c=F+o;return w+t===r.x&&c===r.y}})))}if(!C){E=this.origin_soldier1.promoted?A.promoted_repeat_vectors:A.basic_repeat_vectors;var P=_.PieceVector[E];P&&(C=P.some((function(e){if(e)for(var t=e[0],o=e[1]*n.origin_soldier1.location.value_sign,c=w+t,l=F+o;f.Place.xy_valid_p(c,l);){if(c===r.x&&l===r.y)return!0;var h=f.Place.fetch([c,l]);if(n.mediator.board.lookup(h)&&n.sp_play_mode_legal_jump_only)break;c+=t,l+=o}})))}if(!C)return this.log("操作モードで盤上の駒を動かし中だが動けないセルをタップしたので無効"),void this.if_standard_then_unhold()}if(!this.place_from){if(this.have_piece){if(this.log("持駒を置く"),this.sp_play_mode_legal_pawn_drop&&this.play_p&&"P"===this.have_piece.key&&this.have_piece_location&&this.mediator.board.piece_exist_by_x(r.x,this.have_piece_location,this.have_piece))return this.log("二歩"),void this.$emit("operation_double_pawn");this.killed_soldier&&(this.have_piece_location?this.mediator.hold_pieces_add(this.have_piece_location,this.killed_soldier.piece):this.mediator.hold_pieces_add(m.Location.fetch("black"),this.killed_soldier.piece));var j=this.soldier_create_from_stand_or_box_on(r);return this.piece_decriment(),this.mediator.board.place_on(j),this.move_info_create({type:"put",to:j}),this.moves_set(),this.state_reset(),void this.turn_next()}throw new Error("must not happen")}if(this.log("盤上から移動"),this.killed_soldier&&this.mediator.hold_pieces_add(this.origin_soldier1.location,this.killed_soldier.piece),(this.view_p||this.play_p)&&h){var O=!0;if(this.sp_play_mode_auto_promote){var R=c.piece.piece_vector.force_promote_length;null!=R&&c.top_spaces<=R&&(this.promotable_piece_moved(c,!0),O=!1)}O&&(this.mouse_stick=!1,this.dialog_soldier=c,this.virtual_piece_destroy())}else this.play_p&&(this.move_info_create({type:"move",from:this.origin_soldier1,to:c,killed_soldier:this.killed_soldier}),this.moves_set()),this.mediator.board.place_on(c),this.mediator.board.delete_at(this.place_from),this.state_reset(),this.turn_next()}else this.log("持たずに何もないところをクリックしたので無効とする")}},promotable_piece_moved2:function(e){this.promotable_piece_moved(this.dialog_soldier,e)},promotable_piece_moved:function(e,t){e=e.clone_with_attrs({promoted:t}),this.move_info_create({type:"promotable",from:this.origin_soldier1,to:e}),this.moves_set(),this.mediator.board.place_on(e),this.mediator.board.delete_at(this.place_from),this.state_reset(),this.turn_next()},move_info_create:function(e){this.last_move_info=new h.MoveInfo(D(D({},e),{},{next_turn_offset:this.turn_offset+1,player_location:this.mediator.current_location,killed_soldier:this.killed_soldier}))},board_cell_right_click:function(e,t){if(this.log("盤のセルを右クリック"),!this.break_if_view_mode){var n=f.Place.fetch(e),r=this.mediator.board.lookup(n);this.hold_cancel(t)||this.edit_p&&!this.lifted_p&&r&&(this.log("盤上の駒を裏返す"),this.mediator.board.place_on(r.transform_clone),this.piece_hold_and_put_for_bug(n,t))}},membership_click_handle:function(e,t){if(!this.break_if_view_mode)return this.have_piece&&this.have_piece_location===e?(this.log("自分の駒台から駒を持ち上げているならキャンセル"),this.state_reset(),!0):this.edit_p&&this.have_piece?(this.hold_pieces_move_to_my_hold_pieces(t,e),!0):this.play_p&&this.origin_soldier1?(this.log("play_mode では盤上の駒を駒台に置くことはできない"),this.if_standard_then_unhold(),!0):!!this.origin_soldier1&&(this.log("盤上の駒を駒台に置く"),this.board_soldir_to_hold_pieces(e),!0)},piece_stand_piece_click:function(e,t,n,r){if(this.log("駒台の駒をクリック"),!this.break_if_view_mode)if(this.mediator.hold_pieces_count(e,t)<=0)this.log("クリックしたけど持駒がない");else if(this.sp_play_mode_only_own_piece_to_move&&this.play_p&&e!==this.mediator.current_location)this.log("相手の持駒を持とうとしたときは無効");else{if(this.cpu_location_p)return this.log("片方の手番だけを操作できるようにする sp_human_side の指定があってCPU側なので無効とする"),void this.$emit("operation_invalid1");this.log("駒台の駒を持つ"),this.have_piece=t,this.have_piece_location=e,this.have_piece_promoted=n,this.virtual_piece_create(r,this.origin_soldier2)}},piece_box_have_p:function(e){return l.a.isNil(this.have_piece_location)&&this.have_piece===e},piece_box_other_click:function(e){if(this.log("piece_box_other_click:駒箱クリック"),l.a.isNil(this.have_piece_location)&&this.have_piece)return this.log("持っているならキャンセル"),this.state_reset(),!0;if(this.have_piece_location&&this.have_piece){this.log("駒台から駒箱に移動");var t=this.hold_piece_source_cut(e);return this.mediator.piece_box_add(this.have_piece,t),this.state_reset(),!0}return!!this.origin_soldier1&&(this.log("盤上の駒を駒箱に移動"),this.mediator.piece_box_add(this.origin_soldier1.piece),this.mediator.board.delete_at(this.origin_soldier1.place),this.state_reset(),!0)},piece_box_piece_click:function(e,t){this.piece_box_other_click(t)||(this.log("piece_box_piece_click:駒箱の駒を持つ"),this.have_piece=e,this.have_piece_location=null,this.have_piece_promoted=!1,this.virtual_piece_create(t,this.origin_soldier2))},hold_cancel:function(e){return!(this.dialog_soldier||!this.lifted_p)&&(this.log("持ち上げた駒を元に戻す"),this.state_reset(),!0)},board_soldir_to_hold_pieces:function(e){this.mediator.hold_pieces_add(e,this.origin_soldier1.piece),this.mediator.board.delete_at(this.origin_soldier1.place),this.state_reset()},hold_pieces_move_to_my_hold_pieces:function(e,t){this.log("相手の持駒を自分の駒台に移動");var n=this.hold_piece_source_cut(e);this.mediator.hold_pieces_add(t,this.have_piece,n),this.state_reset()},hold_piece_source_cut:function(e){var t=1;return this.have_piece_location?(this.log("相手の駒箱から移動"),this.meta_p(e)&&(this.log("シフトが押されていたので全部移動"),t=this.mediator.hold_pieces_count(this.have_piece_location,this.have_piece)),t=this.mediator.hold_pieces_can_be_reduced_count(this.have_piece_location,this.have_piece,t),this.mediator.hold_pieces_add(this.have_piece_location,this.have_piece,-t)):(this.log("駒箱から移動"),this.meta_p(e)&&(this.log("シフトが押されていたので全部移動"),t=this.mediator.piece_box_count(this.have_piece)),t=this.mediator.piece_box_can_be_reduced_count(this.have_piece,t),this.mediator.piece_box_add(this.have_piece,-t)),t},piece_decriment:function(){this.have_piece_location?this.mediator.hold_pieces_add(this.have_piece_location,this.have_piece,-1):this.mediator.piece_box_add(this.have_piece,-1)},put_on_my_soldier_p:function(e){if(this.lifted_p&&e&&e.location===this.mediator.current_location&&!l.a.isEqual(this.place_from,e.place))return!0},soldier_hold:function(e,t){this.place_from=e,this.virtual_piece_create(t,this.origin_soldier1)},state_reset:function(){this.log("state_reset"),this.dialog_soldier=null,this.place_from=null,this.have_piece=null,this.have_piece_location=null,this.have_piece_promoted=null,this.killed_soldier=null,this.virtual_piece_destroy()},if_standard_then_unhold:function(){this.move_cancel_info.smooth_cancel&&(this.log("持った状態で自分の非合法セルタップでキャンセル"),this.state_reset())},piece_hold_and_put_for_bug:function(e,t){this.state_reset()},fn_flip_all:function(){var e=this;this.mediator.board=this.mediator.board.flip_all,this.mediator.hold_pieces=l.a.reduce(m.Location.values,(function(a,t){return a[t.key]=e.mediator.hold_pieces[t.flip.key],a}),{})},fn_flop:function(){this.mediator.board=this.mediator.board.flop},init_location_toggle:function(){this.init_location_key=this.init_location.flip.key},soldier_create_from_stand_or_box_on:function(e){return new d.Soldier({piece:this.have_piece,place:e,promoted:this.have_piece_promoted||!1,location:this.have_piece_location||m.Location.fetch("black")})},mousemove_hook:function(e){var t=this;this.$data._me_last_event=e,this.me_running_p||(this.me_running_p=!0,window.requestAnimationFrame((function(){t.cursor_object_xy_update(),t.me_running_p=!1})))},click_hook:function(e){1!==e.which&&this.state_reset()},cursor_object_xy_update:function(){if(this.$data._CursorObject&&this.$data._me_last_event&&this.mouse_stick){var e=this.$data._me_last_event.clientX,t=this.$data._me_last_event.clientY;this.element_vector_set(this.$data._CursorObject,{x:e,y:t})}},virtual_piece_create:function(e,t){this.virtual_piece_destroy(),this.virtual_piece_dom_create(t),this.mouse_stick=!0,e&&(this.$data._me_last_event=e,this.cursor_object_xy_update()),this.$el.addEventListener("mousemove",this.mousemove_hook),this.$el.addEventListener("click",this.click_hook)},virtual_piece_dom_create:function(e){this.$data._CursorObject=this.el_create(["CursorObject"]);var t=this.el_create(["PieceTap"]),n=this.el_create(["PieceTexture"]),o=this.el_create(["PieceTextureSelf"].concat(Object(r.a)(e.css_class_list)));t.classList.add(e.location.flip_if(this.base.fliped).position_key),n.appendChild(o),t.appendChild(n),this.$data._CursorObject.appendChild(t);var c=e.location.flip_if(this.fliped).position_key,l=v.PositionInfo.fetch(c);if(e.place){var h=this.place_to_cell_info(e.place),f=this.vector_scale(h.radius,this.devise_info.gap*l.sign*-1),_=this.vector_add(h.center,f);this.element_vector_set(this.$data._CursorObject,_)}else this.$data._CursorObject.style.left="-50%",this.$data._CursorObject.style.top="-50%";this.$refs.ShogiPlayerGround.$el.appendChild(this.$data._CursorObject)},el_create:function(e){var t,n=document.createElement("div");return(t=n.classList).add.apply(t,Object(r.a)(e)),n},virtual_piece_destroy:function(){this.$data._CursorObject&&(this.$refs.ShogiPlayerGround.$el.removeChild(this.$data._CursorObject),this.$data._CursorObject=null,this.mouse_stick=!1,this.$el.removeEventListener("mousemove",this.mousemove_hook),this.$el.removeEventListener("click",this.click_hook))},meta_p:function(e){return e.shiftKey|e.ctrlKey|e.altKey|e.metaKey}},computed:{MoveCancelInfo:function(){return y.MoveCancelInfo},move_cancel_info:function(){return this.MoveCancelInfo.fetch(this.sp_move_cancel)},origin_soldier1:function(){if(this.place_from)return this.mediator.board.lookup(this.place_from)},origin_soldier2:function(){if(this.have_piece){return this.soldier_create_from_stand_or_box_on(null)}},soldier_or_stand_p:function(){return this.place_from||this.have_piece_location},lifted_p:function(){return!l.a.isNil(this.place_from)||!l.a.isNil(this.have_piece)},cpu_location_p:function(){if(this.play_p)return!l.a.includes(this.human_locations,this.mediator.current_location)},break_if_view_mode:function(){if(this.view_p&&!this.sp_view_mode_soldier_movable)return!0}}}},270:function(e,t,n){"use strict";n.r(t),n.d(t,"play_mode_module",(function(){return d}));var r=n(485),o=n(14),c=n.n(o),l=n(90),h=n(69),f=n(91),_=n(507),d={props:{sp_human_side:{type:String,default:"both"},play_mode_advanced_snapshot_sfen_emit:{type:Boolean,default:!1}},data:function(){return{moves:[],init_sfen:null,init_location_key:"black"}},created:function(){var e=this;this.$watch((function(){return[e.mediator,e.init_location_key]}),(function(){e.emit_update_edit_mode_snapshot_sfen()}),{deep:!0})},mounted:function(){},watch:{edit_mode_snapshot_sfen2:function(e){this.$emit("update:edit_mode_snapshot_sfen2",e)},mediator:{handler:function(e){this.$emit("update:mediator_snapshot_sfen",e.to_position_sfen)},deep:!0},turn_offset:function(e){this.$emit("update:turn_offset",e)},moves_take_turn_offset:function(e){this.$emit("update:moves_take_turn_offset",e)}},methods:{play_mode_setup_from:function(e){this.log("play_mode_setup_from"),void 0!==this.mediator.data_source.init_sfen?("view_mode"===e&&(this.init_sfen=this.mediator.data_source.init_sfen,this.moves=this.mediator.data_source.moves),"edit_mode"===e&&this.init_sfen_set()):("view_mode"===e&&(this.init_location_key=this.mediator.current_location.key),this.init_sfen_set()),this.play_mode_mediator_seek_to(this.turn_offset)},init_sfen_set:function(){this.init_sfen=this.edit_mode_snapshot_sfen(),this.moves=[]},play_mode_mediator_seek_to:function(e){this.mediator=new l.Mediator,this.mediator.data_source=this.data_source_by(this.play_mode_full_moves_sfen),this.mediator.current_turn=e,this.mediator.run(),this.flip_if_white_run()},moves_set:function(){this.moves=[].concat(Object(r.a)(this.moves_take_turn_offset),[this.last_move_info.to_sfen])},turn_next:function(){var e=this;this.play_p&&(this.sp_play_effect_type&&this.$data._last_clicked_cell&&_.EffectInfo.fetch(this.sp_play_effect_type).run({from_el:this.$data._last_clicked_cell}),this.mediator=new l.Mediator,this.mediator.data_source=this.data_source_by(this.play_mode_full_moves_sfen),this.mediator.current_turn=-1,this.mediator.run(),this.$nextTick((function(){return e.sound_play("piece_put")})),this.$emit("update:play_mode_advanced_full_moves_sfen",{sfen:this.play_mode_full_moves_sfen,last_move_info:this.last_move_info}),this.$emit("update:play_mode_advanced_moves",this.moves),this.play_mode_advanced_snapshot_sfen_emit&&this.$emit("update:play_mode_advanced_snapshot_sfen",this.mediator.to_position_sfen),this.turn_slider_focus())},edit_mode_snapshot_sfen:function(){if(this.mediator){var e=this.mediator.sfen_serializer;return["position sfen",e.to_board_sfen,this.init_location.key[0],e.to_hold_pieces,1].join(" ")}},emit_update_edit_mode_snapshot_sfen:function(){this.edit_p&&this.$emit("update:edit_mode_snapshot_sfen",this.edit_mode_snapshot_sfen())}},computed:{play_mode_full_moves_sfen:function(){if(this.init_sfen)return this.init_sfen+" moves "+this.moves.join(" ")},init_location:function(){return h.Location.fetch(this.init_location_key)},human_locations:function(){return f.HumanSideInfo.fetch(this.sp_human_side).locations},moves_take_turn_offset:function(){return c.a.take(this.moves,this.turn_offset)},edit_mode_snapshot_sfen2:function(){return this.edit_mode_snapshot_sfen()}}}},271:function(e,t,n){"use strict";n.r(t),n.d(t,"sound_module",(function(){return h}));n(29),n(21),n(28),n(37),n(38);var r=n(11),o=(n(89),n(522));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={props:{sp_sound_enabled:{type:Boolean,default:!1},sp_sound_body_changed:{type:Boolean,default:!0},sp_sound_volume:{type:Number,default:.5}},methods:{sound_play:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.$emit("sound_play",e),this.sp_sound_enabled){var n=o.SoundPresetInfo.fetch(e),r=l({src:n.source,volume:n.volume*this.sp_sound_volume,autoplay:!0},t);if("undefined"!=typeof Howl)return new Howl(r)}},sp_sound_resume_all:function(){if("undefined"!=typeof Howler)return Howler.unload()},sp_Howler:function(){if("undefined"!=typeof Howler)return Howler}}}},272:function(e,t,n){"use strict";n.r(t),n.d(t,"app_profile",(function(){return r}));var r={data:function(){return{_ShogiPlayerRenderCount:0,_MainBoardRenderCount:0}},beforeUpdate:function(){this.$data._ShogiPlayerRenderCount+=1}}},273:function(e,t,n){"use strict";n.r(t),n.d(t,"preset_module",(function(){return c}));n(15),n(36);var r=n(90),o=n(490),c={props:{sp_preset_key:{type:String,default:null}},data:function(){return{new_preset_key:this.sp_preset_key}},watch:{preset_key:function(e){this.new_preset_key=e},new_preset_key:function(e){this.mediator_setup_by_preset(e)}},methods:{mediator_setup_by_preset:function(e){e=o.PresetInfo.fetch(e),this.mediator=new r.Mediator,e.sfen&&(this.mediator.data_source=this.data_source_by(e.sfen)),this.mediator.run(),this.mediator.piece_box_piece_counts_adjust(),this.init_location_key=this.mediator.current_location.key}},computed:{preset_info_values:function(){return o.PresetInfo.values},init_preset_sfen:function(){if(this.sp_preset_key)return o.PresetInfo.fetch(this.sp_preset_key).sfen}}}},274:function(e,t,n){"use strict";n.r(t),n.d(t,"any_func_module",(function(){return c}));var r=n(523),o=n(133),c={data:function(){return{any_func_key:null}},methods:{any_func_click_handle:function(e){e.func(this)},shuffle_dialog_open:function(){var e=this;this.shuffle_mode_p=!1,this.$buefy.dialog.prompt({message:"寸法の一辺のサイズを指定してください",confirmText:"実行",cancelText:"キャンセル",inputAttrs:{type:"number",value:4,min:1,max:o.Board.dimension},trapFocus:!0,onConfirm:function(t){return e.shuffle_run(t)}})},shuffle_run:function(e){e=parseInt(e),this.mediator.shuffle_apply(e)||this.$buefy.toast.open({message:"".concat(e," x ").concat(e," が盤上の駒の数より少ないため何もしませんでした"),position:"is-bottom",queue:!1,duration:2e3,type:"is-warning"})}},computed:{AnyFuncInfo:function(){return r.AnyFuncInfo}}}},275:function(e,t,n){"use strict";n.r(t),n.d(t,"api_module",(function(){return c}));var r=n(484),o=n(90),c={methods:{api_random_puton:function(){var e=r.Soldier.random();return this.mediator.board.clear(),this.mediator.board.place_on(e),e},api_place_on:function(e){this.mediator.board.place_on(e)},api_board_clear:function(){this.mediator.board.clear()},api_board_turn_set:function(e){this.mediator_setup(e)},api_play_mode_mediator_seek_to:function(e){this.play_mode_mediator_seek_to(e)},api_flip_set:function(e){this.base.new_viewpoint=e?"white":"black"},api_viewpoint_set:function(e){this.base.new_viewpoint=e},api_flip_toggle:function(){this.base.board_flip_toggle()},api_retract_a_move:function(){var e=this.turn_offset-2;e<0&&(e=0),this.api_board_turn_set(e)},api_sfen_or_kif_set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mediator=new o.Mediator,this.mediator.data_source=this.data_source_by(e),this.mediator.current_turn=t.turn||0,this.mediator.run()},api_turn_slider_focus:function(){this.turn_slider_focus()}}}},276:function(e,t,n){"use strict";n.r(t),n.d(t,"device_detect",(function(){return o}));var r=n(524),o={props:{sp_device:{type:String,default:null}},data:function(){return{default_device:null}},beforeMount:function(){this.device_detect_create()},beforeDestroy:function(){this.device_detect_destroy()},methods:{device_detect_create:function(){document.addEventListener("touchstart",this.device_detect_hook),document.addEventListener("mousemove",this.device_detect_hook)},device_detect_destroy:function(){document.removeEventListener("touchstart",this.device_detect_hook),document.removeEventListener("mousemove",this.device_detect_hook)},device_detect_hook:function(e){this.default_device="changedTouches"in e?"is_device_touch":"is_device_desktop",this.device_detect_destroy()}},computed:{new_devise_key:function(){return this.sp_device||this.default_device||"is_device_desktop"},devise_info:function(){return r.DeviseInfo.fetch(this.new_devise_key)}}}},277:function(e,t,n){"use strict";n.r(t),n.d(t,"app_chore",(function(){return r}));var r={methods:{place_to_cell_info:function(e){var t=e.css_place_key,n=this.$el.querySelector("."+t).getBoundingClientRect(),r=n.width,o=n.height,c=r/2,l=o/2;return{center:{x:n.left+c,y:n.top+l},rect:{x:r,y:o},radius:{x:c,y:l}}},element_vector_set:function(e,t){e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px")}}}},278:function(e,t,n){"use strict";n.r(t),n.d(t,"app_vector",(function(){return r}));var r={methods:{vector_one:function(){return{x:1,y:1}},vector_scale:function(e,t){return{x:e.x*t,y:e.y*t}},vector_add:function(e,t){return{x:e.x+t.x,y:e.y+t.y}}}}},279:function(e,t,n){"use strict";function r(e,element){if(Array.prototype.indexOf)return e.indexOf(element);for(var i=0,t=e.length;i<t;i++)if(e[i]===element)return i;return-1}function o(e,t){for(var i=e.length-1;i>=0;i--)!0===t(e[i])&&e.splice(i,1)}function c(e){throw new Error("Unhandled case for value: '".concat(e,"'"))}var l=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName||""},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,n=this.getClass(),o=this.whitespaceRegex,c=n?n.split(o):[],l=e.split(o);t=l.shift();)-1===r(c,t)&&c.push(t);return this.getAttrs().class=c.join(" "),this},e.prototype.removeClass=function(e){for(var t,n=this.getClass(),o=this.whitespaceRegex,c=n?n.split(o):[],l=e.split(o);c.length&&(t=l.shift());){var h=r(c,t);-1!==h&&c.splice(h,1)}return this.getAttrs().class=c.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(html){return this.innerHTML=html,this},e.prototype.setInnerHtml=function(html){return this.setInnerHTML(html)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")},e}();var h=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new l({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},n=this.createCssClass(e);return n&&(t.class=n),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var n=[t],r=e.getCssClassSuffixes(),i=0,o=r.length;i<o;i++)n.push(t+"-"+r[i]);return n.join(" ")}return""},e.prototype.processAnchorText=function(e){return e=this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var n=t.length,r=t.location;return"smart"===r?function(e,t,n){var r,o;null==n?(n="&hellip;",o=3,r=8):(o=n.length,r=n.length);var c=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},l=function(e,t){var r=t/2,o=Math.ceil(r),c=-1*Math.floor(r),l="";return c<0&&(l=e.substr(c)),e.substr(0,o)+n+l};if(e.length<=t)return e;var h=t-o,f=function(e){var t={},n=e,r=n.match(/^([a-z]+):\/\//i);return r&&(t.scheme=r[1],n=n.substr(r[0].length)),(r=n.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=r[1],n=n.substr(r[0].length)),(r=n.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=r[1],n=n.substr(r[0].length)),(r=n.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=r[1],n=n.substr(r[0].length)),(r=n.match(/^#(.*?)$/i))&&(t.fragment=r[1]),t}(e);if(f.query){var _=f.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);_&&(f.query=f.query.substr(0,_[1].length),e=c(f))}if(e.length<=t)return e;if(f.host&&(f.host=f.host.replace(/^www\./,""),e=c(f)),e.length<=t)return e;var d="";if(f.host&&(d+=f.host),d.length>=h)return f.host.length==t?(f.host.substr(0,t-o)+n).substr(0,h+r):l(d,h).substr(0,h+r);var m="";if(f.path&&(m+="/"+f.path),f.query&&(m+="?"+f.query),m){if((d+m).length>=h)return(d+m).length==t?(d+m).substr(0,t):(d+l(m,h-d.length)).substr(0,h+r);d+=m}if(f.fragment){var y="#"+f.fragment;if((d+y).length>=h)return(d+y).length==t?(d+y).substr(0,t):(d+l(y,h-d.length)).substr(0,h+r);d+=y}if(f.scheme&&f.host){var v=f.scheme+"://";if((d+v).length<h)return(v+d).substr(0,t)}if(d.length<=t)return d;var k="";return h>0&&(k=d.substr(-1*Math.floor(h/2))),(d.substr(0,Math.ceil(h/2))+n+k).substr(0,h+r)}(e,n):"middle"===r?function(e,t,n){if(e.length<=t)return e;var r,o;null==n?(n="&hellip;",r=8,o=3):(r=n.length,o=n.length);var c=t-o,l="";return c>0&&(l=e.substr(-1*Math.floor(c/2))),(e.substr(0,Math.ceil(c/2))+n+l).substr(0,c+r)}(e,n):function(e,t,n){return function(e,t,n){var r;return e.length>t&&(null==n?(n="&hellip;",r=3):r=n.length,e=e.substring(0,t-r)+n),e}(e,t,n)}(e,n)},e}(),f=function(){function e(e){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.getType()]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}(),_=function(e,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(e[p]=b[p])},_(e,b)};function d(e,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function t(){this.constructor=e}_(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}var m=function(){return m=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e},m.apply(this,arguments)};Object.create;Object.create;var y,v=function(e){function t(t){var n=e.call(this,t)||this;return n.email="",n.email=t.email,n}return d(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(f),k=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="",n.hashtag="",n.serviceName=t.serviceName,n.hashtag=t.hashtag,n}return d(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;case"tiktok":return"https://www.tiktok.com/tag/"+t;default:throw new Error("Unknown service name to point hashtag to: "+e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t}(f),D=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.mention="",n.mention=t.mention,n.serviceName=t.serviceName,n}return d(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;case"tiktok":return"https://www.tiktok.com/@"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&t.push(n),t},t}(f),x=function(e){function t(t){var n=e.call(this,t)||this;return n.number="",n.plusSign=!1,n.number=t.number,n.plusSign=t.plusSign,n}return d(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(f),A=function(e){function t(t){var n=e.call(this,t)||this;return n.url="",n.urlMatchType="scheme",n.protocolUrlMatch=!1,n.protocolRelativeMatch=!1,n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.schemePrefixRegex=/^(https?:\/\/)?/i,n.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,n.protocolRelativeRegex=/^\/\//,n.protocolPrepended=!1,n.urlMatchType=t.urlMatchType,n.url=t.url,n.protocolUrlMatch=t.protocolUrlMatch,n.protocolRelativeMatch=t.protocolRelativeMatch,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return d(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),this.decodePercentEncoding&&(e=this.removePercentEncoding(e)),e},t.prototype.stripSchemePrefix=function(e){return e.replace(this.schemePrefixRegex,"")},t.prototype.stripWwwPrefix=function(e){return e.replace(this.wwwPrefixRegex,"$1")},t.prototype.stripProtocolRelativePrefix=function(text){return text.replace(this.protocolRelativeRegex,"")},t.prototype.removeTrailingSlash=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},t.prototype.removePercentEncoding=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(e){return t}},t}(f),w=function(e){this.__jsduckDummyDocProp=null,this.tagBuilder=e.tagBuilder},F=/[A-Za-z]/,E=/[\d]/,C=/[\D]/,B=/\s/,P=/['"]/,j=/[\x00-\x1F\x7F]/,O=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,R=O+/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,S=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,T=R+S,z=R+S,N="(?:["+S+"]{1,3}\\.){3}["+S+"]{1,3}",L="["+z+"](?:["+z+"\\-]{0,61}["+z+"])?",$=function(e){return"(?=("+L+"))\\"+e},M=function(e){return"(?:"+$(e)+"(?:\\."+$(e+1)+"){0,126}|"+N+")"},I=(new RegExp("["+z+".\\-]*["+z+"\\-]"),new RegExp("[".concat(z,"]"))),K=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermögensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--mgbcpq6gpa1a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq480n2rg|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|travelchannel|wolterskluwer|xn--cckwcxetd|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--4dbrk0ce|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nextdirect|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|university|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--q7ce6a|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|institute|insurance|kuokgroup|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--qxa6a|xn--tckwe|xn--vhquv|yodobashi|موريتانيا|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|etisalat|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|training|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lanxess|lasalle|latrobe|leclerc|limited|lincoln|markets|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|singles|staples|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|католик|اتصالات|البحرين|الجزائر|العليان|پاکستان|كاثوليك|இந்தியா|abarth|abbott|abbvie|africa|agency|airbus|airtel|alipay|alsace|alstom|amazon|anquan|aramco|author|bayern|beauty|berlin|bharti|bostik|boston|broker|camera|career|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|webcam|xihuan|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|भारतम्|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|drive|dubai|earth|edeka|email|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|irish|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|macys|mango|media|miami|money|movie|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|ישראל|ایران|بازار|بھارت|سودان|سورية|همراه|भारोत|संगठन|বাংলা|భారత్|ഭാരതം|嘉里大酒店|aarp|able|adac|aero|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|duck|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بارت|بيتك|ڀارت|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ভাৰত|ਭਾਰਤ|ભારત|ଭାରତ|ಭಾರತ|ලංකා|アマゾン|グーグル|クラウド|ポイント|大众汽车|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceo|cfa|cfd|com|cpa|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gay|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|llp|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|spa|srl|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|عرب|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ລາວ|ストア|セール|みんな|中文网|亚马逊|天主教|我爱你|新加坡|淡马锡|诺基亚|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|ευ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|广东|微博|慈善|手机|招聘|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)/,U=new RegExp("[".concat(z,"!#$%&'*+/=?^_`{|}~-]")),G=new RegExp("^".concat(K.source,"$")),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localPartCharRegex=U,t.strictTldRegex=G,t}return d(t,e),t.prototype.parseMatches=function(text){for(var e=this.tagBuilder,t=this.localPartCharRegex,n=this.strictTldRegex,r=[],o=text.length,l=new Z,h={m:"a",a:"i",i:"l",l:"t",t:"o",o:":"},f=0,_=0,d=l;f<o;){var y=text.charAt(f);switch(_){case 0:k(y);break;case 1:D(text.charAt(f-1),y);break;case 2:x(y);break;case 3:A(y);break;case 4:w(y);break;case 5:F(y);break;case 6:E(y);break;case 7:C(y);break;default:c(_)}f++}return j(),r;function k(e){"m"===e?B(1):t.test(e)&&B()}function D(e,n){":"===e?t.test(n)?(_=2,d=new Z(m(m({},d),{hasMailtoPrefix:!0}))):P():h[e]===n||(t.test(n)?_=2:"."===n?_=3:"@"===n?_=4:P())}function x(e){"."===e?_=3:"@"===e?_=4:t.test(e)||P()}function A(e){"."===e||"@"===e?P():t.test(e)?_=2:P()}function w(e){I.test(e)?_=5:P()}function F(e){"."===e?_=7:"-"===e?_=6:I.test(e)||j()}function E(e){"-"===e||"."===e?j():I.test(e)?_=5:j()}function C(e){"."===e||"-"===e?j():I.test(e)?(_=5,d=new Z(m(m({},d),{hasDomainDot:!0}))):j()}function B(e){void 0===e&&(e=2),_=e,d=new Z({idx:f})}function P(){_=0,d=l}function j(){if(d.hasDomainDot){var t=text.slice(d.idx,f);/[-.]$/.test(t)&&(t=t.slice(0,-1));var o=d.hasMailtoPrefix?t.slice("mailto:".length):t;(function(e){var t=(e.split(".").pop()||"").toLowerCase();return n.test(t)})(o)&&r.push(new v({tagBuilder:e,matchedText:t,offset:d.idx,email:o}))}P()}},t}(w),Z=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.hasMailtoPrefix=!!e.hasMailtoPrefix,this.hasDomainDot=!!e.hasDomainDot},W=function(){function e(){}return e.isValid=function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},e.isValidIpAddress=function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==e.match(t)},e.containsMultipleDots=function(e){var t=e;return this.hasFullProtocolRegex.test(e)&&(t=e.split("://")[1]),t.split("/")[0].indexOf("..")>-1},e.isValidUriScheme=function(e){var t=e.match(this.uriSchemeRegex),n=t&&t[0].toLowerCase();return"javascript:"!==n&&"vbscript:"!==n},e.urlMatchDoesNotHaveProtocolOrDot=function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},e.urlMatchDoesNotHaveAtLeastOneWordChar=function(e,t){return!(!e||!t)&&(!this.hasFullProtocolRegex.test(t)&&!this.hasWordCharAfterProtocolRegex.test(e))},e.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,e.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,e.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+O+"]"),e.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,e}(),V=(y=new RegExp("[/?#](?:["+z+"\\-+&@#/%=~_()|'$*\\[\\]{}?!:,.;^✓]*["+z+"\\-+&@#/%=~_()|'$*\\[\\]{}✓])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,M(2),")","|","(","(//)?",/(?:www\.)/.source,M(6),")","|","(","(//)?",M(10)+"\\.",K.source,"(?![-"+T+"])",")",")","(?::[0-9]+)?","(?:"+y.source+")?"].join(""),"gi")),Y=new RegExp("["+z+"]"),J=function(e){function t(t){var n=e.call(this,t)||this;return n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.matcherRegex=V,n.wordCharRegExp=Y,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return d(t,e),t.prototype.parseMatches=function(text){for(var e,t=this.matcherRegex,n=this.stripPrefix,r=this.stripTrailingSlash,o=this.decodePercentEncoding,c=this.tagBuilder,l=[],h=function(){var t=e[0],h=e[1],_=e[4],d=e[5],m=e[9],y=e.index,v=d||m,k=text.charAt(y-1);if(!W.isValid(t,h))return"continue";if(y>0&&"@"===k)return"continue";if(y>0&&v&&f.wordCharRegExp.test(k))return"continue";if(/\?$/.test(t)&&(t=t.substr(0,t.length-1)),f.matchHasUnbalancedClosingParen(t))t=t.substr(0,t.length-1);else{var D=f.matchHasInvalidCharAfterTld(t,h);D>-1&&(t=t.substr(0,D))}var x=["http://","https://"].find((function(e){return!!h&&-1!==h.indexOf(e)}));if(x){var w=t.indexOf(x);t=t.substr(w),h=h.substr(w),y+=w}var F=h?"scheme":_?"www":"tld",E=!!h;l.push(new A({tagBuilder:c,matchedText:t,offset:y,urlMatchType:F,url:t,protocolUrlMatch:E,protocolRelativeMatch:!!v,stripPrefix:n,stripTrailingSlash:r,decodePercentEncoding:o}))},f=this;null!==(e=t.exec(text));)h();return l},t.prototype.matchHasUnbalancedClosingParen=function(e){var t,n=e.charAt(e.length-1);if(")"===n)t="(";else if("]"===n)t="[";else{if("}"!==n)return!1;t="{"}for(var r=0,i=0,o=e.length-1;i<o;i++){var c=e.charAt(i);c===t?r++:c===n&&(r=Math.max(r-1,0))}return 0===r},t.prototype.matchHasInvalidCharAfterTld=function(e,t){if(!e)return-1;var n=0;t&&(n=e.indexOf(":"),e=e.slice(n));var r=new RegExp("^((.?//)?[-."+z+"]*[-"+z+"]\\.[-"+z+"]+)").exec(e);return null===r?-1:(n+=r[1].length,e=e.slice(r[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?n:-1)},t}(w),Q=new RegExp("#[_".concat(z,"]{1,139}(?![_").concat(z,"])"),"g"),X=new RegExp("[^"+z+"]"),ee=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegex=Q,n.nonWordCharRegex=X,n.serviceName=t.serviceName,n}return d(t,e),t.prototype.parseMatches=function(text){for(var e,t=this.matcherRegex,n=this.nonWordCharRegex,r=this.serviceName,o=this.tagBuilder,c=[];null!==(e=t.exec(text));){var l=e.index,h=text.charAt(l-1);if(0===l||n.test(h)){var f=e[0],_=e[0].slice(1);c.push(new k({tagBuilder:o,matchedText:f,offset:l,serviceName:r,hashtag:_}))}}return c},t}(w),te=new RegExp("".concat(/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/.source,"|").concat(/(0([1-9]{1}-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source),"g"),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matcherRegex=te,t}return d(t,e),t.prototype.parseMatches=function(text){for(var e,t=this.matcherRegex,n=this.tagBuilder,r=[];null!==(e=t.exec(text));){var o=e[0],c=o.replace(/[^0-9,;#]/g,""),l=!(!e[1]&&!e[2]),h=0==e.index?"":text.substr(e.index-1,1),f=text.substr(e.index+o.length,1),_=!h.match(/\d/)&&!f.match(/\d/);this.testMatch(e[3])&&this.testMatch(o)&&_&&r.push(new x({tagBuilder:n,matchedText:o,offset:e.index,number:c,plusSign:l}))}return r},t.prototype.testMatch=function(text){return C.test(text)},t}(w),ie=new RegExp("@[_".concat(z,"]{1,50}(?![_").concat(z,"])"),"g"),re=new RegExp("@[_.".concat(z,"]{1,30}(?![_").concat(z,"])"),"g"),oe=new RegExp("@[-_.".concat(z,"]{1,50}(?![-_").concat(z,"])"),"g"),ue=new RegExp("@[_.".concat(z,"]{1,23}[_").concat(z,"](?![_").concat(z,"])"),"g"),se=new RegExp("[^"+z+"]"),ae=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegexes={twitter:ie,instagram:re,soundcloud:oe,tiktok:ue},n.nonWordCharRegex=se,n.serviceName=t.serviceName,n}return d(t,e),t.prototype.parseMatches=function(text){var e,t=this.serviceName,n=this.matcherRegexes[this.serviceName],r=this.nonWordCharRegex,o=this.tagBuilder,c=[];if(!n)return c;for(;null!==(e=n.exec(text));){var l=e.index,h=text.charAt(l-1);if(0===l||r.test(h)){var f=e[0].replace(/\.+$/g,""),_=f.slice(1);c.push(new D({tagBuilder:o,matchedText:f,offset:l,serviceName:t,mention:_}))}}return c},t}(w);function ce(html,e){for(var text,t=e.onOpenTag,n=e.onCloseTag,r=e.onText,o=e.onComment,l=e.onDoctype,h=new le,f=0,_=html.length,d=0,y=0,v=h;f<_;){var k=html.charAt(f);switch(d){case 0:D(k);break;case 1:x(k);break;case 2:w(k);break;case 3:A(k);break;case 4:C(k);break;case 5:O(k);break;case 6:R(k);break;case 7:S(k);break;case 8:T(k);break;case 9:z(k);break;case 10:N(k);break;case 11:L(k);break;case 12:$(k);break;case 13:M(k);break;case 14:I(k);break;case 15:K(k);break;case 16:U(k);break;case 17:G(k);break;case 18:H(k);break;case 19:Z(k);break;case 20:W(k);break;default:c(d)}f++}function D(e){"<"===e&&Y()}function x(e){"!"===e?d=13:"/"===e?(d=2,v=new le(m(m({},v),{isClosing:!0}))):"<"===e?Y():F.test(e)?(d=3,v=new le(m(m({},v),{isOpening:!0}))):(d=0,v=h)}function A(e){B.test(e)?(v=new le(m(m({},v),{name:Q()})),d=4):"<"===e?Y():"/"===e?(v=new le(m(m({},v),{name:Q()})),d=12):">"===e?(v=new le(m(m({},v),{name:Q()})),J()):F.test(e)||E.test(e)||":"===e||V()}function w(e){">"===e?V():F.test(e)?d=3:V()}function C(e){B.test(e)||("/"===e?d=12:">"===e?J():"<"===e?Y():"="===e||P.test(e)||j.test(e)?V():d=5)}function O(e){B.test(e)?d=6:"/"===e?d=12:"="===e?d=7:">"===e?J():"<"===e?Y():P.test(e)&&V()}function R(e){B.test(e)||("/"===e?d=12:"="===e?d=7:">"===e?J():"<"===e?Y():P.test(e)?V():d=5)}function S(e){B.test(e)||('"'===e?d=8:"'"===e?d=9:/[>=`]/.test(e)?V():"<"===e?Y():d=10)}function T(e){'"'===e&&(d=11)}function z(e){"'"===e&&(d=11)}function N(e){B.test(e)?d=4:">"===e?J():"<"===e&&Y()}function L(e){B.test(e)?d=4:"/"===e?d=12:">"===e?J():"<"===e?Y():(d=4,f--)}function $(e){">"===e?(v=new le(m(m({},v),{isClosing:!0})),J()):d=4}function M(e){"--"===html.substr(f,2)?(f+=2,v=new le(m(m({},v),{type:"comment"})),d=14):"DOCTYPE"===html.substr(f,7).toUpperCase()?(f+=7,v=new le(m(m({},v),{type:"doctype"})),d=20):V()}function I(e){"-"===e?d=15:">"===e?V():d=16}function K(e){"-"===e?d=18:">"===e?V():d=16}function U(e){"-"===e&&(d=17)}function G(e){d="-"===e?18:16}function H(e){">"===e?J():"!"===e?d=19:"-"===e||(d=16)}function Z(e){"-"===e?d=17:">"===e?J():d=16}function W(e){">"===e?J():"<"===e&&Y()}function V(){d=0,v=h}function Y(){d=1,v=new le({idx:f})}function J(){var e=html.slice(y,v.idx);e&&r(e,y),"comment"===v.type?o(v.idx):"doctype"===v.type?l(v.idx):(v.isOpening&&t(v.name,v.idx),v.isClosing&&n(v.name,v.idx)),V(),y=f+1}function Q(){var e=v.idx+(v.isClosing?2:1);return html.slice(e,f).toLowerCase()}y<f&&(text=html.slice(y,f),r(text,y),y=f+1)}var le=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing},he=function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"==typeof t.email?t.email:this.email,this.phone="boolean"==typeof t.phone?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow="boolean"==typeof t.newWindow?t.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"==typeof t.stripTrailingSlash?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"==typeof t.decodePercentEncoding?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var n=this.mention;if(!1!==n&&-1===["twitter","instagram","soundcloud","tiktok"].indexOf(n))throw new Error("invalid `mention` cfg '".concat(n,"' - see docs"));var r=this.hashtag;if(!1!==r&&-1===["twitter","facebook","instagram","tiktok"].indexOf(r))throw new Error("invalid `hashtag` cfg '".concat(r,"' - see docs"));this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,n){return new e(n).link(t)},e.parse=function(t,n){return new e(n).parse(t)},e.prototype.normalizeUrlsCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!=typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!=typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!=typeof e.tldMatches||e.tldMatches}},e.prototype.normalizeStripPrefixCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{scheme:e,www:e}:{scheme:"boolean"!=typeof e.scheme||e.scheme,www:"boolean"!=typeof e.www||e.www}},e.prototype.normalizeTruncateCfg=function(e){return"number"==typeof e?{length:e,location:"end"}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n]);return e}(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},e.prototype.parse=function(e){var t=this,n=["a","style","script"],r=0,o=[];return ce(e,{onOpenTag:function(e){n.indexOf(e)>=0&&r++},onText:function(text,e){if(0===r){var n=function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var n,r=[],o=0;n=t.exec(e);)r.push(e.substring(o,n.index)),r.push(n[0]),o=n.index+n[0].length;return r.push(e.substring(o)),r}(text,/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),c=e;n.forEach((function(e,i){if(i%2==0){var n=t.parseText(e,c);o.push.apply(o,n)}c+=e.length}))}},onCloseTag:function(e){n.indexOf(e)>=0&&(r=Math.max(r-1,0))},onComment:function(e){},onDoctype:function(e){}}),o=this.compactMatches(o),o=this.removeUnwantedMatches(o)},e.prototype.compactMatches=function(e){e.sort((function(a,b){return a.getOffset()-b.getOffset()}));for(var i=0;i<e.length-1;){var t=e[i],n=t.getOffset(),r=t.getMatchedText().length,o=n+r;if(i+1<e.length){if(e[i+1].getOffset()===n){var c=e[i+1].getMatchedText().length>r?i:i+1;e.splice(c,1);continue}if(e[i+1].getOffset()<o){e.splice(i+1,1);continue}}i++}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||o(e,(function(e){return"hashtag"===e.getType()})),this.email||o(e,(function(e){return"email"===e.getType()})),this.phone||o(e,(function(e){return"phone"===e.getType()})),this.mention||o(e,(function(e){return"mention"===e.getType()})),this.urls.schemeMatches||o(e,(function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()})),this.urls.wwwMatches||o(e,(function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()})),this.urls.tldMatches||o(e,(function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()})),e},e.prototype.parseText=function(text,e){void 0===e&&(e=0),e=e||0;for(var t=this.getMatchers(),n=[],i=0,r=t.length;i<r;i++){for(var o=t[i].parseMatches(text),c=0,l=o.length;c<l;c++)o[c].setOffset(e+o[c].getOffset());n.push.apply(n,o)}return n},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),n=[],r=0,i=0,o=t.length;i<o;i++){var c=t[i];n.push(e.substring(r,c.getOffset())),n.push(this.createMatchReturnVal(c)),r=c.getOffset()+c.getMatchedText().length}return n.push(e.substring(r)),n.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof l?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var e=this.getTagBuilder(),t=[new ee({tagBuilder:e,serviceName:this.hashtag}),new H({tagBuilder:e}),new ne({tagBuilder:e}),new ae({tagBuilder:e,serviceName:this.mention}),new J({tagBuilder:e,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=t},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new h({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="3.15.0",e.AnchorTagBuilder=h,e.HtmlTag=l,e.matcher={Email:H,Hashtag:ee,Matcher:w,Mention:ae,Phone:ne,Url:J},e.match={Email:v,Hashtag:k,Match:f,Mention:D,Phone:x,Url:A},e}();t.a=he},281:function(e,t,n){"use strict";n.r(t),n.d(t,"CustomMarked",(function(){return r}));var r=n(566),o=new r.Renderer;o.table=function(header,body){return'\n  <div class="table_wrap">\n    <table>\n      <thead>'.concat(header,"</thead>\n      <tbody>").concat(body,"</tbody>\n    </table>\n  </div>")},r.setOptions({renderer:o,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1})},284:function(e,t,n){"use strict";t.a="| Method                                 | 動作                                                                |\n|----------------------------------------|---------------------------------------------------------------------|\n| `api_random_puton()`                   | 盤面をクリアしてランダムに駒を1つ配置し、Soldier インスタンスを返す |\n| `api_place_on(soldier)`                | 盤面に駒を置く                                                      |\n| `api_board_clear()`                    | 盤面をクリア                                                        |\n| `api_board_turn_set(turn)`             | 指定手数の局面に設定                                                |\n| `api_play_mode_mediator_seek_to(turn)` | 指定手数の局面に設定・play_mode専用・音出ない                       |\n| `api_flip_set(flag)`                   | 反転状態の設定                                                      |\n| `api_flip_toggle()`                    | 反転する(コントローラーの「上下ボタン」を押したのと同じ)            |\n| `api_retract_a_move()`                 | 待った(2手戻す)                                                     |\n| `api_sfen_or_kif_set()`                | 棋譜の設定                                                          |\n| `api_turn_slider_focus()`              | 手数のスライダーがあればフォーカスする                              |\n"},457:function(e,t,n){"use strict";n(515)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},482:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=D(n(491)),c=D(n(492)),l=D(n(495)),h=D(n(487)),f=D(n(498)),_=D(n(499)),d=D(n(500)),m=D(n(501)),y=D(n(502)),v=D(n(503)),k=D(n(14));function D(e){return e&&e.__esModule?e:{default:e}}var x=function(){function e(t){var n=this;(0,y.default)(this,e),Object.defineProperty(this,"attributes",{value:t,writable:!1,enumerable:!1,configurable:!1}),k.default.forIn(t,(function(e,t){(0,h.default)(n,t,{value:e,writable:!1,enumerable:!0,configurable:!1})})),"name"in this||Object.defineProperty(this,"name",{value:t.name||t.key.toString(),writable:!1,enumerable:!0,configurable:!1})}return(0,v.default)(e,null,[{key:"memory_record_reset",value:function(e){return this._values=void 0,this._keys_hash=void 0,this._codes_hash=void 0,this._keys=void 0,this._codes=void 0,this._names=void 0,this._records=e,this}},{key:"memory_record_create_index_or",value:function(e){var t=this;return this.values.reduce((function(a,n){return e.forEach((function(e){var r=n[e];if(null!=r){if(r in a)throw new Error([t.name+"#"+e+" "+(0,m.default)(r)+" is duplicate","Existing: "+(0,m.default)((0,d.default)(a)),"Conflict: "+(0,m.default)(n)].join("\n"));a[r]=n}})),a}),{})}},{key:"lookup",value:function(e){return e instanceof this?e:"number"==typeof e?this.codes_hash[e]:this.keys_hash[e]}},{key:"fetch",value:function(e){var element=this.lookup(e);if(!element)throw new Error([this.name+".fetch("+(0,m.default)(e)+") does not match anything","keys: "+(0,m.default)(this.keys),"codes: "+(0,m.default)(this.codes)].join("\n"));return element}},{key:"fetch_if",value:function(e){if(null!=e)return this.fetch(e)}},{key:"define",get:function(){throw new Error(this.name+".define() is not implemented")}},{key:"values",get:function(){var e=this;return void 0!==this._values||(this._values=k.default.map(this.__source_records,(function(t,i){return"code"in(t=(0,_.default)({},t,{index:i}))||(t=(0,_.default)({},t,{code:i})),"key"in t||(t=(0,_.default)({},t,{key:"_key"+i})),(0,f.default)(new e(t))}))),this._values}},{key:"keys_hash",get:function(){return null!=this._keys_hash||(this._keys_hash=this.memory_record_create_index_or(["key"])),this._keys_hash}},{key:"codes_hash",get:function(){return null!=this._codes_hash||(this._codes_hash=this.memory_record_create_index_or(["code"])),this._codes_hash}},{key:"keys",get:function(){return null!=this._keys||(this._keys=(0,d.default)(this.keys_hash)),this._keys}},{key:"codes",get:function(){return null!=this._codes||(this._codes=this.values.map((function(e){return e.code}))),this._codes}},{key:"names",get:function(){return null!=this._names||(this._names=this.values.map((function(e){return e.name}))),this._names}},{key:"__source_records",get:function(){return null!=this._records||(this._records=this.define),this._records}}]),e}();if(t.default=x,e.argv[1]===r){var A=function(e){function t(){return(0,y.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,v.default)(t,null,[{key:"define",get:function(){return[{key:"black",name:"☗"},{key:"white",name:"☖"},{code:7}]}}]),t}(x);console.log(A.keys),console.log(A.codes);var w=A.values[0];console.log(w.key),console.log(w.code),console.log(w.name),console.log(A.values),console.log(A.lookup("black").name),console.log(A.lookup("black").code),console.log(A.lookup("_key2").name);var F=A.lookup("black");console.log(F instanceof A),console.log(A.lookup(0)),console.log(A.lookup(1)),console.log(A.lookup(2)),console.log(A.values[0]==A.values[0]),console.log(A.values.map((function(e){return e.key}))),console.log((0,d.default)(A.keys_hash)),console.log(A.fetch("unknown"))}}).call(this,n(131),"/index.js")},483:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"Piece",(function(){return D}));n(479);var o=n(129),c=n(130),l=n(489),h=n(480),f=n(481),_=n(478),d=(n(15),n(36),n(482)),m=n.n(d),y=n(505),v=n(511);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(_.a)(e);if(t){var o=Object(_.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var D=function(e){Object(h.a)(n,e);var t=k(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"css_class_list",get:function(){return["piece_name","piece_".concat(this.key)]}},{key:"promotable_p",get:function(){return!!this.promoted_name}},{key:"piece_vector",get:function(){return y.PieceVector.fetch(this.key)}},{key:"piece_yomiage",get:function(){return v.PieceYomiage.fetch(this.key)}}],[{key:"define",get:function(){return[{key:"K",name:"玉",alias_name:"王",promoted_name:null,promoted_alias_name:null},{key:"R",name:"飛",alias_name:null,promoted_name:"龍",promoted_alias_name:"竜"},{key:"B",name:"角",alias_name:null,promoted_name:"馬",promoted_alias_name:null},{key:"G",name:"金",alias_name:null,promoted_name:null,promoted_alias_name:null},{key:"S",name:"銀",alias_name:null,promoted_name:"全",promoted_alias_name:null},{key:"N",name:"桂",alias_name:null,promoted_name:"圭",promoted_alias_name:null},{key:"L",name:"香",alias_name:null,promoted_name:"杏",promoted_alias_name:null},{key:"P",name:"歩",alias_name:null,promoted_name:"と",promoted_alias_name:null}]}},{key:"lookup",value:function(e){return"string"==typeof e&&(e=e.toUpperCase()),Object(l.a)(Object(_.a)(n),"lookup",this).call(this,e)}},{key:"lookup_by_name",value:function(e){return null==this._lookup_by_name&&(this._lookup_by_name=this.memory_record_create_index_or(["name","alias_name"])),this._lookup_by_name[e]}},{key:"lookup_by_promoted_name",value:function(e){return null==this._lookup_by_promoted_name&&(this._lookup_by_promoted_name=this.memory_record_create_index_or(["promoted_name","promoted_alias_name"])),this._lookup_by_promoted_name[e]}}]),n}(m.a);e.argv[1]===r&&(console.log(D.fetch("K")),console.log(D.fetch("K")),console.log(D.lookup("")),console.log(D.values),console.log(D.values_map.get("K")),console.log(D.fetch("K").key))}.call(this,n(131),"/index.js")},484:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"Soldier",(function(){return x}));n(29),n(21),n(28),n(37),n(38);var o=n(11),c=n(129),l=n(130),h=(n(27),n(15),n(36),n(3)),f=n(14),_=n.n(f),d=n(133),m=n(132),y=n(483),v=n(69);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x=function(){function e(t){Object(c.a)(this,e),this.attributes=Object.assign({},t)}return Object(l.a)(e,[{key:"piece",get:function(){return this.attributes.piece}},{key:"place",get:function(){return this.attributes.place},set:function(e){h.a.set(this.attributes,"place",e)}},{key:"location",get:function(){return this.attributes.location}},{key:"promoted",get:function(){return!!this.attributes.promoted},set:function(e){h.a.set(this.attributes,"promoted",e)}},{key:"name",get:function(){return this.promoted?this.piece.promoted_name:this.piece.name}},{key:"yomiage_name",get:function(){return this.piece.piece_yomiage.yomiage(this.promoted)}},{key:"transform_clone",get:function(){var e=null;return e=this.piece.promotable_p?this.promoted?{location:this.location.flip,promoted:!this.promoted}:{promoted:!this.promoted}:{location:this.location.flip},this.clone_with_attrs(e)}},{key:"clone_with_attrs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(D(D({},this.attributes),t))}},{key:"promotable_p",get:function(){if(this.piece.promotable_p&&!this.promoted)return this.danger_zone_p}},{key:"danger_zone_p",get:function(){return"black"===this.location.key?this.place.y<d.Board.danger_zone_size:this.place.y>=d.Board.dimension-d.Board.danger_zone_size}},{key:"css_class_list",get:function(){var e=[];return e.push("location_".concat(this.location.key)),e.push("promoted_".concat(this.promoted)),e=_.a.concat(e,this.piece.css_class_list)}},{key:"bottom_spaces",get:function(){return d.Board.dimension-1-this.top_spaces}},{key:"top_spaces",get:function(){return this.place.sp_flip_if_white(this.location).y}}],[{key:"random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.place;if(!t){var n=_.a.random(0,d.Board.dimension-1),r=_.a.random(0,d.Board.dimension-1);t=m.Place.fetch([n,r])}var o=y.Piece.fetch(_.a.random(0,y.Piece.values.length-1)),c=o.promotable_p&&0===_.a.random(0,1),l=v.Location.fetch(_.a.random(0,v.Location.values.length-1));return new this({piece:o,place:t,promoted:c,location:l})}}]),e}();if(e.argv[1]===r){var A=new x({place:new m.Place([1,7]),piece:y.Piece.fetch("P"),promoted:!0,location:v.Location.fetch("white")});console.log(A.name),console.log(A.top_spaces)}}.call(this,n(131),"/index.js")},485:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(92);var o=n(134),c=n(72);function l(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(o.a)(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},486:function(e,t,n){"use strict";t.__esModule=!0;var r=l(n(493)),o=l(n(494)),c="function"==typeof o.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function l(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof o.default&&"symbol"===c(r.default)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":c(e)}},487:function(e,t,n){e.exports={default:n(531),__esModule:!0}},489:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(478);function o(object,e){for(;!Object.prototype.hasOwnProperty.call(object,e)&&null!==(object=Object(r.a)(object)););return object}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var base=o(e,t);if(base){var desc=Object.getOwnPropertyDescriptor(base,t);return desc.get?desc.get.call(arguments.length<3?e:n):desc.value}},c.apply(this,arguments)}},490:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"PresetInfo",(function(){return m}));n(479);var o=n(129),c=n(130),l=n(480),h=n(481),f=n(478),_=n(482);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var m=function(e){Object(l.a)(n,e);var t=d(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"詰将棋",sfen:"position sfen 4k4/9/9/9/9/9/9/9/9 b 2r2b4g4s4n4l18p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"詰将棋 - 美濃",sfen:"position sfen ln1g5/1ks6/1ppp5/p8/9/9/9/9/9 b BGSNL2rb2g2s2n2l14p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"詰将棋 - 矢倉",sfen:"position sfen 7nl/6gk1/5gspp/5pp2/9/9/9/9/9 b BGSNL2rbg2s2n2l14p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"戦型 右四間 vs 四間飛車",sfen:"position sfen ln1g1g1nl/1ks2r3/1pppp1bpp/p3spp2/9/P1P1SP1PP/1P1PP1P2/1BK1GR3/LNSG3NL b - 25",first_location_key:"black",piece_box:[]},{key:"全部駒箱",sfen:"position sfen 9/9/9/9/9/9/9/9/9 b - 1",first_location_key:"black",piece_box:[["B",2],["R",2],["L",4],["N",4],["S",4],["G",4],["P",18],["K",2]]},{key:"平手",sfen:"position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1",first_location_key:"black",piece_box:[]},{key:"香落ち",sfen:"position sfen lnsgkgsn1/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["L",1]]},{key:"右香落ち",sfen:"position sfen 1nsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["L",1]]},{key:"角落ち",sfen:"position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1]]},{key:"飛車落ち",sfen:"position sfen lnsgkgsnl/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["R",1]]},{key:"飛香落ち",sfen:"position sfen lnsgkgsn1/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["R",1],["L",1]]},{key:"二枚落ち",sfen:"position sfen lnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1]]},{key:"三枚落ち",sfen:"position sfen lnsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",1]]},{key:"四枚落ち",sfen:"position sfen 1nsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2]]},{key:"六枚落ち",sfen:"position sfen 2sgkgs2/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2]]},{key:"八枚落ち",sfen:"position sfen 3gkg3/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2]]},{key:"十枚落ち",sfen:"position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2]]},{key:"十九枚落ち",sfen:"position sfen 4k4/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2],["P",9]]},{key:"二十枚落ち",sfen:"position sfen 9/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2],["P",9],["K",1]]},{key:"青空将棋",sfen:"position sfen lnsgkgsnl/1r5b1/9/9/9/9/9/1B5R1/LNSGKGSNL b - 1",first_location_key:"black",piece_box:[]}]}}]),n}(n.n(_).a);e.argv[1]===r&&(console.log(m.fetch("平手")),console.log(m.fetch("香落ち").first_location_key))}.call(this,n(131),"/index.js")},491:function(e,t,n){e.exports={default:n(526),__esModule:!0}},492:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(486),c=(r=o)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,c.default)(t))&&"function"!=typeof t?e:t}},493:function(e,t,n){e.exports={default:n(527),__esModule:!0}},494:function(e,t,n){e.exports={default:n(528),__esModule:!0}},495:function(e,t,n){"use strict";t.__esModule=!0;var r=l(n(496)),o=l(n(497)),c=l(n(486));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},496:function(e,t,n){e.exports={default:n(529),__esModule:!0}},497:function(e,t,n){e.exports={default:n(530),__esModule:!0}},498:function(e,t,n){e.exports={default:n(532),__esModule:!0}},499:function(e,t,n){e.exports={default:n(533),__esModule:!0}},500:function(e,t,n){e.exports={default:n(534),__esModule:!0}},501:function(e,t,n){e.exports={default:n(535),__esModule:!0}},502:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},503:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(487),c=(r=o)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,c.default)(e,n.key,n)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},504:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"ParserBase",(function(){return _}));var o=n(129),c=n(130),l=(n(15),n(36),n(14)),h=n.n(l),f=n(69),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(o.a)(this,e),this.reset(),this.raw_body=t}return Object(c.a)(e,[{key:"reset",value:function(){this.raw_body="",this.header={}}},{key:"parse",value:function(){}},{key:"board",get:function(){console.warn("not implemented")}},{key:"hold_pieces_empty_hash",value:function(){return h.a.reduce(f.Location.values,(function(a,e){return a[e.key]={},a}),{})}},{key:"turn_offset_min",get:function(){return 0}},{key:"turn_offset_max",get:function(){return this.move_infos.length}},{key:"turn_base",get:function(){return 0}},{key:"location_by_offset",value:function(e){return this.base_location.advance(e)}},{key:"last_location",get:function(){return this.location_by_offset(this.turn_offset_max-1)}},{key:"next_location",get:function(){return this.location_by_offset(this.turn_offset_max)}},{key:"move_infos",get:function(){console.warn("not implemented")}},{key:"comments_pack",get:function(){return null}}],[{key:"parse",value:function(e){var t=new this(e);return t.parse(),t}}]),e}();e.argv[1]}.call(this,n(131),"/index.js")},505:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"PieceVector",(function(){return m}));n(479);var o=n(129),c=n(130),l=n(480),h=n(481),f=n(478),_=n(482);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var m=function(e){Object(l.a)(n,e);var t=d(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"K",basic_once_vectors:"pattern_king",basic_repeat_vectors:null,promoted_once_vectors:null,promoted_repeat_vectors:null,force_promote_length:null},{key:"R",basic_once_vectors:null,basic_repeat_vectors:"pattern_plus",promoted_once_vectors:"pattern_x",promoted_repeat_vectors:"pattern_plus",force_promote_length:null},{key:"B",basic_once_vectors:null,basic_repeat_vectors:"pattern_x",promoted_once_vectors:"pattern_plus",promoted_repeat_vectors:"pattern_x",force_promote_length:null},{key:"G",basic_once_vectors:"pattern_gold",basic_repeat_vectors:null,promoted_once_vectors:null,promoted_repeat_vectors:null,force_promote_length:null},{key:"S",basic_once_vectors:"pattern_silver",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:null},{key:"N",basic_once_vectors:"pattern_knight",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:1},{key:"L",basic_once_vectors:null,basic_repeat_vectors:"pattern_pawn",promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:0},{key:"P",basic_once_vectors:"pattern_pawn",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:0}]}},{key:"pattern_plus",get:function(){return[null,[0,-1],null,[-1,0],[1,0],null,[0,1],null]}},{key:"pattern_x",get:function(){return[[-1,-1],null,[1,-1],null,null,null,[-1,1],null,[1,1]]}},{key:"pattern_silver",get:function(){return[[-1,-1],[0,-1],[1,-1],null,null,null,[-1,1],null,[1,1]]}},{key:"pattern_gold",get:function(){return[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],null,[0,1],null]}},{key:"pattern_king",get:function(){return[[-1,-1],[0,-1],[1,-1],[-1,0],null,[1,0],[-1,1],[0,1],[1,1]]}},{key:"pattern_knight",get:function(){return[[-1,-2],[1,-2]]}},{key:"pattern_pawn",get:function(){return[[0,-1]]}}]),n}(n.n(_).a);e.argv[1]}.call(this,n(131),"/index.js")},506:function(e,t,n){var r=n(7),o=n(262)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},507:function(e,t,n){"use strict";n.r(t),n.d(t,"EffectInfo",(function(){return w}));n(29),n(21),n(28),n(37),n(38),n(479);var r=n(480),o=n(481),c=n(478),l=n(485),h=n(11),f=n(129),_=n(130),d=n(482),m=n.n(d),y=n(513);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var l=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(h.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x=function(){function e(base,t){Object(f.a)(this,e),this.base=base,this.params=D({},t)}return Object(_.a)(e,[{key:"run",value:function(){var e=this;this.current=document.createElement("div"),this.current.classList.add("fireball",this.params.css_class),this.current.style.transitionDuration="".concat(this.params.duration,"ms"),this.base.body_el.appendChild(this.current);var t=this.base.from_rc,n=t.left+t.width/2,r=t.top+t.height/2,o=this.current.getBoundingClientRect(),c=n-o.width/2,l=r-o.height/2;this.current.style.position="absolute",this.current.style.left="".concat(c,"px"),this.current.style.top="".concat(l,"px");var a=2*Math.PI*this.params.angle,h=Math.cos(a)*this.params.radius,f=Math.sin(a)*this.params.radius;this.current.style.transform="translate(".concat(h,"px, ").concat(f,"px)"),setTimeout((function(){return e.current_destroy()}),this.params.duration+this.params.destroy_gap)}},{key:"current_destroy",value:function(){this.base.body_el.removeChild(this.current)}}],[{key:"run",value:function(base){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},object=new this(base,e);object.run()}}]),e}(),A=function(e){Object(r.a)(n,e);var t=v(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"run",value:function(){var e=this;this.effect_info.params_list.forEach((function(t){e.circle_create(t)}))}}]),n}(function(){function e(t,n){Object(f.a)(this,e),this.effect_info=t,this.params=n}return Object(_.a)(e,[{key:"run_around",value:function(){this.before_run(),this.run()}},{key:"before_run",value:function(){var e=this.params.from_el||document.querySelector(this.params.from_selector);this.from_rc=e.getBoundingClientRect(),this.body_el=document.querySelector("body")}},{key:"circle_create",value:function(e){e=D(D({},this.params),e);for(var t=y.Random.rand(),n=0;n<e.total;n++){var r=D({},e);r.radius_range&&(r.radius=y.Random.range.apply(y.Random,Object(l.a)(r.radius_range))),r.duration_range&&(r.duration=y.Random.range.apply(y.Random,Object(l.a)(r.duration_range))),r.destroy_gap_range&&(r.destroy_gap=y.Random.range.apply(y.Random,Object(l.a)(r.destroy_gap_range))),r.angle_rand?r.angle=y.Random.rand():r.angle=t+1/e.total*n,this.fireball_create(r)}}},{key:"fireball_create",value:function(e){x.run(this,e)}}],[{key:"run",value:function(e,t){new this(e,t).run_around()}}]),e}()),w=function(e){Object(r.a)(n,e);var t=v(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"run",value:function(e){this.factory.run(this,e)}}],[{key:"define",get:function(){return[{key:"fw_type_1",factory:A,params_list:[{total:16,angle_rand:!1,radius:null,radius_range:[32,512],duration:null,duration_range:[300,600],destroy_gap:null,destroy_gap_range:[-100,100],css_class:"fireball_s1"},{total:16,angle_rand:!1,radius:200,radius_range:null,duration:300,duration_range:null,destroy_gap:0,destroy_gap_range:null,css_class:"fireball_s1"}]},{key:"fw_type_2",factory:A,params_list:[{total:16,angle_rand:!1,radius:200,radius_range:null,duration:300,duration_range:null,destroy_gap:0,destroy_gap_range:null,css_class:"fireball_s1"}]},{key:"fw_type_3",factory:A,params_list:[{total:12,angle_rand:!1,radius:128,radius_range:null,duration:750,duration_range:null,destroy_gap:0,destroy_gap_range:null,css_class:"fireball_s1"}]}]}}]),n}(m.a)},509:function(e,t,n){"use strict";n.r(t),n.d(t,"MoveHash",(function(){return _}));var r=n(129),o=n(130),c=(n(45),n(257),n(488)),l=n.n(c),h=n(483),f=n(132),_=function(){function e(t){Object(r.a)(this,e),this.promoted_trigger="+"===t.promoted,"*"===t.origin_y?this.drop_piece=h.Piece.fetch(t.origin_x):this.origin_place=f.Place.fetch("".concat(t.origin_x).concat(t.origin_y)),this.place=f.Place.fetch("".concat(t.pos_x).concat(t.pos_y))}return Object(o.a)(e,[{key:"to_sfen",get:function(){return this.to_custom_sfen()}},{key:"to_flop_sfen",get:function(){return this.to_custom_sfen({flop:!0})}},{key:"to_custom_sfen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[];return this.drop_piece?(a.push(this.drop_piece.key),a.push("*")):a.push(this.origin_place.flop_if(e.flop).to_sfen),a.push(this.place.flop_if(e.flop).to_sfen),this.promoted_trigger&&a.push("+"),a.join("")}}],[{key:"line_flop",value:function(e){return this.parse_line(e).map((function(e){return e.to_flop_sfen})).join(" ")}},{key:"str_flop",value:function(e){var t=this.parse(e);if(t)return t.to_flop_sfen}},{key:"parse_line",value:function(line){var e=this,s=line||"";return""===s?[]:s.split(/\s+/).map((function(t){return e.parse(t)}))}},{key:"parse",value:function(e){var t=l.a.exec(e,l()("(?<origin_x>\\S)(?<origin_y>\\S)(?<pos_x>\\S)(?<pos_y>\\S)(?<promoted>\\+?)?"));return t?new this(t):null}}]),e}()},510:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"SfenSerializer",(function(){return m}));var o=n(129),c=n(130),l=(n(45),n(15),n(36),n(14)),h=n.n(l),f=n(483),_=(n(132),n(90)),d=n(69),m=(n(133),function(){function e(t){Object(o.a)(this,e),this.mediator=t}return Object(c.a)(e,[{key:"to_s",get:function(){var e=this.__base_parts;return e.push(this.mediator.display_turn+1),e.join(" ")}},{key:"to_s_without_turn",get:function(){return this.__base_parts.join(" ")}},{key:"to_board_sfen",get:function(){return this.mediator.board.to_sfen}},{key:"to_hold_pieces",get:function(){var e=this,t=d.Location.values.map((function(t){var n=e.mediator.hold_pieces[t.key],r=f.Piece.values.map((function(e){var r=n[e.key]||0,o="";if(0===r)return null;r>=2&&(o+=r);var c=e.key;return o+=c="white"===t.key?c.toLowerCase():c.toUpperCase()}));return h.a.compact(r).join("")})).join("");return h.a.isEmpty(t)&&(t="-"),t}},{key:"__base_parts",get:function(){var e=[];return e.push(this.to_board_sfen),e.push(this.mediator.current_location.key[0]),e.push(this.to_hold_pieces),e}}]),e}());if(e.argv[1]===r){var y=new _.Mediator;y.source="position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d",y.current_turn=1,y.run();var v=new m(y);console.log(v.to_s)}}.call(this,n(131),"/index.js")},511:function(e,t,n){"use strict";n.r(t),n.d(t,"PieceYomiage",(function(){return d}));n(479);var r=n(129),o=n(130),c=n(480),l=n(481),h=n(478),f=(n(27),n(482));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=_(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"yomiage",value:function(e){return e?this.promoted_name:this.name}}],[{key:"define",get:function(){return[{key:"K",prefix_name:"ぎょく",name:"ぎょくっ！",promoted_name:null},{key:"R",prefix_name:"ひしゃ",name:"ひしゃっ！",promoted_name:"りゅー！"},{key:"B",prefix_name:"かく",name:"かくっ！",promoted_name:"うまっ！"},{key:"G",prefix_name:"きん",name:"きんっ！",promoted_name:null},{key:"S",prefix_name:"ぎん",name:"ぎんっ！",promoted_name:"なりぎんっ！"},{key:"N",prefix_name:"けい",name:"けいっ！",promoted_name:"なりけいっ！"},{key:"L",prefix_name:"きょー",name:"きょー！",promoted_name:"なりきょー！"},{key:"P",prefix_name:"ふ",name:"ふーっ！",promoted_name:"ときんっ！"}]}}]),n}(n.n(f).a)},512:function(e,t,n){"use strict";n.r(t),n.d(t,"PlaceYomiageInfo",(function(){return d}));n(479);var r=n(129),o=n(130),c=n(480),l=n(481),h=n(478),f=n(482);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=_(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"define",get:function(){return[{key:"1",yomiage:"1"},{key:"2",yomiage:"にー"},{key:"3",yomiage:"さん"},{key:"4",yomiage:"よん"},{key:"5",yomiage:"ごー"},{key:"6",yomiage:"6"},{key:"7",yomiage:"なな"},{key:"8",yomiage:"8"},{key:"9",yomiage:"きゅー"}]}}]),n}(n.n(f).a)},513:function(e,t,n){"use strict";n.r(t),n.d(t,"Random",(function(){return r}));var r={rand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.random()*e},range:function(a,b){return this.rand(b-a)+a},int_range_include:function(a,b){return this.rand(b-a+1)+a}}},514:function(e,t,n){var r=n(19),meta=n(261).onFreeze;n(135)("freeze",(function(e){return function(t){return e&&r(t)?e(meta(t)):t}}))},515:function(e,t,n){var r=n(7),o=n(16),c=n(46),l=/"/g,h=function(e,t,n,r){var o=String(c(e)),h="<"+t;return""!==n&&(h+=" "+n+'="'+String(r).replace(l,"&quot;")+'"'),h+">"+o+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(h),r(r.P+r.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},516:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/Universal_Sound_FX/TABLE_TENNIS_Racket_Ball_Hit_07_Hard_mono.wav"},517:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/Universal_Sound_FX/RELOAD_Rechamber_Leaver_Action_stereo.wav"},518:function(e,t,n){"use strict";n.r(t),n.d(t,"KanjiNumber",(function(){return m}));var r=n(11),o=n(485),c=n(129),l=n(130),h=(n(51),n(263),n(89),n(508),n(29),n(21),n(28),n(37),n(38),n(488)),f=n.n(h);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"kanji_to_number_string",value:function(s){var e=this;s=s.replace(new RegExp("[".concat(this.KANJI_TABLE,"]"),"g"),(function(t){return e.TRANSRATE_TABLE[t]}));for(var t=function(i){var t=f()("(?<number>\\d+)?(?<unit>[".concat(e.UNIT_TABLE.charAt(i),"])(?<rest>\\d+)?"),"g");s=f.a.replace(s,t,(function(e){var t,n;return Number(null!==(t=e.number)&&void 0!==t?t:1)*Math.pow(10,i+1)+Number(null!==(n=e.rest)&&void 0!==n?n:0)}))},i=0;i<this.unit_size;i++)t(i);return s}},{key:"number_to_kanji",value:function(e){for(var t=[],n=this.unit_size;n>=1;n--){var s=this.UNIT_TABLE.charAt(n-1),r=Math.pow(10,n),q=Math.trunc(e/r),o=Math.trunc(e%r);1===q?n>=this.one_number_insert_level?t.push(this.KANJI_TABLE.charAt(q)+s):t.push(s):q>=2&&t.push(this.KANJI_TABLE.charAt(q)+s),e=o}return(0===e&&0===t.length||e>=1)&&t.push(this.KANJI_TABLE.charAt(e)),t.join("")}},{key:"regexp",get:function(){return f()("[".concat(this.KANJI_TABLE).concat(this.UNIT_TABLE,"]+"))}},{key:"extract",value:function(s){var e=[];return f.a.forEach(s,this.regexp,(function(t){e.push(t[0])})),e}}]),e}();m.unit_size=6,m.one_number_insert_level=4,m.KANJI_TABLE="〇一二三四五六七八九",m.UNIT_TABLE="十百千万憶兆",m.NUMBER_TABLE="0123456789",m.TRANSRATE_TABLE=Object(o.a)(m.KANJI_TABLE).reduce((function(a,e,i){return d(d({},a),{},Object(r.a)({},e,m.NUMBER_TABLE.charAt(i)))}),{})},519:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"MoveInfo",(function(){return _}));n(29),n(21),n(28),n(37),n(38);var o=n(11),c=n(129),l=n(130);n(27);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _=function(){function e(t){Object(c.a)(this,e),Object.assign(this,t)}return Object(l.a)(e,[{key:"to_sfen",get:function(){var e=null;if("move"===this.type)e=this.from.place.to_sfen+this.to.place.to_sfen;else if("promotable"===this.type)e=this.from.place.to_sfen+this.to.place.to_sfen+(this.to.promoted?"+":"");else{if("put"!==this.type)throw new Error("must not happen");e=this.to.piece.key+"*"+this.to.place.to_sfen}return e}},{key:"to_kif",get:function(){return this.to_custom_kif()}},{key:"to_kif_without_from",get:function(){return this.to_custom_kif({from:!1})}},{key:"to_yomiage",get:function(){var e=null;if("move"===this.type)e=this.from.yomiage_name;else if("promotable"===this.type)e=this.from.piece.piece_yomiage.prefix_name+"、"+(this.to.promoted?"なりっ！":"ならずっ！");else{if("put"!==this.type)throw new Error("must not happen");e=this.to.piece.piece_yomiage.prefix_name+"、うつ！"}return[this.to.place.yomiage_x,this.to.place.yomiage_y,e].join(" ")}},{key:"effect_key",get:function(){if(this.killed_soldier)return"kill_attack";if("move"===this.type)return"move_or_appear";if("promotable"===this.type)return this.to.promoted,"move_or_appear";if("put"===this.type)return"move_or_appear";throw new Error("must not happen")}},{key:"to_custom_kif",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=f({location:!0,from:!0},e);var t=null,n="";if("move"===this.type)t=this.from.name,e.from&&(n=this.__from_xy);else if("promotable"===this.type)t=this.from.name+(this.to.promoted?"成":"不成"),e.from&&(n=this.__from_xy);else{if("put"!==this.type)throw new Error("must not happen");t=this.to.name+"打"}return[e.location?this.to.location.name:"",this.__to_xy,t,n].join("")}},{key:"__from_xy",get:function(){return["(",this.from.place.digit_human,")"].join("")}},{key:"__to_xy",get:function(){return[this.to.place.human_x,this.to.place.kanji_human_y].join("")}}]),e}();e.argv[1]}.call(this,n(131),"/index.js")},52:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"RunModeInfo",(function(){return m}));n(479);var o=n(129),c=n(130),l=n(480),h=n(481),f=n(478),_=(n(27),n(482));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var m=function(e){Object(l.a)(n,e);var t=d(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"view_mode",name:"再生"},{key:"play_mode",name:"操作"},{key:"edit_mode",name:"編集"}]}}]),n}(n.n(_).a);e.argv[1]===r&&(console.log(m.fetch("simple").key),console.log(m.fetch("simple").name))}.call(this,n(131),"/index.js")},520:function(e,t,n){"use strict";n.r(t),n.d(t,"MoveCancelInfo",(function(){return d}));n(479);var r=n(129),o=n(130),c=n(480),l=n(481),h=n(478),f=n(482);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=_(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"define",get:function(){return[{key:"is_move_cancel_standard",name:"無効な場所をタップで駒を離す",smooth_cancel:!0},{key:"is_move_cancel_reality",name:"移動元をタップしたときに駒を離す",smooth_cancel:!1},{key:"is_move_cancel_rehold",name:"移動元をタップしたときに駒を離して持つ",smooth_cancel:!0}]}}]),n}(n.n(f).a)},521:function(e,t,n){"use strict";n.r(t),n.d(t,"PositionInfo",(function(){return d}));n(479);var r=n(129),o=n(130),c=n(480),l=n(481),h=n(478),f=n(482);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=_(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"define",get:function(){return[{key:"is_position_north",name:"北",sign:-1},{key:"is_position_south",name:"南",sign:1}]}}]),n}(n.n(f).a)},522:function(e,t,n){"use strict";n.r(t),n.d(t,"SoundPresetInfo",(function(){return d}));n(479);var r=n(129),o=n(130),c=n(480),l=n(481),h=n(478),f=n(482);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(c.a)(l,e);var t=_(l);function l(){return Object(r.a)(this,l),t.apply(this,arguments)}return Object(o.a)(l,null,[{key:"define",get:function(){return[{key:"piece_put",source:n(516),volume:.5},{key:"flip_sound",source:n(517),volume:1}]}}]),l}(n.n(f).a)},523:function(e,t,n){"use strict";n.r(t),n.d(t,"AnyFuncInfo",(function(){return y}));n(479);var r=n(129),o=n(130),c=n(480),l=n(481),h=n(478),f=n(482),_=n.n(f),d=n(69);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var y=function(e){Object(c.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"define",get:function(){return[{key:"☖の持駒を駒箱へ",func:function(e){e.mediator.hold_pieces_to_piece_box(d.Location.fetch("white"))}},{key:"駒箱から☖の持駒へ",func:function(e){e.mediator.piece_box_to_hold_pieces(d.Location.fetch("white"))}},{key:"駒箱を正規化",func:function(e){e.mediator.piece_box_piece_counts_adjust()}},{key:"駒箱に駒を一式生成",func:function(e){e.mediator.piece_box_reset_by_preset("全部駒箱")}},{key:"駒箱の駒をクリア",func:function(e){e.mediator.piece_box_clear()}},{key:"指将棋用玉配置",func:function(e){e.mediator.king_formation_auto_set()}},{key:"指将棋用玉回収",func:function(e){e.mediator.king_formation_auto_unset()}},{key:"視点切り替え",func:function(e){e.base.api_flip_toggle()}},{key:"盤面シャッフル",func:function(e){e.shuffle_dialog_open()}},{key:"上ローテイト",func:function(e){e.mediator.slide_xy(0,-1)}},{key:"下ローテイト",func:function(e){e.mediator.slide_xy(0,1)}},{key:"左ローテイト",func:function(e){e.mediator.slide_xy(-1,0)}},{key:"右ローテイト",func:function(e){e.mediator.slide_xy(1,0)}}]}}]),n}(_.a)},524:function(e,t,n){"use strict";n.r(t),n.d(t,"DeviseInfo",(function(){return d}));n(479);var r=n(129),o=n(130),c=n(480),l=n(481),h=n(478),f=n(482);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=_(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"define",get:function(){return[{key:"is_device_desktop",name:"マウス操作",gap:0,description:"タップも可能な端末であっても先にマウス操作したらマウス"},{key:"is_device_touch",name:"タップ南",gap:0,description:"基本的にスマホはこちら"}]}}]),n}(n.n(f).a)},525:function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},53:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"BgVariantInfo",(function(){return m}));n(479);var o=n(129),c=n(130),l=n(480),h=n(481),f=n(478),_=(n(27),n(482));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var m=function(e){Object(l.a)(n,e);var t=d(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"is_bg_variant_none",name:"none"},{key:"is_bg_variant_a",name:"木1"},{key:"is_bg_variant_b",name:"木2"},{key:"is_bg_variant_c",name:"木3"},{key:"is_bg_variant_d",name:"木4"},{key:"is_bg_variant_e",name:"木5"},{key:"is_bg_variant_f",name:"木6"},{key:"is_bg_variant_g",name:"木7"}]}}]),n}(n.n(_).a);e.argv[1]===r&&(console.log(m.fetch("is_bg_variant_a").key),console.log(m.fetch("is_bg_variant_a").name))}.call(this,n(131),"/index.js")},54:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"PiVariantInfo",(function(){return m}));n(479);var o=n(129),c=n(130),l=n(480),h=n(481),f=n(478),_=(n(27),n(482));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var m=function(e){Object(l.a)(n,e);var t=d(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"is_pi_variant_none",name:"none"},{key:"is_pi_variant_a1by",name:"ゴシック(1文字)"},{key:"is_pi_variant_a2by",name:"ゴシック(2文字)"},{key:"is_pi_variant_b",name:"紙面風"},{key:"is_pi_variant_c",name:"図案駒(画像)"},{key:"is_pi_variant_d",name:"orangain/shogi-piece-images"},{key:"is_pi_variant_e",name:"プチッチ(画像・暗め)"}]}}]),n}(n.n(_).a);e.argv[1]===r&&(console.log(m.fetch("is_pi_variant_a1by").key),console.log(m.fetch("is_pi_variant_a1by").name))}.call(this,n(131),"/index.js")},566:function(e,t,n){!function(e){"use strict";function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function h(t){e.defaults=t}e.defaults=l();var f=/[&<>"']/,_=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,m=/[<>"']|&(?!#?\w+;)/g,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v=function(e){return y[e]};function k(html,e){if(e){if(f.test(html))return html.replace(_,v)}else if(d.test(html))return html.replace(m,v);return html}var D=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function x(html){return html.replace(D,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var A=/(^|[^\[])\^/g;function w(e,t){e="string"==typeof e?e:e.source,t=t||"";var n={replace:function(t,r){return r=(r=r.source||r).replace(A,"$1"),e=e.replace(t,r),n},getRegex:function(){return new RegExp(e,t)}};return n}var F=/[^\w:]/g,E=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function C(e,base,t){if(e){var n;try{n=decodeURIComponent(x(t)).replace(F,"").toLowerCase()}catch(e){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}base&&!E.test(t)&&(t=R(base,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(e){return null}return t}var B={},P=/^[^:]+:\/*[^/]*$/,j=/^([^:]+:)[\s\S]*$/,O=/^([^:]+:\/*[^/]*)[\s\S]*$/;function R(base,e){B[" "+base]||(P.test(base)?B[" "+base]=base+"/":B[" "+base]=N(base,"/",!0));var t=-1===(base=B[" "+base]).indexOf(":");return"//"===e.substring(0,2)?t?e:base.replace(j,"$1")+e:"/"===e.charAt(0)?t?e:base.replace(O,"$1")+e:base+e}var S={exec:function(){}};function T(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function z(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var r=!1,o=t;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"})).split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function N(e,t,n){var r=e.length;if(0===r)return"";for(var o=0;o<r;){var c=e.charAt(r-o-1);if(c!==t||n){if(c===t||!n)break;o++}else o++}return e.slice(0,r-o)}function L(e,b){if(-1===e.indexOf(b[1]))return-1;for(var t=e.length,n=0,i=0;i<t;i++)if("\\"===e[i])i++;else if(e[i]===b[0])n++;else if(e[i]===b[1]&&--n<0)return i;return-1}function $(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function M(pattern,e){if(e<1)return"";for(var t="";e>1;)1&e&&(t+=pattern),e>>=1,pattern+=pattern;return t+pattern}function I(e,link,t,n){var r=link.href,title=link.title?k(link.title):null,text=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;var o={type:"link",raw:t,href:r,title:title,text:text,tokens:n.inlineTokens(text,[])};return n.state.inLink=!1,o}return{type:"image",raw:t,href:r,title:title,text:k(text)}}function K(e,text){var t=e.match(/^(\s+)(?:```)/);if(null===t)return text;var n=t[1];return text.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=n.length?e.slice(n.length):e})).join("\n")}var U=function(){function t(t){this.options=t||e.defaults}var n=t.prototype;return n.space=function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}},n.code=function(e){var t=this.rules.block.code.exec(e);if(t){var text=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?text:N(text,"\n")}}},n.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],text=K(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:text}}},n.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var text=t[2].trim();if(/#$/.test(text)){var n=N(text,"#");this.options.pedantic?text=n.trim():n&&!/ $/.test(n)||(text=n.trim())}var r={type:"heading",raw:t[0],depth:t[1].length,text:text,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}},n.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},n.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var text=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(text,[]),text:text}}},n.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,r,o,l,i,h,f,line,_,d,m,y,v=t[1].trim(),k=v.length>1,D={type:"list",raw:"",ordered:k,start:k?+v.slice(0,-1):"",loose:!1,items:[]};v=k?"\\d{1,9}\\"+v.slice(-1):"\\"+v,this.options.pedantic&&(v=k?v:"[*+-]");for(var x=new RegExp("^( {0,3}"+v+")((?:[\t ][^\\n]*)?(?:\\n|$))");e&&(y=!1,t=x.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),line=t[2].split("\n",1)[0],_=e.split("\n",1)[0],this.options.pedantic?(l=2,m=line.trimLeft()):(l=(l=t[2].search(/[^ ]/))>4?1:l,m=line.slice(l),l+=t[1].length),h=!1,!line&&/^ *$/.test(_)&&(n+=_+"\n",e=e.substring(_.length+1),y=!0),!y)for(var A=new RegExp("^ {0,"+Math.min(3,l-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),w=new RegExp("^ {0,"+Math.min(3,l-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)");e&&(line=d=e.split("\n",1)[0],this.options.pedantic&&(line=line.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!A.test(line))&&!w.test(e);){if(line.search(/[^ ]/)>=l||!line.trim())m+="\n"+line.slice(l);else{if(h)break;m+="\n"+line}h||line.trim()||(h=!0),n+=d+"\n",e=e.substring(d.length+1)}D.loose||(f?D.loose=!0:/\n *\n *$/.test(n)&&(f=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(m))&&(o="[ ] "!==r[0],m=m.replace(/^\[[ xX]\] +/,"")),D.items.push({type:"list_item",raw:n,task:!!r,checked:o,loose:!1,text:m}),D.raw+=n}D.items[D.items.length-1].raw=n.trimRight(),D.items[D.items.length-1].text=m.trimRight(),D.raw=D.raw.trimRight();var F=D.items.length;for(i=0;i<F;i++){this.lexer.state.top=!1,D.items[i].tokens=this.lexer.blockTokens(D.items[i].text,[]);var E=D.items[i].tokens.filter((function(e){return"space"===e.type})),C=E.every((function(e){for(var t,n=0,r=c(e.raw.split(""));!(t=r()).done;)if("\n"===t.value&&(n+=1),n>1)return!0;return!1}));!D.loose&&E.length&&C&&(D.loose=!0,D.items[i].loose=!0)}return D}},n.html=function(e){var t=this.rules.block.html.exec(e);if(t){var n={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(t[0]):k(t[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}},n.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},n.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:z(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var i,r,o,c,l=n.align.length;for(i=0;i<l;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(l=n.rows.length,i=0;i<l;i++)n.rows[i]=z(n.rows[i],n.header.length).map((function(e){return{text:e}}));for(l=n.header.length,r=0;r<l;r++)n.header[r].tokens=[],this.lexer.inlineTokens(n.header[r].text,n.header[r].tokens);for(l=n.rows.length,r=0;r<l;r++)for(c=n.rows[r],o=0;o<c.length;o++)c[o].tokens=[],this.lexer.inlineTokens(c[o].text,c[o].tokens);return n}}},n.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t){var n={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},n.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var n={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},n.text=function(e){var t=this.rules.block.text.exec(e);if(t){var n={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},n.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:k(t[1])}},n.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):k(t[0]):t[0]}},n.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var r=N(n.slice(0,-1),"\\");if((n.length-r.length)%2==0)return}else{var o=L(t[2],"()");if(o>-1){var c=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}var l=t[2],title="";if(this.options.pedantic){var link=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(l);link&&(l=link[1],title=link[3])}else title=t[3]?t[3].slice(1,-1):"";return l=l.trim(),/^</.test(l)&&(l=this.options.pedantic&&!/>$/.test(n)?l.slice(1):l.slice(1,-1)),I(t,{href:l?l.replace(this.rules.inline._escapes,"$1"):l,title:title?title.replace(this.rules.inline._escapes,"$1"):title},t[0],this.lexer)}},n.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var link=(n[2]||n[1]).replace(/\s+/g," ");if(!(link=t[link.toLowerCase()])||!link.href){var text=n[0].charAt(0);return{type:"text",raw:text,text:text}}return I(n,link,n[0],this.lexer)}},n.emStrong=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.emStrong.lDelim.exec(e);if(r&&(!r[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var o=r[1]||r[2]||"";if(!o||o&&(""===n||this.rules.inline.punctuation.exec(n))){var c,l,h=r[0].length-1,f=h,_=0,d="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+h);null!=(r=d.exec(t));)if(c=r[1]||r[2]||r[3]||r[4]||r[5]||r[6])if(l=c.length,r[3]||r[4])f+=l;else if(!((r[5]||r[6])&&h%3)||(h+l)%3){if(!((f-=l)>0)){if(l=Math.min(l,l+f+_),Math.min(h,l)%2){var m=e.slice(1,h+r.index+l);return{type:"em",raw:e.slice(0,h+r.index+l+1),text:m,tokens:this.lexer.inlineTokens(m,[])}}var text=e.slice(2,h+r.index+l-1);return{type:"strong",raw:e.slice(0,h+r.index+l+1),text:text,tokens:this.lexer.inlineTokens(text,[])}}}else _+=l}}},n.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var text=t[2].replace(/\n/g," "),n=/[^ ]/.test(text),r=/^ /.test(text)&&/ $/.test(text);return n&&r&&(text=text.substring(1,text.length-1)),text=k(text,!0),{type:"codespan",raw:t[0],text:text}}},n.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},n.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}},n.autolink=function(e,t){var text,n,r=this.rules.inline.autolink.exec(e);if(r)return n="@"===r[2]?"mailto:"+(text=k(this.options.mangle?t(r[1]):r[1])):text=k(r[1]),{type:"link",raw:r[0],text:text,href:n,tokens:[{type:"text",raw:text,text:text}]}},n.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var text,r;if("@"===n[2])r="mailto:"+(text=k(this.options.mangle?t(n[0]):n[0]));else{var o;do{o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(o!==n[0]);text=k(n[0]),r="www."===n[1]?"http://"+text:text}return{type:"link",raw:n[0],text:text,href:r,tokens:[{type:"text",raw:text,text:text}]}}},n.inlineText=function(e,t){var text,n=this.rules.inline.text.exec(e);if(n)return text=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):k(n[0]):n[0]:k(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:text}},t}(),G={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:S,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};G.def=w(G.def).replace("label",G._label).replace("title",G._title).getRegex(),G.bullet=/(?:[*+-]|\d{1,9}[.)])/,G.listItemStart=w(/^( *)(bull) */).replace("bull",G.bullet).getRegex(),G.list=w(G.list).replace(/bull/g,G.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+G.def.source+")").getRegex(),G._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",G._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,G.html=w(G.html,"i").replace("comment",G._comment).replace("tag",G._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),G.paragraph=w(G._paragraph).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G._tag).getRegex(),G.blockquote=w(G.blockquote).replace("paragraph",G.paragraph).getRegex(),G.normal=T({},G),G.gfm=T({},G.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),G.gfm.table=w(G.gfm.table).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G._tag).getRegex(),G.gfm.paragraph=w(G._paragraph).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",G.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G._tag).getRegex(),G.pedantic=T({},G.normal,{html:w("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",G._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:S,paragraph:w(G.normal._paragraph).replace("hr",G.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",G.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var H={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:S,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:S,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function Z(text){return text.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function W(text){var i,e,t="",n=text.length;for(i=0;i<n;i++)e=text.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),t+="&#"+e+";";return t}H._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",H.punctuation=w(H.punctuation).replace(/punctuation/g,H._punctuation).getRegex(),H.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,H.escapedEmSt=/\\\*|\\_/g,H._comment=w(G._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),H.emStrong.lDelim=w(H.emStrong.lDelim).replace(/punct/g,H._punctuation).getRegex(),H.emStrong.rDelimAst=w(H.emStrong.rDelimAst,"g").replace(/punct/g,H._punctuation).getRegex(),H.emStrong.rDelimUnd=w(H.emStrong.rDelimUnd,"g").replace(/punct/g,H._punctuation).getRegex(),H._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,H._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,H._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,H.autolink=w(H.autolink).replace("scheme",H._scheme).replace("email",H._email).getRegex(),H._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,H.tag=w(H.tag).replace("comment",H._comment).replace("attribute",H._attribute).getRegex(),H._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,H._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,H._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,H.link=w(H.link).replace("label",H._label).replace("href",H._href).replace("title",H._title).getRegex(),H.reflink=w(H.reflink).replace("label",H._label).replace("ref",G._label).getRegex(),H.nolink=w(H.nolink).replace("ref",G._label).getRegex(),H.reflinkSearch=w(H.reflinkSearch,"g").replace("reflink",H.reflink).replace("nolink",H.nolink).getRegex(),H.normal=T({},H),H.pedantic=T({},H.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:w(/^!?\[(label)\]\((.*?)\)/).replace("label",H._label).getRegex(),reflink:w(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",H._label).getRegex()}),H.gfm=T({},H.normal,{escape:w(H.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),H.gfm.url=w(H.gfm.url,"i").replace("email",H.gfm._extended_email).getRegex(),H.breaks=T({},H.gfm,{br:w(H.br).replace("{2,}","*").getRegex(),text:w(H.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var V=function(){function t(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||e.defaults,this.options.tokenizer=this.options.tokenizer||new U,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var n={block:G.normal,inline:H.normal};this.options.pedantic?(n.block=G.pedantic,n.inline=H.pedantic):this.options.gfm&&(n.block=G.gfm,this.options.breaks?n.inline=H.breaks:n.inline=H.gfm),this.tokenizer.rules=n}t.lex=function(e,n){return new t(n).lex(e)},t.lexInline=function(e,n){return new t(n).inlineTokens(e)};var r=t.prototype;return r.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},r.blockTokens=function(e,t){var n,r,o,c,l=this;for(void 0===t&&(t=[]),e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(function(e,t,n){return t+"    ".repeat(n.length)}));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(r){return!!(n=r.call({lexer:l},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),!(r=t[t.length-1])||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),!(r=t[t.length-1])||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else if(o=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,n=e.slice(1),r=void 0;l.options.extensions.startBlock.forEach((function(e){"number"==typeof(r=e.call({lexer:this},n))&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}(),this.state.top&&(n=this.tokenizer.paragraph(o)))r=t[t.length-1],c&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),c=o.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),(r=t[t.length-1])&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){var h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}return this.state.top=!0,t},r.inline=function(e,t){this.inlineQueue.push({src:e,tokens:t})},r.inlineTokens=function(e,t){var n,r,o,c=this;void 0===t&&(t=[]);var l,h,f,_=e;if(this.tokens.links){var d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(l=this.tokenizer.rules.inline.reflinkSearch.exec(_));)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(_=_.slice(0,l.index)+"["+M("a",l[0].length-2)+"]"+_.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(l=this.tokenizer.rules.inline.blockSkip.exec(_));)_=_.slice(0,l.index)+"["+M("a",l[0].length-2)+"]"+_.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(l=this.tokenizer.rules.inline.escapedEmSt.exec(_));)_=_.slice(0,l.index)+"++"+_.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(h||(f=""),h=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(r){return!!(n=r.call({lexer:c},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),(r=t[t.length-1])&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),(r=t[t.length-1])&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,_,f))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,W))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,W))){if(o=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,n=e.slice(1),r=void 0;c.options.extensions.startInline.forEach((function(e){"number"==typeof(r=e.call({lexer:this},n))&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}(),n=this.tokenizer.inlineText(o,Z))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(f=n.raw.slice(-1)),h=!0,(r=t[t.length-1])&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){var m="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(m);break}throw new Error(m)}}else e=e.substring(n.raw.length),t.push(n);return t},n(t,null,[{key:"rules",get:function(){return{block:G,inline:H}}}]),t}(),Y=function(){function t(t){this.options=t||e.defaults}var n=t.prototype;return n.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,r);null!=o&&o!==e&&(n=!0,e=o)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+k(r,!0)+'">'+(n?e:k(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:k(e,!0))+"</code></pre>\n"},n.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.html=function(e){return e},n.heading=function(text,e,t,n){return this.options.headerIds?"<h"+e+' id="'+(this.options.headerPrefix+n.slug(t))+'">'+text+"</h"+e+">\n":"<h"+e+">"+text+"</h"+e+">\n"},n.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.list=function(body,e,t){var n=e?"ol":"ul";return"<"+n+(e&&1!==t?' start="'+t+'"':"")+">\n"+body+"</"+n+">\n"},n.listitem=function(text){return"<li>"+text+"</li>\n"},n.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},n.paragraph=function(text){return"<p>"+text+"</p>\n"},n.table=function(header,body){return body&&(body="<tbody>"+body+"</tbody>"),"<table>\n<thead>\n"+header+"</thead>\n"+body+"</table>\n"},n.tablerow=function(content){return"<tr>\n"+content+"</tr>\n"},n.tablecell=function(content,e){var t=e.header?"th":"td";return(e.align?"<"+t+' align="'+e.align+'">':"<"+t+">")+content+"</"+t+">\n"},n.strong=function(text){return"<strong>"+text+"</strong>"},n.em=function(text){return"<em>"+text+"</em>"},n.codespan=function(text){return"<code>"+text+"</code>"},n.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.del=function(text){return"<del>"+text+"</del>"},n.link=function(e,title,text){if(null===(e=C(this.options.sanitize,this.options.baseUrl,e)))return text;var t='<a href="'+k(e)+'"';return title&&(t+=' title="'+title+'"'),t+=">"+text+"</a>"},n.image=function(e,title,text){if(null===(e=C(this.options.sanitize,this.options.baseUrl,e)))return text;var t='<img src="'+e+'" alt="'+text+'"';return title&&(t+=' title="'+title+'"'),t+=this.options.xhtml?"/>":">"},n.text=function(e){return e},t}(),J=function(){function e(){}var t=e.prototype;return t.strong=function(text){return text},t.em=function(text){return text},t.codespan=function(text){return text},t.del=function(text){return text},t.html=function(text){return text},t.text=function(e){return e},t.link=function(e,title,text){return""+text},t.image=function(e,title,text){return""+text},t.br=function(){return""},e}(),Q=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{n=e+"-"+ ++r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),X=function(){function t(t){this.options=t||e.defaults,this.options.renderer=this.options.renderer||new Y,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new J,this.slugger=new Q}t.parse=function(e,n){return new t(n).parse(e)},t.parseInline=function(e,n){return new t(n).parseInline(e)};var n=t.prototype;return n.parse=function(e,t){void 0===t&&(t=!0);var i,n,r,o,c,l,h,header,body,f,_,d,m,y,v,k,D,A,w,F="",E=e.length;for(i=0;i<E;i++)if(f=e[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type])||!1===(w=this.options.extensions.renderers[f.type].call({parser:this},f))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type))switch(f.type){case"space":continue;case"hr":F+=this.renderer.hr();continue;case"heading":F+=this.renderer.heading(this.parseInline(f.tokens),f.depth,x(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue;case"code":F+=this.renderer.code(f.text,f.lang,f.escaped);continue;case"table":for(header="",h="",o=f.header.length,n=0;n<o;n++)h+=this.renderer.tablecell(this.parseInline(f.header[n].tokens),{header:!0,align:f.align[n]});for(header+=this.renderer.tablerow(h),body="",o=f.rows.length,n=0;n<o;n++){for(h="",c=(l=f.rows[n]).length,r=0;r<c;r++)h+=this.renderer.tablecell(this.parseInline(l[r].tokens),{header:!1,align:f.align[r]});body+=this.renderer.tablerow(h)}F+=this.renderer.table(header,body);continue;case"blockquote":body=this.parse(f.tokens),F+=this.renderer.blockquote(body);continue;case"list":for(_=f.ordered,d=f.start,m=f.loose,o=f.items.length,body="",n=0;n<o;n++)k=(v=f.items[n]).checked,D=v.task,y="",v.task&&(A=this.renderer.checkbox(k),m?v.tokens.length>0&&"paragraph"===v.tokens[0].type?(v.tokens[0].text=A+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=A+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:A}):y+=A),y+=this.parse(v.tokens,m),body+=this.renderer.listitem(y,D,k);F+=this.renderer.list(body,_,d);continue;case"html":F+=this.renderer.html(f.text);continue;case"paragraph":F+=this.renderer.paragraph(this.parseInline(f.tokens));continue;case"text":for(body=f.tokens?this.parseInline(f.tokens):f.text;i+1<E&&"text"===e[i+1].type;)body+="\n"+((f=e[++i]).tokens?this.parseInline(f.tokens):f.text);F+=t?this.renderer.paragraph(body):body;continue;default:var C='Token with "'+f.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}else F+=w||"";return F},n.parseInline=function(e,t){t=t||this.renderer;var i,n,r,o="",c=e.length;for(i=0;i<c;i++)if(n=e[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type])||!1===(r=this.options.extensions.renderers[n.type].call({parser:this},n))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type))switch(n.type){case"escape":case"text":o+=t.text(n.text);break;case"html":o+=t.html(n.text);break;case"link":o+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":o+=t.image(n.href,n.title,n.text);break;case"strong":o+=t.strong(this.parseInline(n.tokens,t));break;case"em":o+=t.em(this.parseInline(n.tokens,t));break;case"codespan":o+=t.codespan(n.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(n.tokens,t));break;default:var l='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(l);throw new Error(l)}else o+=r||"";return o},t}();function ee(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),$(t=T({},ee.defaults,t||{})),n){var r,o=t.highlight;try{r=V.lex(e,t)}catch(e){return n(e)}var c=function(e){var c;if(!e)try{t.walkTokens&&ee.walkTokens(r,t.walkTokens),c=X.parse(r,t)}catch(t){e=t}return t.highlight=o,e?n(e):n(null,c)};if(!o||o.length<3)return c();if(delete t.highlight,!r.length)return c();var l=0;return ee.walkTokens(r,(function(e){"code"===e.type&&(l++,setTimeout((function(){o(e.text,e.lang,(function(t,code){if(t)return c(t);null!=code&&code!==e.text&&(e.text=code,e.escaped=!0),0==--l&&c()}))}),0))})),void(0===l&&c())}try{var h=V.lex(e,t);return t.walkTokens&&ee.walkTokens(h,t.walkTokens),X.parse(h,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+k(e.message+"",!0)+"</pre>";throw e}}ee.options=ee.setOptions=function(e){return T(ee.defaults,e),h(ee.defaults),ee},ee.getDefaults=l,ee.defaults=e.defaults,ee.use=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=T.apply(void 0,[{}].concat(t)),c=ee.defaults.extensions||{renderers:{},childTokens:{}};t.forEach((function(e){if(e.extensions&&(r=!0,e.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=c.renderers?c.renderers[e.name]:null;c.renderers[e.name]=t?function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var c=e.renderer.apply(this,r);return!1===c&&(c=t.apply(this,r)),c}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");c[e.level]?c[e.level].unshift(e.tokenizer):c[e.level]=[e.tokenizer],e.start&&("block"===e.level?c.startBlock?c.startBlock.push(e.start):c.startBlock=[e.start]:"inline"===e.level&&(c.startInline?c.startInline.push(e.start):c.startInline=[e.start]))}e.childTokens&&(c.childTokens[e.name]=e.childTokens)}))),e.renderer&&function(){var t=ee.defaults.renderer||new Y,n=function(n){var r=t[n];t[n]=function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];var h=e.renderer[n].apply(t,c);return!1===h&&(h=r.apply(t,c)),h}};for(var r in e.renderer)n(r);o.renderer=t}(),e.tokenizer&&function(){var t=ee.defaults.tokenizer||new U,n=function(n){var r=t[n];t[n]=function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];var h=e.tokenizer[n].apply(t,c);return!1===h&&(h=r.apply(t,c)),h}};for(var r in e.tokenizer)n(r);o.tokenizer=t}(),e.walkTokens){var t=ee.defaults.walkTokens;o.walkTokens=function(n){e.walkTokens.call(this,n),t&&t.call(this,n)}}r&&(o.extensions=c),ee.setOptions(o)}))},ee.walkTokens=function(e,t){for(var n,r=function(){var e=n.value;switch(t.call(ee,e),e.type){case"table":for(var r,o=c(e.header);!(r=o()).done;){var l=r.value;ee.walkTokens(l.tokens,t)}for(var h,f=c(e.rows);!(h=f()).done;)for(var _,d=c(h.value);!(_=d()).done;){var m=_.value;ee.walkTokens(m.tokens,t)}break;case"list":ee.walkTokens(e.items,t);break;default:ee.defaults.extensions&&ee.defaults.extensions.childTokens&&ee.defaults.extensions.childTokens[e.type]?ee.defaults.extensions.childTokens[e.type].forEach((function(n){ee.walkTokens(e[n],t)})):e.tokens&&ee.walkTokens(e.tokens,t)}},o=c(e);!(n=o()).done;)r()},ee.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");$(t=T({},ee.defaults,t||{}));try{var n=V.lexInline(e,t);return t.walkTokens&&ee.walkTokens(n,t.walkTokens),X.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+k(e.message+"",!0)+"</pre>";throw e}},ee.Parser=X,ee.parser=X.parse,ee.Renderer=Y,ee.TextRenderer=J,ee.Lexer=V,ee.lexer=V.lex,ee.Tokenizer=U,ee.Slugger=Q,ee.parse=ee;var te=ee.options,ne=ee.setOptions,use=ee.use,ie=ee.walkTokens,re=ee.parseInline,oe=ee,ue=X.parse,se=V.lex;e.Lexer=V,e.Parser=X,e.Renderer=Y,e.Slugger=Q,e.TextRenderer=J,e.Tokenizer=U,e.getDefaults=l,e.lexer=se,e.marked=ee,e.options=te,e.parse=oe,e.parseInline=re,e.parser=ue,e.setOptions=ne,e.use=use,e.walkTokens=ie,Object.defineProperty(e,"__esModule",{value:!0})}(t)},69:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"Location",(function(){return m}));n(479);var o=n(129),c=n(130),l=n(480),h=n(481),f=n(478),_=(n(15),n(36),n(45),n(482));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var m=function(e){Object(l.a)(n,e);var t=d(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"flip",get:function(){return n.cycle_lookup(this.code+1)}},{key:"any_long_name",value:function(e){return e?this.handicap_long_name:this.long_name}},{key:"advance",value:function(e){return n.cycle_lookup(this.code+e)}},{key:"flip_if",value:function(e){return this.advance(e?1:0)}}],[{key:"define",get:function(){return[{key:"black",name:"☗",char_key:"b",value_sign:1,position_key:"is_position_south",long_name:"先手",handicap_long_name:"下手"},{key:"white",name:"☖",char_key:"w",value_sign:-1,position_key:"is_position_north",long_name:"後手",handicap_long_name:"上手"}]}},{key:"cycle_lookup",value:function(e){return"number"!=typeof e&&alert("ArgumentError: ".concat(e)),n.lookup(Math.abs(e)%n.values.length)}}]),n}(n.n(_).a);e.argv[1]===r&&(console.log(m.cycle_lookup(-1)),console.log(m.fetch("black")),m.values.map((function(e){console.log(e)})),console.log(m.fetch("black").flip),console.log(m.fetch("white").flip))}.call(this,n(131),"/index.js")},90:function(e,t,n){"use strict";n.r(t),n.d(t,"Mediator",(function(){return A}));var r=n(17),o=n(129),c=n(130),l=(n(27),n(89),n(260),n(45),n(28),n(15),n(36),n(14)),h=n.n(l),f=n(3),_=n(133),d=n(132),m=n(483),y=n(484),v=n(259),k=n(510),D=n(490),x=n(69),A=function(){function e(){Object(o.a)(this,e);var t=new v.SfenParser;t.raw_body="position startpos",t.parse(),this.data_source=t,this.current_turn=0,this.board=null,this.hold_pieces=null,this.last_hand=null,this.piece_box={},this.env="production"}return Object(c.a)(e,[{key:"run",value:function(){var e=this;this.board=this.data_source.board,this.hold_pieces=this.data_source.hold_pieces,this.last_hand=null;var t=this.data_source.move_infos,n=this.turn_offset-this.turn_offset_min;h()(n).times((function(i){e.execute_one(t[i])}))}},{key:"execute_one",value:function(e){if(this.last_hand=e,e.drop_piece){var t=new y.Soldier({piece:e.drop_piece,place:e.place,promoted:e.promoted,location:e.location});this.hold_pieces_add(e.location,t.piece,-1),this.board.place_on(t)}else{var n=this.board.lookup(e.place);n&&this.hold_pieces_add(e.location,n.piece,1);var r=this.board.lookup(e.origin_place);e.promoted_trigger&&(r.promoted=!0),r.place=e.place,this.board.delete_at(e.origin_place),this.board.place_on(r)}}},{key:"hold_pieces_count",value:function(e,t){return this.hold_pieces[e.key][t.key]||0}},{key:"hold_pieces_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.hold_pieces_count(e,t)+n,o=this.hold_pieces[e.key];f.a.delete(o,t.key),r>=1&&f.a.set(o,t.key,r)}},{key:"hold_pieces_can_be_reduced_count",value:function(e,t,n){var r=this.hold_pieces_count(e,t);return n>r&&(n=r),n}},{key:"board_safe_delete_on",value:function(e){this.board.delete_at(e)}},{key:"board_piece_fore_class",value:function(e){var t=d.Place.fetch(e),n=this.board.lookup(t);return n?n.css_class_list:[]}},{key:"cell_piece_class",value:function(e){var t=d.Place.fetch(e),n=this.board.lookup(t),r=[];return n&&r.push("location_".concat(n.location.key)),r}},{key:"cell_view",value:function(e){var t=d.Place.fetch(e),n=this.board.lookup(t),r="";return n&&(r=n.name),r}},{key:"dimension",get:function(){return _.Board.dimension}},{key:"turn_offset",get:function(){var e=Number(this.current_turn);return e<0&&(e+=this.turn_offset_max+1),this.turn_clamp(e)}},{key:"turn_clamp",value:function(e){return h.a.clamp(Number(e),this.turn_offset_min,this.turn_offset_max)}},{key:"previous_location",get:function(){return this.data_source.location_by_offset(this.turn_offset-1)}},{key:"current_location",get:function(){return this.data_source.location_by_offset(this.turn_offset)}},{key:"current_comments",get:function(){if(this.data_source.comments_pack)return this.data_source.comments_pack[this.turn_offset]}},{key:"turn_offset_min",get:function(){return this.data_source.turn_offset_min}},{key:"turn_offset_max",get:function(){return this.data_source.turn_offset_max}},{key:"current_turn_label",get:function(){return this.turn_offset===this.turn_offset_max?"まで".concat(this.display_turn,"手で").concat(this.previous_location.name,"の勝ち"):"".concat(this.display_turn,"手")}},{key:"display_turn",get:function(){return this.turn_base+this.turn_offset}},{key:"turn_base",get:function(){return this.data_source.turn_base}},{key:"realized_hold_pieces_of",value:function(e){var t=Object.entries(this.hold_pieces[e]);return h()(t).filter((function(e){var t=Object(r.a)(e,2);t[0];return t[1]>=1})).map((function(e){var t=Object(r.a)(e,2),n=t[0],o=t[1];return[m.Piece.fetch(n),o]})).sortBy((function(e){var t=Object(r.a)(e,2),n=t[0];t[1];return n.code})).value()}},{key:"to_simple_sfen",get:function(){return this.sfen_serializer.to_s}},{key:"to_sfen_without_turn",get:function(){return this.sfen_serializer.to_s_without_turn}},{key:"to_position_sfen",get:function(){return"position sfen ".concat(this.to_simple_sfen)}},{key:"sfen_serializer",get:function(){return new k.SfenSerializer(this)}},{key:"piece_box_count",value:function(e){return this.piece_box[e.key]||0}},{key:"piece_box_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.piece_box_count(e)+t;f.a.delete(this.piece_box,e.key),n>=1&&f.a.set(this.piece_box,e.key,n)}},{key:"piece_box_can_be_reduced_count",value:function(e,t){var n=this.piece_box_count(e);return t>n&&(t=n),t}},{key:"piece_box_realize",value:function(){var e=Object.entries(this.piece_box);return h()(e).filter((function(e){var t=Object(r.a)(e,2);t[0];return t[1]>=1})).map((function(e){var t=Object(r.a)(e,2),n=t[0],o=t[1];return[m.Piece.fetch(n),o]})).sortBy((function(e){var t=Object(r.a)(e,2),n=t[0];t[1];return n.code})).value()}},{key:"hold_pieces_to_piece_box",value:function(e){var t=this;h.a.forIn(this.hold_pieces[e.key],(function(n,r){var o=m.Piece.fetch(r);t.hold_pieces_add(e,o,-n),t.piece_box_add(o,n)}))}},{key:"piece_box_to_hold_pieces",value:function(e){var t=this;h.a.forIn(this.piece_box,(function(n,r){var o=m.Piece.fetch(r);t.piece_box_add(o,-n),t.hold_pieces_add(e,o,n)}))}},{key:"piece_box_reset_by_preset",value:function(e){var t=this;this.piece_box_clear(),D.PresetInfo.fetch(e).piece_box.forEach((function(e){var n=Object(r.a)(e,2),o=n[0],c=n[1];t.piece_box_add(m.Piece.fetch(o),c)}))}},{key:"piece_box_piece_counts_adjust",value:function(){var e=this;this.piece_box_clear();var t=this.hold_piece_all_counts_hash,n=this.board.piece_counts_hash;D.PresetInfo.fetch("全部駒箱").piece_box.forEach((function(o){var c=Object(r.a)(o,2),l=c[0],h=c[1],f=m.Piece.fetch(l),_=h-((t[f.key]||0)+(n[f.key]||0));e.piece_box_add(f,_)}))}},{key:"hold_piece_all_counts_hash",get:function(){var e=this,t={};return x.Location.values.forEach((function(n){h.a.forIn(e.hold_pieces[n.key],(function(e,n){t[n]=(t[n]||0)+e}))})),t}},{key:"piece_box_clear",value:function(){this.piece_box={}}},{key:"king_formation_auto_set_on_off",value:function(e){return e?this.king_formation_auto_set():this.king_formation_auto_unset()}},{key:"king_formation_auto_set",value:function(){var e=!1;return e||(e=this.king_formation_set("bottom_left")),e||(e=this.king_formation_set("bottom_right")),e}},{key:"king_formation_auto_unset",value:function(){var e=!1;return e||(e=this.king_formation_unset("bottom_left")),e||(e=this.king_formation_unset("bottom_right")),e}},{key:"king_formation_set",value:function(e){var t=this,n=this.king_formation_soldiers(e);if(!n.some((function(e){return t.board.lookup(e.place)})))return n.forEach((function(e){return t.piece_search_and_place_on(e)})),!0}},{key:"king_formation_unset",value:function(e){var t=this,n=this.king_formation_soldiers(e);if(!n.some((function(e){return!t.board.lookup(e.place)})))return n.forEach((function(e){var n=t.board.lookup(e.place);if(n){var r=n.piece;t.board.delete_at(n.place),"K"===r.key?t.piece_box_add(r):t.hold_pieces_add(x.Location.fetch("white"),r)}})),!0}},{key:"piece_search_and_place_on",value:function(e){if(!this.board.lookup(e.place)){if("K"===e.piece.key)this.piece_search_and_decrement(e.piece);else if(!this.piece_search_and_decrement(e.piece))return;this.board.place_on(e)}}},{key:"piece_search_and_decrement",value:function(e){var t=!1;return t||(t=this.piece_search_on_hold_pieces_and_decrement("white",e)),t||this.piece_box_count(e)>=1&&(this.piece_box_add(e,-1),t=!0),t}},{key:"piece_search_on_hold_pieces_and_decrement",value:function(e,t){var n=x.Location.fetch(e);if(this.hold_pieces_count(n,t)>=1)return this.hold_pieces_add(n,t,-1),!0}},{key:"king_formation_soldiers",value:function(e){var t=null,n=null,r=null,o=null;return"bottom_left"===e&&(t=0,n=1,r=_.Board.dimension-1,o=-1),"bottom_right"===e&&(t=_.Board.dimension-1,n=-1,r=_.Board.dimension-1,o=-1),[{piece:"K",promoted:!1,location:"black",place:[t,r]},{piece:"P",promoted:!0,location:"white",place:[t,r+o+o]},{piece:"P",promoted:!0,location:"white",place:[t+n,r+o+o]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,r+o+o]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,r+o]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,r]}].map((function(e){return new y.Soldier({piece:m.Piece.fetch(e.piece),promoted:e.promoted,location:x.Location.fetch(e.location),place:d.Place.fetch(e.place)})}))}},{key:"slide_xy",value:function(e,t){this.board=this.board.slide_xy(e,t)}},{key:"shuffle_apply",value:function(e){var t=this.board.shuffle_apply(e);if(t)return this.board=t,!0}}]),e}()},91:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"HumanSideInfo",(function(){return v}));n(479);var o=n(129),c=n(130),l=n(480),h=n(481),f=n(478),_=(n(45),n(482)),d=n.n(_),m=n(69);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var v=function(e){Object(l.a)(n,e);var t=y(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"locations",get:function(){return this.location_keys.map((function(e){return m.Location.fetch(e)}))}}],[{key:"define",get:function(){return[{key:"none",name:"none",location_keys:[]},{key:"both",name:"☗☖",location_keys:["black","white"]},{key:"black",name:"☗",location_keys:["black"]},{key:"white",name:"☖",location_keys:["white"]}]}}]),n}(d.a);e.argv[1]===r&&console.log(v.fetch("both").locations)}.call(this,n(131),"/index.js")}}]);