(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{177:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var o=n(71),r=(n(18),n(10),n(657),n(174),n(38),n(83)),c=n(84),_=n(13),l=n.n(_),h=n(3),f=n(234),d=n(233),m=n(559),y=n(558),v=n(298),k=n(804),w=n(620),P=n(85),j=function(){function e(){Object(r.a)(this,e);var t=new v.a;t.raw_body="position startpos",t.parse(),this.data_source=t,this.current_turn=0,this.board=null,this.hold_pieces=null,this.last_hand=null,this.piece_box={},this.env="production"}return Object(c.a)(e,[{key:"run",value:function(){var e=this;this.board=this.data_source.board,this.hold_pieces=this.data_source.hold_pieces,this.last_hand=null;var t=this.data_source.move_infos,n=this.turn_offset-this.turn_offset_min;l()(n).times((function(i){e.execute_one(t[i])}))}},{key:"execute_one",value:function(e){if(this.last_hand=e,e.drop_piece){var t=new y.a({piece:e.drop_piece,place:e.place,promoted:e.promoted,location:e.location});this.hold_pieces_add(e.location,t.piece,-1),this.board.place_on(t)}else{var n=this.board.lookup(e.place);n&&this.hold_pieces_add(e.location,n.piece,1);var o=this.board.lookup(e.origin_place);e.promoted_trigger&&(o.promoted=!0),o.place=e.place,this.board.delete_at(e.origin_place),this.board.place_on(o)}}},{key:"hold_pieces_count",value:function(e,t){return this.hold_pieces[e.key][t.key]||0}},{key:"hold_pieces_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=this.hold_pieces_count(e,t)+n,r=this.hold_pieces[e.key];h.a.delete(r,t.key),o>=1&&h.a.set(r,t.key,o)}},{key:"hold_pieces_can_be_reduced_count",value:function(e,t,n){var o=this.hold_pieces_count(e,t);return n>o&&(n=o),n}},{key:"board_safe_delete_on",value:function(e){this.board.delete_at(e)}},{key:"board_piece_fore_class",value:function(e){var t=d.a.fetch(e),n=this.board.lookup(t);return n?n.css_class_list:[]}},{key:"cell_piece_class",value:function(e){var t=d.a.fetch(e),n=this.board.lookup(t),o=[];return n&&o.push("location_".concat(n.location.key)),o}},{key:"cell_view",value:function(e){var t=d.a.fetch(e),n=this.board.lookup(t),o="";return n&&(o=n.name),o}},{key:"turn_clamp",value:function(e){return l.a.clamp(Number(e),this.turn_offset_min,this.turn_offset_max)}},{key:"realized_hold_pieces_of",value:function(e){var t=Object.entries(this.hold_pieces[e]);return l()(t).filter((function(e){var t=Object(o.a)(e,2);t[0];return t[1]>=1})).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return[m.a.fetch(n),r]})).sortBy((function(e){var t=Object(o.a)(e,2),n=t[0];t[1];return n.code})).value()}},{key:"piece_box_count",value:function(e){return this.piece_box[e.key]||0}},{key:"piece_box_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.piece_box_count(e)+t;h.a.delete(this.piece_box,e.key),n>=1&&h.a.set(this.piece_box,e.key,n)}},{key:"piece_box_can_be_reduced_count",value:function(e,t){var n=this.piece_box_count(e);return t>n&&(t=n),t}},{key:"piece_box_realize",value:function(){var e=Object.entries(this.piece_box);return l()(e).filter((function(e){var t=Object(o.a)(e,2);t[0];return t[1]>=1})).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return[m.a.fetch(n),r]})).sortBy((function(e){var t=Object(o.a)(e,2),n=t[0];t[1];return n.code})).value()}},{key:"hold_pieces_to_piece_box",value:function(e){var t=this;l.a.forIn(this.hold_pieces[e.key],(function(n,o){var r=m.a.fetch(o);t.hold_pieces_add(e,r,-n),t.piece_box_add(r,n)}))}},{key:"piece_box_to_hold_pieces",value:function(e){var t=this;l.a.forIn(this.piece_box,(function(n,o){var r=m.a.fetch(o);t.piece_box_add(r,-n),t.hold_pieces_add(e,r,n)}))}},{key:"piece_box_reset_by_preset",value:function(e){var t=this;this.piece_box_clear(),w.a.fetch(e).piece_box.forEach((function(e){var n=Object(o.a)(e,2),r=n[0],c=n[1];t.piece_box_add(m.a.fetch(r),c)}))}},{key:"piece_box_piece_couns_adjust",value:function(){var e=this;this.piece_box_clear();var t=this.hold_piece_all_counts_hash,n=this.board.piece_counts_hash;w.a.fetch("全部駒箱").piece_box.forEach((function(r){var c=Object(o.a)(r,2),_=c[0],l=c[1],h=m.a.fetch(_),f=l-((t[h.key]||0)+(n[h.key]||0));e.piece_box_add(h,f)}))}},{key:"piece_box_clear",value:function(){this.piece_box={}}},{key:"king_formation_auto_set",value:function(){var e=!1;return e||(e=this.king_formation_set("bottom_left")),e||(e=this.king_formation_set("bottom_right")),e}},{key:"king_formation_auto_unset",value:function(){var e=!1;return e||(e=this.king_formation_unset("bottom_left")),e||(e=this.king_formation_unset("bottom_right")),e}},{key:"king_formation_set",value:function(e){var t=this,n=this.king_formation_soldiers(e);if(!n.some((function(e){return t.board.lookup(e.place)})))return n.forEach((function(e){return t.piece_search_and_place_on(e)})),!0}},{key:"king_formation_unset",value:function(e){var t=this,n=this.king_formation_soldiers(e);if(!n.some((function(e){return!t.board.lookup(e.place)})))return n.forEach((function(e){var n=t.board.lookup(e.place);if(n){var o=n.piece;t.board.delete_at(n.place),"K"===o.key?t.piece_box_add(o):t.hold_pieces_add(P.a.fetch("white"),o)}})),!0}},{key:"piece_search_and_place_on",value:function(e){if(!this.board.lookup(e.place)){if("K"===e.piece.key)this.piece_search_and_decrement(e.piece);else if(!this.piece_search_and_decrement(e.piece))return;this.board.place_on(e)}}},{key:"piece_search_and_decrement",value:function(e){var t=!1;return t||(t=this.piece_search_on_hold_pieces_and_decrement("white",e)),t||this.piece_box_count(e)>=1&&(this.piece_box_add(e,-1),t=!0),t}},{key:"piece_search_on_hold_pieces_and_decrement",value:function(e,t){var n=P.a.fetch(e);if(this.hold_pieces_count(n,t)>=1)return this.hold_pieces_add(n,t,-1),!0}},{key:"king_formation_soldiers",value:function(e){var t=null,n=null,o=null,r=null;return"bottom_left"===e&&(t=0,n=1,o=f.a.dimension-1,r=-1),"bottom_right"===e&&(t=f.a.dimension-1,n=-1,o=f.a.dimension-1,r=-1),[{piece:"K",promoted:!1,location:"black",place:[t,o]},{piece:"P",promoted:!0,location:"white",place:[t,o+r+r]},{piece:"P",promoted:!0,location:"white",place:[t+n,o+r+r]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,o+r+r]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,o+r]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,o]}].map((function(e){return new y.a({piece:m.a.fetch(e.piece),promoted:e.promoted,location:P.a.fetch(e.location),place:d.a.fetch(e.place)})}))}},{key:"slide_xy",value:function(e,t){this.board=this.board.slide_xy(e,t)}},{key:"shuffle_apply",value:function(e){var t=this.board.shuffle_apply(e);if(t)return this.board=t,!0}},{key:"dimension",get:function(){return f.a.dimension}},{key:"turn_offset",get:function(){var e=Number(this.current_turn);return e<0&&(e+=this.turn_offset_max+1),this.turn_clamp(e)}},{key:"previous_location",get:function(){return this.data_source.location_by_offset(this.turn_offset-1)}},{key:"current_location",get:function(){return this.data_source.location_by_offset(this.turn_offset)}},{key:"current_comments",get:function(){if(this.data_source.comments_pack)return this.data_source.comments_pack[this.turn_offset]}},{key:"turn_offset_min",get:function(){return this.data_source.turn_offset_min}},{key:"turn_offset_max",get:function(){return this.data_source.turn_offset_max}},{key:"current_turn_label",get:function(){return this.turn_offset===this.turn_offset_max?"まで".concat(this.display_turn,"手で").concat(this.previous_location.name,"の勝ち"):"".concat(this.display_turn,"手")}},{key:"display_turn",get:function(){return this.turn_base+this.turn_offset}},{key:"turn_base",get:function(){return this.data_source.turn_base}},{key:"to_simple_sfen",get:function(){return this.sfen_serializer.to_s}},{key:"to_sfen_without_turn",get:function(){return this.sfen_serializer.to_s_without_turn}},{key:"to_position_sfen",get:function(){return"position sfen ".concat(this.to_simple_sfen)}},{key:"sfen_serializer",get:function(){return new k.a(this)}},{key:"hold_piece_all_counts_hash",get:function(){var e=this,t={};return P.a.values.forEach((function(n){l.a.forIn(e.hold_pieces[n.key],(function(e,n){t[n]=(t[n]||0)+e}))})),t}}]),e}()},2:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={mixins:[n(304).a],props:{base:{type:Object,required:!1}}}},206:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return v}));n(30),n(31),n(10),n(295);var r=n(83),c=n(84),_=n(230),l=n(231),h=n(173),f=n(232),d=n.n(f),m=n(85);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var v=function(e){Object(_.a)(n,e);var t=y(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"locations",get:function(){return this.location_keys.map((function(e){return m.a.fetch(e)}))}}],[{key:"define",get:function(){return[{key:"none",name:"none",location_keys:[]},{key:"both",name:"☗☖",location_keys:["black","white"]},{key:"black",name:"☗",location_keys:["black"]},{key:"white",name:"☖",location_keys:["white"]}]}}]),n}(d.a);e.argv[1]===o&&console.log(v.fetch("both").locations)}).call(this,n(172),"/index.js")},233:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return d}));n(30),n(31),n(10),n(658),n(174),n(297),n(86);var r=n(71),c=(n(659),n(83)),_=n(84),l=n(13),h=n.n(l),f=n(234),d=function(){function e(t){var n,o;if(Object(c.a)(this,e),h.a.isString(t)){var _=this._parse_from_string(t),l=Object(r.a)(_,2);n=l[0],o=l[1]}else{var f=Object(r.a)(t,2);n=f[0],o=f[1]}var d=[n,o];this._x=d[0],this._y=d[1]}return Object(_.a)(e,null,[{key:"fetch",value:function(t){return t instanceof this?t:Object.freeze(new e(t))}},{key:"xy_valid_p",value:function(e,t){return 0<=e&&e<f.a.dimension&&0<=t&&t<f.a.dimension}}]),Object(_.a)(e,[{key:"sp_flip_if_white",value:function(e){return"white"===e.key?this.flip_all:this}},{key:"_parse_from_string",value:function(s){var e=this,t=(s=s.replace(/([１-９一二三四五六七八九a-z])/g,(function(t){return e._replace_table[t]}))).split("").map((function(e){return Number(e)})),n=Object(r.a)(t,2),o=n[0],c=n[1];return[f.a.dimension-o,c-1]}},{key:"rotate_add",value:function(t,n){var o=this.__new_pos(this._x,t),r=this.__new_pos(this._y,n);return e.fetch([o,r])}},{key:"__new_pos",value:function(e,t){return Math.trunc((e+t+f.a.dimension)%f.a.dimension)}},{key:"key",get:function(){return[this._x,this._y].toString()}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"human_x",get:function(){return f.a.dimension-this._x}},{key:"kanji_human_x",get:function(){return{1:"１",2:"２",3:"３",4:"４",5:"５",6:"６",7:"７",8:"８",9:"９"}[this.human_x]}},{key:"kanji_human_y",get:function(){return{1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九"}[this.human_y]}},{key:"human_y",get:function(){return this._y+1}},{key:"flip_all",get:function(){return e.fetch([f.a.dimension-1-this._x,f.a.dimension-1-this._y])}},{key:"flip_h",get:function(){return e.fetch([f.a.dimension-1-this._x,this._y])}},{key:"_replace_table",get:function(){return{"１":1,"２":2,"３":3,"４":4,"５":5,"６":6,"７":7,"８":8,"９":9,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9}}},{key:"to_sfen",get:function(){return[f.a.dimension-this._x,["a","b","c","d","e","f","g","h","i"][this._y]].join("")}},{key:"css_place_key",get:function(){return["place",this.human_x,this.human_y].join("_")}},{key:"human_xy_ary",get:function(){return[this.human_x,this.human_y]}},{key:"kanji_human",get:function(){return[this.kanji_human_x,this.kanji_human_y].join("")}}]),e}();e.argv[1]===o&&(console.log(d.fetch("6a").key),console.log(d.fetch([1,2]).key))}).call(this,n(172),"/index.js")},234:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return m}));n(18),n(10),n(623);var r=n(83),c=n(84),_=n(13),l=n.n(_),h=n(3),f=n(558),d=n(233),m=function(){function e(){Object(r.a)(this,e),this._surface={}}return Object(c.a)(e,null,[{key:"vector_flip",value:function(e,t){return[this.dimension-e-1,this.dimension-t-1]}},{key:"dimension",get:function(){return 9}},{key:"danger_zone_size",get:function(){return 3}}]),Object(c.a)(e,[{key:"place_on",value:function(e){this.delete_at(e.place),h.a.set(this._surface,e.place.key,e)}},{key:"lookup",value:function(e){return this._surface[e.key]}},{key:"delete_at",value:function(e){h.a.delete(this._surface,e.key)}},{key:"clear",value:function(){this._surface={}}},{key:"slide_xy",value:function(t,n){var o=new e;return l.a.forEach(this._surface,(function(e,r){var c=new f.a(Object.assign({},e.attributes,{location:e.location,place:e.place.rotate_add(t,n)}));o.place_on(c)})),o}},{key:"shuffle_apply",value:function(t){if(!(t*t<this.soldiers.length)){var n=this.all_places(t),o=l.a.shuffle(n),r=new e,i=0;return l.a.forEach(this._surface,(function(e,t){var n=new f.a(Object.assign({},e.attributes,{location:e.location,place:o[i]}));r.place_on(n),i+=1})),r}}},{key:"all_places",value:function(t){for(var n=e.dimension-t,o=[],r=0;r<t;r++)for(var c=0;c<t;c++){var _=d.a.fetch([n+c,0+r]);o.push(_)}return o}},{key:"soldiers",get:function(){return Object.values(this._surface)}},{key:"piece_counts_hash",get:function(){var e={};return l.a.forEach(this.soldiers,(function(t){e[t.piece.key]=(e[t.piece.key]||0)+1})),e}},{key:"flip_all",get:function(){var t=new e;return l.a.forEach(this._surface,(function(e,n){var o=new f.a(Object.assign({},e.attributes,{location:e.location.flip,place:e.place.flip_all}));t.place_on(o)})),t}},{key:"flip_h",get:function(){var t=new e;return l.a.forEach(this._surface,(function(e,n){var o=new f.a(Object.assign({},e.attributes,{location:e.location,place:e.place.flip_h}));t.place_on(o)})),t}}]),e}();e.argv[1]===o&&console.log(m.dimension)}).call(this,n(172),"/index.js")},298:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return L}));n(30),n(31),n(10),n(295),n(174),n(297),n(86);var r=n(83),c=n(84),_=n(654),l=n(230),h=n(231),f=n(173),d=n(625),m=n.n(d),y=n(3),v=n(13),k=n.n(v),w=n(234),P=n(653),j=n(559),x=n(233),O=n(558),S=n(85);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(h.a)(this,n)}}var N,L=function(e){Object(l.a)(n,e);var t=R(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"parse",value:function(){this.raw_body=this.raw_body.replace(/startpos/,"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1");var e=m()("sfen\\s+(?<board>\\S+)\\s+(?<b_or_w>\\S+)\\s+(?<hold_pieces>\\S+)\\s+(?<turn_counter_next>\\d+)(\\s+moves\\s+(?<moves>.*))?");this.attributes=m.a.exec(this.raw_body,e)}},{key:"__location_by_upper_or_lower_case",value:function(e){var t=null;return t=/[A-Z]/.test(e)?"black":"white",S.a.fetch(t)}},{key:"board",get:function(){var e=this,t=new w.a;return this.attributes.board.split("/").forEach((function(n,o){var r=0;m.a.forEach(n,m()("(?<promoted>\\+?)(?<piece>\\S)"),(function(n,i){if(/\d+/.test(n.piece))r+=Number(n.piece);else{var c=new O.a({place:new x.a([r,o]),piece:j.a.fetch(n.piece),promoted:"+"===n.promoted,location:e.__location_by_upper_or_lower_case(n.piece)});t.place_on(c),r++}}))})),t}},{key:"base_location",get:function(){var e=null;return e="b"===this.attributes.b_or_w?"black":"white",S.a.fetch(e)}},{key:"hold_pieces",get:function(){var e=this,t=Object(_.a)(Object(f.a)(n.prototype),"hold_pieces",this);return"-"!==this.attributes.hold_pieces&&m.a.forEach(this.attributes.hold_pieces,m()("(?<count>\\d+)?(?<piece_char>\\S)"),(function(n,i){var o=j.a.fetch(n.piece_char),r=Number(n.count||1),c=e.__location_by_upper_or_lower_case(n.piece_char);r+=t[c.key][o.key]||0,y.a.set(t[c.key],o.key,r)})),t}},{key:"turn_base",get:function(){return Number(this.attributes.turn_counter_next)-1}},{key:"move_infos",get:function(){var e=this,t=[];return k.a.forEach(this.moves,(function(n,i){var o={};o.location=e.base_location.advance(i);var r=m.a.exec(n,m()("(?<origin_x>\\S)(?<origin_y>\\S)(?<pos_x>\\S)(?<pos_y>\\S)(?<promoted>\\+?)?"));if(!r)return!1;o.promoted_trigger="+"===r.promoted,"*"===r.origin_y?o.drop_piece=j.a.fetch(r.origin_x):o.origin_place=x.a.fetch("".concat(r.origin_x).concat(r.origin_y)),o.place=x.a.fetch("".concat(r.pos_x).concat(r.pos_y)),t.push(o)})),t}},{key:"moves",get:function(){var e=this.attributes.moves;return k.a.isNil(e)||""===e?[]:e.split(/\s+/)}},{key:"init_sfen",get:function(){var e=[];return e.push("position"),e.push("sfen"),e.push(this.init_sfen_strip),e.join(" ")}},{key:"init_sfen_strip",get:function(){var e=[];return e.push(this.attributes.board),e.push(this.attributes.b_or_w),e.push(this.attributes.hold_pieces),e.push(this.attributes.turn_counter_next),e.join(" ")}}],[{key:"parse",value:function(e){var object=new this(e);return object.parse(),object}}]),n}(P.a);e.argv[1]===o&&(N=L.parse("position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d"),console.log(N),N=L.parse("position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d"),console.log(N))}).call(this,n(172),"/index.js")},304:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={data:function(){return{}}}},420:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return R}));n(30),n(31),n(295),n(174),n(297);var r=n(83),c=n(84),_=n(230),l=n(231),h=n(173),f=(n(18),n(10),n(623),n(625)),d=n.n(f),m=n(805),y=n.n(m),v=n(653),k=n(559),w=n(233),P=n(85),j=n(298),x=n(620);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var S=d()(Object.values({header:"(?<key>.*)：s*(?<value>.*)",comment:"^\\*(?<comment>.*)",hand:"^\\s*(?<number>\\d+)\\s+                                # 1    ; 手数\n         (?<to>[１-９1-9一二三四五六七八九]+)?                   # 76   ; 移動先\n         (?<same>同)?\\s*                                        # 同   ; 座標を書いてくれ\n         (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と]) # 歩   ; 駒\n         (?<suffix>[左右直]?[寄引上]?)                           # 上   ; KI2っぽい表記は読み捨てる\n         (?<motion>不?成|打|合|生)?                              # 打   ; 成や打\n         (\\((?<origin_place>\\d+)\\))?                          # (77) ; 移動元"}).join("|"),"x"),R=function(e){Object(_.a)(n,e);var t=O(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"parse",value:function(){var e=this;this.move_infos=[],this.comments_pack={};var t=null;this.raw_body.split(/\n/).forEach((function(line){var n=d.a.exec(line,S);if(n)if(n.key)e.header[n.key]=n.value;else if(n.comment){var i=e.move_infos.length;e.comments_pack[i]=e.comments_pack[i]||[],e.comments_pack[i].push(n.comment)}else if(n.number){var o={};o.location=e.location_by_offset(Number(n.number)-1),n.origin_place&&(o.origin_place=w.a.fetch(n.origin_place)),y()(n.to||n.same),n.to?(o.place=w.a.fetch(n.to),t=o.place):(y()(n.same),y()(t),o.place=t),"成"===n.motion&&(o.promoted_trigger=!0),"打"===n.motion&&(o.drop_piece=k.a.kif_lookup(n.piece)),e.move_infos.push(o)}}))}},{key:"board",get:function(){var e=new j.a;return e.raw_body=this.preset_info.sfen,e.parse(),e.board}},{key:"preset_key",get:function(){return this.header["手合割"]||"平手"}},{key:"preset_info",get:function(){return x.a.fetch(this.preset_key)}},{key:"base_location",get:function(){return P.a.fetch(this.preset_info.first_location_key)}},{key:"move_infos",set:function(e){this._move_infos=e},get:function(){return this._move_infos}},{key:"comments_pack",set:function(e){this._comments_pack=e},get:function(){return this._comments_pack}}]),n}(v.a);if(e.argv[1]===o){var N=new R;N.raw_body="\n   1 ２六歩(27)   ( 0:16/00:00:16)\n   2 ３四歩(33)   ( 0:22/00:00:22)\n   3 ７六歩(77)   ( 0:06/00:00:22)\n   4 ８四歩(83)   ( 0:13/00:00:35)\n   5 ２五歩(26)   ( 0:09/00:00:31)\n   6 ８五歩(84)   ( 0:16/00:00:51)\n   7 ７八金(69)   ( 0:04/00:00:35)\n   8 ３二金(41)   ( 0:09/00:01:00)\n   9 ２四歩(25)   ( 0:04/00:00:39)\n  10 同 歩(23)    ( 0:10/00:01:10)\n",N.parse(),console.log(N.move_infos),console.log(N.comments_pack),console.log(void 0===N.init_sfen)}}).call(this,n(172),"/index.js")},444:function(e,t,n){"use strict";n(175),n(176),n(301),n(174);var o=n(13),r=n.n(o),c=n(85);t.a={props:{sp_summary:{type:String,default:"is_summary_on"},sp_slider:{type:String,default:"is_slider_off"},sp_setting:{type:String,default:"is_setting_off"},sp_controller:{type:String,default:"is_controller_off"},sp_viewpoint:{type:String,default:"black"},sp_op_disabled:{type:Boolean,default:!1},sp_hidden_if_piece_stand_blank:{type:Boolean,default:!1},sp_flip_if_white:{type:Boolean,default:!1},sp_key_event_capture_enabled:{type:Boolean,default:!1},sp_shift_key_mag:{type:Number,default:10},sp_system_key_mag:{type:Number,default:50}},data:function(){return{new_viewpoint:null}},mounted:function(){window.addEventListener("keydown",this.keydown_hook,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.keydown_hook)},created:function(){this.new_viewpoint=this.sp_viewpoint},watch:{sp_viewpoint:function(e){this.new_viewpoint=e},new_viewpoint:function(e){this.$emit("update:sp_viewpoint",e)}},methods:{keydown_hook:function(e){if(this.debug_p,!this.sp_op_disabled&&!this.shortcut_hook(e)&&this.sp_key_event_capture_enabled&&(this.view_p||this.play_p)){var t=document.activeElement;if(this.$NavigateBlock){var n=[this.$NavigateBlock.$refs.first,this.$NavigateBlock.$refs.previous,this.$NavigateBlock.$refs.next,this.$NavigateBlock.$refs.last];if(void 0!==t&&"BODY"!==t.tagName&&!r.a.includes(n,t))return}"Backspace"!==e.code&&"ArrowUp"!==e.code&&"ArrowLeft"!==e.code&&"k"!==e.key&&"p"!==e.key&&"b"!==e.key||(this.relative_move(-1,e),e.preventDefault()),"Space"!==e.code&&"Enter"!==e.code&&"ArrowDown"!==e.code&&"ArrowRight"!==e.code&&"j"!==e.key&&"n"!==e.key&&"f"!==e.key||(this.relative_move(1,e),e.preventDefault())}},navi_relative_move:function(e,t){this.relative_move(e,t)},relative_move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&(t.shiftKey&&this.sp_shift_key_mag&&(e*=this.sp_shift_key_mag),(t.ctrlKey||t.altKey||t.metaKey)&&this.sp_system_key_mag&&(e*=this.sp_system_key_mag)),this.current_turn_add(e),this.turn_slider_focus()||(e>0?this.nav_focus_to("next"):this.nav_focus_to("previous"))},move_to_first:function(){this.current_turn_set(this.turn_offset_min),this.turn_slider_focus()||this.nav_focus_to("first")},move_to_last:function(){this.current_turn_set(this.turn_offset_max),this.turn_slider_focus()||this.nav_focus_to("last")},current_turn_add:function(e){this.current_turn_set(this.mediator.turn_offset+e)},current_turn_set:function(e){var t=this.mediator.turn_clamp(e);this.turn_offset!==t&&(this.state_reset(),this.view_p&&this.view_mode_mediator_update(t),this.play_p&&this.play_mode_mediator_seek_to(t),this.sound_play("piece_put"),this.$emit("update:sp_turn",this.turn_offset))},nav_focus_to:function(e){var t=this.navigate_block_element_refs(e);return!!t&&(t.focus(),!0)},turn_slider_focus:function(){var e=this.navigate_block_element_refs("TurnSliderBlock");return!!e&&e.focus_to_self()},navigate_block_element_refs:function(e){if(this.base.$NavigateBlock)return this.base.$NavigateBlock.$refs[e]},board_flip_toggle:function(){this.new_viewpoint=c.a.fetch(this.new_viewpoint).flip.key,this.sound_play("flip_sound"),this.turn_slider_focus()}},computed:{fliped:function(){return"white"===this.new_viewpoint},inside_controller_p:function(){return"is_setting_on"===this.sp_setting||"is_controller_on"===this.sp_controller&&(this.view_p||this.play_p)},inside_slider_p:function(){return"is_slider_on"===this.sp_slider&&(this.view_p||this.play_p)},inside_navigate_p:function(){return this.inside_controller_p||this.inside_slider_p}}}},445:function(e,t,n){"use strict";n(58),n(19),n(60),n(59),n(38),n(30),n(31),n(18),n(10);var o=n(621),r=n(85),c=n(233),_=n(529);function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,_=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){_=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(_)throw r}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}t.a={data:function(){return{mouseover_info:null,shuffle_mode_p:!1}},methods:{shortcut_hook:function(e){if(!this.play_p&&!this.edit_p)return!0;var t,n=l(r.a.values);try{for(n.s();!(t=n.n()).done;){var _=t.value;if(e.key.toLowerCase()===_.char_key&&(this.soldier_hold_unless_holding_p(e),this.piece_stand_click_shared(_,e)))return e.preventDefault(),!0}}catch(e){n.e(e)}finally{n.f()}if(this.edit_p&&("Backspace"===e.code||"Delete"===e.code||"t"===e.key.toLowerCase())&&(this.soldier_hold_unless_holding_p(e),this.piece_box_other_click(e)))return e.preventDefault(),!0;if("Escape"===e.code&&this.hold_cancel(e))return e.preventDefault(),!0;if("q"===e.key){if(this.holding_p&&this.hold_cancel(e))return e.preventDefault(),!0;if(this.mouseover_info&&"board"===this.mouseover_info.type){var h=c.a.fetch(this.mouseover_info.xy),f=this.mediator.board.lookup(h);if(f)return this.piece_stand_piece_click(f.location,f.piece,f.promoted,null),e.preventDefault(),!0}}if(("v"===e.key||"r"===e.key||"Space"===e.code)&&this.mouseover_info&&"board"===this.mouseover_info.type)return this.board_cell_right_click(this.mouseover_info.xy,e),e.preventDefault(),!0;if(this.edit_p&&"?"===e.key)return this.shortcut_modal_toggle_handle(),e.preventDefault(),!0;if(this.edit_p&&this.meta_p(e)){var d,m=this.arrow_vector_table[e.key];if(m)return(d=this.mediator).slide_xy.apply(d,Object(o.a)(m)),e.preventDefault(),!0}return!(!this.edit_p||("!"===e.key&&(this.shuffle_mode_p=!this.shuffle_mode_p,this.shuffle_mode_p?this.$buefy.toast.open({message:"盤面シャッフルモード: ON (TAP: 1-9)",position:"is-bottom",queue:!1,duration:2e3,type:"is-primary"}):this.$buefy.toast.open({message:"盤面シャッフルモード: OFF",position:"is-bottom",queue:!1,duration:500})),!this.shuffle_mode_p||"1"!==e.key&&"2"!==e.key&&"3"!==e.key&&"4"!==e.key&&"5"!==e.key&&"6"!==e.key&&"7"!==e.key&&"8"!==e.key&&"9"!==e.key))&&(this.shuffle_run(e.key),e.preventDefault(),!0)},board_mouseover_handle:function(e,t){this.mouseover_info={type:"board",xy:e}},piece_stand_mouseover_handle:function(e,t,n){this.mouseover_info={type:"MembershipStand",location:e,piece:t}},piece_box_mouseover_handle:function(e,t){this.mouseover_info={type:"PieceBox",piece:e}},mouseleave_handle:function(){this.mouseover_info=null},soldier_hold_unless_holding_p:function(e){this.mouseover_info&&(this.holding_p||("board"===this.mouseover_info.type&&this.board_cell_left_click(this.mouseover_info.xy,e),"MembershipStand"===this.mouseover_info.type&&this.piece_stand_piece_click(this.mouseover_info.location,this.mouseover_info.piece,!1,e),"PieceBox"===this.mouseover_info.type&&this.piece_box_piece_click(this.mouseover_info.piece,e)))},shortcut_modal_toggle_handle:function(){this.shortcut_modal_active_p()?this.shortcut_modal_close_handle():this.shortcut_modal_show_handle()},shortcut_modal_show_handle:function(){var e=this;this.shortcut_modal_close_handle(),this.$shortcut_modal&&alert("this.$shortcut_modal"),this.$shortcut_modal=this.$buefy.modal.open({parent:this,hasModalCard:!0,props:{},animation:"",onCancel:function(){e.shortcut_modal_close_handle()},canCancel:["escape","outside"],component:_.a})},shortcut_modal_close_handle:function(){this.$shortcut_modal&&(this.$shortcut_modal.close(),this.$shortcut_modal=null)},shortcut_modal_active_p:function(){return!!this.$shortcut_modal}},computed:{arrow_vector_table:function(){return{ArrowRight:[1,0],ArrowLeft:[-1,0],ArrowUp:[0,-1],ArrowDown:[0,1]}}}}},447:function(e,t,n){"use strict";n(175),n(176);var o=n(621),r=(n(18),n(10),n(174),n(13)),c=n.n(r),_=n(233),l=(n(234),n(624)),h=n(558),f=n(85);t.a={props:{sp_play_mode_legal_move_only:{type:Boolean,default:!0},sp_play_mode_auto_promote:{type:Boolean,default:!0},sp_play_mode_not_put_if_death_soldier:{type:Boolean,default:!0},sp_edit_mode_double_click_time_ms:{type:Number,default:350}},data:function(){return{place_from:null,have_piece:null,have_piece_location:null,have_piece_promoted:null,me_running_p:!1,$me_last_event:null,$CursorObject:null,mouse_stick:!1,dialog_soldier:null,$double_tap_time:null}},watch:{new_run_mode:function(){this.state_reset()}},beforeDestroy:function(){this.virtual_piece_destroy()},methods:{board_cell_pointerdown_handle:function(e,t){var n=_.a.fetch(e),o=this.sp_board_cell_pointerdown_user_handle;!o||o(n,t)},board_cell_left_click:function(e,t){var n=this;this.log("board_cell_left_click"),this.log("shiftKey: ".concat(t.shiftKey));var o=_.a.fetch(e),r=this.sp_board_cell_left_click_user_handle;if(!(r&&(this.log("ユーザー指定のクリックハンドル実行: ".concat(o.css_place_key)),r(o,t))||this.if_view_mode_break)){var d=this.mediator.board.lookup(o),m=null,y=null;if(this.origin_soldier1&&(y=(m=new h.a({piece:this.origin_soldier1.piece,place:o,promoted:this.origin_soldier1.promoted,location:this.origin_soldier1.location})).promotable_p||this.origin_soldier1.promotable_p),this.cpu_location_p)this.log("片方の手番だけを操作できるようにする sp_human_side の指定があってCPU側なので無効とする");else if(this.play_p&&!this.holding_p&&d&&d.location!==this.mediator.current_location)this.log("自分の手番で相手の駒を持ち上げようとしたので無効とする");else if(this.play_p&&this.have_piece&&d)this.log("駒台や駒箱から持ち上げた駒を盤上の駒の上に置こうとしたので無効とする");else{if(this.sp_play_mode_not_put_if_death_soldier&&this.play_p&&this.have_piece&&!d){var v=this.soldier_create_from_stand_or_box_on(o),k=v.piece.piece_vector.force_promote_length;if(null!=k&&v.top_spaces<=k)return void this.log("駒台や駒箱から持ち上げた駒を置こうとしたけど死に駒なので無効とする")}if(this.holding_p||d)if(this.play_p&&this.put_on_my_soldier_p(d))this.log("自分の駒の上に駒を重ねようとしたので無効とする(盤上の移動元の駒を含まない)");else{if(this.edit_p){var w=this.$double_tap_time;if(this.$double_tap_time=Date.now(),d&&c.a.isEqual(this.place_from,o)&&w){var P=this.$double_tap_time-w,j=P<this.sp_edit_mode_double_click_time_ms;if(this.log("ダブルクリック判定: (".concat(P," ms < ").concat(this.sp_edit_mode_double_click_time_ms,") -> ").concat(j)),j)return this.log("操作モードで盤上の駒を持って同じ位置に戻したときに盤上の駒を裏返す"),this.mediator.board.place_on(d.transform_clone),void this.piece_hold_and_put_for_bug(o,t)}}if(c.a.isEqual(this.place_from,o))return this.log("盤上の駒を持って同じ位置に戻したので状況キャンセル"),void this.state_reset();if(this.edit_p&&(this.log("holding_p: ".concat(this.holding_p)),this.meta_p(t)&&!this.holding_p&&d))return this.log("盤上の駒を裏返す"),this.mediator.board.place_on(d.transform_clone),void this.piece_hold_and_put_for_bug(o,t);if(!this.holding_p)return this.log("盤上の駒を持ちあげる"),void this.soldier_hold(o,t);if(this.sp_play_mode_legal_move_only&&this.play_p&&this.place_from){var x=l.a.fetch(this.origin_soldier1.piece.key),O=this.place_from.x,S=this.place_from.y,R=null,N=!1;if(!N){R=this.origin_soldier1.promoted?x.promoted_once_vectors:x.basic_once_vectors;var L=l.a[R];L&&(N=L.some((function(e){if(e){var t=e[0],r=e[1]*n.origin_soldier1.location.value_sign,c=S+r;return O+t===o.x&&c===o.y}})))}if(!N){R=this.origin_soldier1.promoted?x.promoted_repeat_vectors:x.basic_repeat_vectors;var $=l.a[R];$&&(N=$.some((function(e){if(e)for(var t=e[0],r=e[1]*n.origin_soldier1.location.value_sign,c=O+t,l=S+r;_.a.xy_valid_p(c,l);){if(c===o.x&&l===o.y)return!0;var h=_.a.fetch([c,l]);if(n.mediator.board.lookup(h))break;c+=t,l+=r}})))}if(!N)return}if(!this.place_from){if(this.have_piece){this.log("持駒を置く"),d&&(this.have_piece_location?this.mediator.hold_pieces_add(this.have_piece_location,d.piece):this.mediator.hold_pieces_add(f.a.fetch("black"),d.piece));var B=this.soldier_create_from_stand_or_box_on(o);return this.piece_decriment(),this.mediator.board.place_on(B),this.moves_set(B.piece.key+"*"+o.to_sfen),this.state_reset(),void this.turn_next()}throw new Error("must not happen")}if(this.log("盤上から移動"),d&&this.mediator.hold_pieces_add(this.origin_soldier1.location,d.piece),(this.view_p||this.play_p)&&y){var D=!0;if(this.sp_play_mode_auto_promote){var G=m.piece.piece_vector.force_promote_length;null!=G&&m.top_spaces<=G&&(this.promotable_piece_moved(m,!0),D=!1)}D&&(this.mouse_stick=!1,this.dialog_soldier=m,this.virtual_piece_destroy())}else this.play_p&&this.moves_set(this.origin_soldier1.place.to_sfen+o.to_sfen),this.mediator.board.place_on(m),this.mediator.board.delete_at(this.place_from),this.state_reset(),this.turn_next()}else this.log("持たずに何もないところをクリックしたので無効とする")}}},promotable_piece_moved2:function(e){this.promotable_piece_moved(this.dialog_soldier,e)},promotable_piece_moved:function(e,t){e=e.clone_with_attrs({promoted:t}),this.moves_set(this.origin_soldier1.place.to_sfen+e.place.to_sfen+(e.promoted?"+":"")),this.mediator.board.place_on(e),this.mediator.board.delete_at(this.place_from),this.state_reset(),this.turn_next()},board_cell_right_click:function(e,t){if(this.log("盤のセルを右クリック"),!this.if_view_mode_break){var n=_.a.fetch(e),o=this.mediator.board.lookup(n);this.hold_cancel(t)||this.edit_p&&!this.holding_p&&o&&(this.log("盤上の駒を裏返す"),this.mediator.board.place_on(o.transform_clone),this.piece_hold_and_put_for_bug(n,t))}},piece_stand_click_shared:function(e,t){return this.have_piece_location===e&&this.have_piece?(this.log("自分の駒台から駒を持ち上げているならキャンセル"),this.state_reset(),!0):this.edit_p&&this.have_piece?(this.hold_pieces_move_to_my_hold_pieces(t,e),!0):this.play_p&&this.origin_soldier1?(this.log("play_mode では盤上の駒を駒台に置くことはできない"),!0):!!this.origin_soldier1&&(this.log("盤上の駒を駒台に置く"),this.board_soldir_to_hold_pieces(e),!0)},piece_stand_click:function(e,t){this.piece_stand_click_shared(e,t)},piece_stand_piece_click:function(e,t,n,o){this.log("駒台の駒をクリック"),this.piece_stand_click_shared(e,o)||(this.mediator.hold_pieces_count(e,t)<=0?this.log("クリックしたけど持駒がない"):this.play_p&&e!==this.mediator.current_location?this.log("相手の持駒を持とうとしたときは無効"):this.cpu_location_p?this.log("片方の手番だけを操作できるようにする sp_human_side の指定があってCPU側なので無効とする"):(this.log("駒台の駒を持つ"),this.have_piece=t,this.have_piece_location=e,this.have_piece_promoted=n,this.virtual_piece_create(o,this.origin_soldier2)))},piece_box_have_p:function(e){return c.a.isNil(this.have_piece_location)&&this.have_piece===e},piece_box_other_click:function(e){if(this.log("piece_box_other_click:駒箱クリック"),c.a.isNil(this.have_piece_location)&&this.have_piece)return this.log("持っているならキャンセル"),this.state_reset(),!0;if(this.have_piece_location&&this.have_piece){this.log("駒台から駒箱に移動");var t=this.hold_piece_source_cut(e);return this.mediator.piece_box_add(this.have_piece,t),this.state_reset(),!0}return!!this.origin_soldier1&&(this.log("盤上の駒を駒箱に移動"),this.mediator.piece_box_add(this.origin_soldier1.piece),this.mediator.board.delete_at(this.origin_soldier1.place),this.state_reset(),!0)},piece_box_piece_click:function(e,t){this.piece_box_other_click(t)||(this.log("piece_box_piece_click:駒箱の駒を持つ"),this.have_piece=e,this.have_piece_location=null,this.have_piece_promoted=!1,this.virtual_piece_create(t,this.origin_soldier2))},hold_cancel:function(e){return!(this.dialog_soldier||!this.holding_p)&&(this.log("持ち上げた駒を元に戻す"),this.state_reset(),!0)},board_soldir_to_hold_pieces:function(e){this.mediator.hold_pieces_add(e,this.origin_soldier1.piece),this.mediator.board.delete_at(this.origin_soldier1.place),this.state_reset()},hold_pieces_move_to_my_hold_pieces:function(e,t){this.log("相手の持駒を自分の駒台に移動");var n=this.hold_piece_source_cut(e);this.mediator.hold_pieces_add(t,this.have_piece,n),this.state_reset()},hold_piece_source_cut:function(e){var t=1;return this.have_piece_location?(this.log("相手の駒箱から移動"),this.meta_p(e)&&(this.log("シフトが押されていたので全部移動"),t=this.mediator.hold_pieces_count(this.have_piece_location,this.have_piece)),t=this.mediator.hold_pieces_can_be_reduced_count(this.have_piece_location,this.have_piece,t),this.mediator.hold_pieces_add(this.have_piece_location,this.have_piece,-t)):(this.log("駒箱から移動"),this.meta_p(e)&&(this.log("シフトが押されていたので全部移動"),t=this.mediator.piece_box_count(this.have_piece)),t=this.mediator.piece_box_can_be_reduced_count(this.have_piece,t),this.mediator.piece_box_add(this.have_piece,-t)),t},piece_decriment:function(){this.have_piece_location?this.mediator.hold_pieces_add(this.have_piece_location,this.have_piece,-1):this.mediator.piece_box_add(this.have_piece,-1)},put_on_my_soldier_p:function(e){if(this.holding_p&&e&&e.location===this.mediator.current_location&&!c.a.isEqual(this.place_from,e.place))return!0},soldier_hold:function(e,t){this.place_from=e,this.virtual_piece_create(t,this.origin_soldier1)},state_reset:function(){this.log("state_reset"),this.dialog_soldier=null,this.place_from=null,this.have_piece=null,this.have_piece_location=null,this.have_piece_promoted=null,this.virtual_piece_destroy()},piece_hold_and_put_for_bug:function(e,t){this.state_reset()},piece_box_piece_control_class:function(e){var t=[];return this.piece_box_have_p(e)?t.push("holding_p"):this.edit_p&&(this.holding_p||t.push("selectable_p")),t.push("is_position_south"),t},piece_box_piece_texture_class:function(e){var t=[];return(t=c.a.concat(t,e.css_class_list)).push("location_black"),t.push("promoted_false"),t},fn_flip_all:function(){var e=this;this.mediator.board=this.mediator.board.flip_all,this.mediator.hold_pieces=c.a.reduce(f.a.values,(function(a,t){return a[t.key]=e.mediator.hold_pieces[t.flip.key],a}),{})},fn_flip_h:function(){this.mediator.board=this.mediator.board.flip_h},init_location_toggle:function(){this.init_location_key=this.init_location.flip.key},soldier_create_from_stand_or_box_on:function(e){return new h.a({piece:this.have_piece,place:e,promoted:this.have_piece_promoted||!1,location:this.have_piece_location||f.a.fetch("black")})},mousemove_hook:function(e){var t=this;this.$me_last_event=e,this.me_running_p||(this.me_running_p=!0,window.requestAnimationFrame((function(){t.cursor_object_xy_update(),t.me_running_p=!1})))},click_hook:function(e){1!==e.which&&this.state_reset()},cursor_object_xy_update:function(){if(this.$CursorObject&&this.$me_last_event&&this.mouse_stick){var e=this.$me_last_event.clientX,t=this.$me_last_event.clientY;this.$CursorObject.style.left="".concat(e,"px"),this.$CursorObject.style.top="".concat(t,"px")}},virtual_piece_create:function(e,t){this.virtual_piece_destroy(),this.virtual_piece_dom_create(t),this.mouse_stick=!0,e&&(this.$me_last_event=e,this.cursor_object_xy_update()),window.addEventListener("mousemove",this.mousemove_hook,!1),window.addEventListener("click",this.click_hook,!1)},virtual_piece_dom_create:function(e){this.$CursorObject=this.el_create(["CursorObject"]);var t=this.el_create(["PieceTap"]),n=this.el_create(["PieceTexture"]),r=this.el_create(["PieceTextureSelf"].concat(Object(o.a)(e.css_class_list)));t.classList.add(e.location.flip_if(this.base.fliped).position_key),n.appendChild(r),t.appendChild(n),this.$CursorObject.appendChild(t),this.$CursorObject.style.left="-50%",this.$CursorObject.style.top="-50%",this.$refs.ShogiPlayerGround.$el.appendChild(this.$CursorObject)},el_create:function(e){var t,n=document.createElement("div");return(t=n.classList).add.apply(t,Object(o.a)(e)),n},virtual_piece_destroy:function(){this.$CursorObject&&(this.$refs.ShogiPlayerGround.$el.removeChild(this.$CursorObject),this.$CursorObject=null,this.mouse_stick=!1,window.removeEventListener("mousemove",this.mousemove_hook,!1),window.removeEventListener("click",this.click_hook,!1))},meta_p:function(e){return e.shiftKey|e.ctrlKey|e.altKey|e.metaKey}},computed:{origin_soldier1:function(){if(this.place_from)return this.mediator.board.lookup(this.place_from)},origin_soldier2:function(){if(this.have_piece){var e=_.a.fetch([0,0]);return this.soldier_create_from_stand_or_box_on(e)}},soldier_or_stand_p:function(){return this.place_from||this.have_piece_location},holding_p:function(){return!c.a.isNil(this.place_from)||!c.a.isNil(this.have_piece)},cpu_location_p:function(){if(this.play_p)return!c.a.includes(this.human_locations,this.mediator.current_location)},if_view_mode_break:function(){}}}},448:function(e,t,n){"use strict";var o=n(621),r=n(13),c=n.n(r),_=n(177),l=n(85),h=n(206);t.a={props:{sp_human_side:{type:String,default:"both"}},data:function(){return{moves:[],init_sfen:null,init_location_key:"black"}},created:function(){var e=this;this.$watch((function(){return[e.mediator,e.init_location_key]}),(function(){e.emit_update_edit_mode_snapshot_sfen()}),{deep:!0})},mounted:function(){},watch:{edit_mode_snapshot_sfen2:function(e){this.$emit("update:edit_mode_snapshot_sfen2",e)},mediator:{handler:function(e){this.$emit("update:mediator_snapshot_sfen",e.to_position_sfen)},deep:!0},turn_offset:function(e){this.$emit("update:turn_offset",e)},moves_take_turn_offset:function(e){this.$emit("update:moves_take_turn_offset",e)}},methods:{play_mode_setup_from:function(e){this.log("play_mode_setup_from"),void 0!==this.mediator.data_source.init_sfen?("view_mode"===e&&(this.init_sfen=this.mediator.data_source.init_sfen,this.moves=this.mediator.data_source.moves),"edit_mode"===e&&this.init_sfen_set()):("view_mode"===e&&(this.init_location_key=this.mediator.current_location.key),this.init_sfen_set()),this.play_mode_mediator_seek_to(this.turn_offset)},init_sfen_set:function(){this.init_sfen=this.edit_mode_snapshot_sfen(),this.moves=[]},play_mode_mediator_seek_to:function(e){this.mediator=new _.a,this.mediator.data_source=this.data_source_by(this.play_mode_full_moves_sfen),this.mediator.current_turn=e,this.mediator.run(),this.flip_if_white_run()},moves_set:function(e){this.moves=[].concat(Object(o.a)(this.moves_take_turn_offset),[e])},turn_next:function(){this.play_p&&(this.mediator=new _.a,this.mediator.data_source=this.data_source_by(this.play_mode_full_moves_sfen),this.mediator.current_turn=-1,this.mediator.run(),this.sound_play("piece_put"),this.$emit("update:play_mode_advanced_full_moves_sfen",this.play_mode_full_moves_sfen),this.$emit("update:play_mode_advanced_last_move",c.a.last(this.moves)),this.$emit("update:play_mode_advanced_moves",this.moves),this.$emit("update:play_mode_advanced_snapshot_sfen",this.mediator.to_position_sfen),this.turn_slider_focus())},edit_mode_snapshot_sfen:function(){if(this.mediator){var e=this.mediator.sfen_serializer;return["position sfen",e.to_board_sfen,this.init_location.key[0],e.to_hold_pieces,1].join(" ")}},emit_update_edit_mode_snapshot_sfen:function(){this.$emit("update:edit_mode_snapshot_sfen",this.edit_mode_snapshot_sfen())}},computed:{play_mode_full_moves_sfen:function(){if(this.init_sfen)return this.init_sfen+" moves "+this.moves.join(" ")},init_location:function(){return l.a.fetch(this.init_location_key)},human_locations:function(){return h.a.fetch(this.sp_human_side).locations},moves_take_turn_offset:function(){return c.a.take(this.moves,this.turn_offset)},edit_mode_snapshot_sfen2:function(){return this.edit_mode_snapshot_sfen()}}}},449:function(e,t,n){"use strict";n(27),n(19),n(18),n(10),n(25);var o=n(8),r=(n(174),n(266)),c=n(282);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a={props:{sp_sound_enabled:{type:Boolean,default:!1},sp_sound_body_changed:{type:Boolean,default:!0},sp_sound_volume:{type:Number,default:.5}},methods:{sound_play:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.$emit("sound_play",e),this.sp_sound_enabled){var n=r.a.fetch(e),o=l({src:n.source,volume:n.volume*this.sp_sound_volume,autoplay:!0},t);return new c.Howl(o)}}}}},450:function(e,t,n){"use strict";n(18),n(10);var o=n(177),r=n(620);t.a={props:{sp_preset_key:{type:String,default:null}},data:function(){return{new_preset_key:this.sp_preset_key}},watch:{preset_key:function(e){this.new_preset_key=e},new_preset_key:function(e){this.mediator_setup_by_preset(e)}},methods:{mediator_setup_by_preset:function(e){e=r.a.fetch(e),this.mediator=new o.a,e.sfen&&(this.mediator.data_source=this.data_source_by(e.sfen)),this.mediator.run(),this.mediator.piece_box_piece_couns_adjust(),this.init_location_key=this.mediator.current_location.key}},computed:{preset_info_values:function(){return r.a.values},init_preset_sfen:function(){if(this.sp_preset_key)return r.a.fetch(this.sp_preset_key).sfen}}}},451:function(e,t,n){"use strict";var o=n(558),r=n(177);t.a={methods:{api_random_puton:function(){var e=o.a.random();return this.mediator.board.clear(),this.mediator.board.place_on(e),e},api_place_on:function(e){this.mediator.board.place_on(e)},api_board_clear:function(){this.mediator.board.clear()},api_board_turn_set:function(e){this.mediator_setup(e)},api_play_mode_mediator_seek_to:function(e){this.play_mode_mediator_seek_to(e)},api_flip_set:function(e){this.base.new_viewpoint=e?"white":"black"},api_viewpoint_set:function(e){this.base.new_viewpoint=e},api_flip_toggle:function(){this.base.board_flip_toggle()},api_retract_a_move:function(){var e=this.turn_offset-2;e<0&&(e=0),this.api_board_turn_set(e)},api_sfen_or_kif_set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mediator=new r.a,this.mediator.data_source=this.data_source_by(e),this.mediator.current_turn=t.turn||0,this.mediator.run()},api_turn_slider_focus:function(){this.turn_slider_focus()}}}},528:function(e,t,n){"use strict";n(30),n(31),n(10),n(295);var o=n(83),r=n(84),c=n(230),_=n(231),l=n(173),h=n(232),f=n.n(h),d=n(85);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var y=function(e){Object(c.a)(n,e);var t=m(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,null,[{key:"define",get:function(){return[{key:"☖の持駒を駒箱へ",func:function(e){e.mediator.hold_pieces_to_piece_box(d.a.fetch("white"))}},{key:"駒箱から☖の持駒へ",func:function(e){e.mediator.piece_box_to_hold_pieces(d.a.fetch("white"))}},{key:"駒箱を正規化",func:function(e){e.mediator.piece_box_piece_couns_adjust()}},{key:"駒箱に駒を一式生成",func:function(e){e.mediator.piece_box_reset_by_preset("全部駒箱")}},{key:"駒箱の駒をクリア",func:function(e){e.mediator.piece_box_clear()}},{key:"指将棋用玉配置",func:function(e){e.mediator.king_formation_auto_set()}},{key:"指将棋用玉回収",func:function(e){e.mediator.king_formation_auto_unset()}},{key:"視点切り替え",func:function(e){e.base.api_flip_toggle()}},{key:"盤面シャッフル",func:function(e){e.shuffle_dialog_open()}},{key:"上ローテイト",func:function(e){e.mediator.slide_xy(0,-1)}},{key:"下ローテイト",func:function(e){e.mediator.slide_xy(0,1)}},{key:"左ローテイト",func:function(e){e.mediator.slide_xy(-1,0)}},{key:"右ローテイト",func:function(e){e.mediator.slide_xy(1,0)}}]}}]),n}(f.a),v=n(234);t.a={data:function(){return{any_func_key:null}},methods:{any_func_click_handle:function(e){e.func(this)},shuffle_dialog_open:function(){var e=this;this.shuffle_mode_p=!1,this.$buefy.dialog.prompt({message:"寸法の一辺のサイズを指定してください",confirmText:"実行",cancelText:"キャンセル",inputAttrs:{type:"number",value:4,min:1,max:v.a.dimension},trapFocus:!0,onConfirm:function(t){return e.shuffle_run(t)}})},shuffle_run:function(e){e=parseInt(e),this.mediator.shuffle_apply(e)||this.$buefy.toast.open({message:"".concat(e," x ").concat(e," が盤上の駒の数より少ないため何もしませんでした"),position:"is-bottom",queue:!1,duration:2e3,type:"is-warning"})}},computed:{AnyFuncInfo:function(){return y}}}},558:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return P}));n(27),n(19),n(25),n(38);var r=n(8),c=(n(18),n(10),n(83)),_=n(84),l=n(3),h=n(13),f=n.n(h),d=n(234),m=n(233),y=n(559),v=n(85);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var P=function(){function e(t){Object(c.a)(this,e),this.attributes=Object.assign({},t)}return Object(_.a)(e,null,[{key:"random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.place;if(!t){var n=f.a.random(0,d.a.dimension-1),o=f.a.random(0,d.a.dimension-1);t=m.a.fetch([n,o])}var r=y.a.fetch(f.a.random(0,y.a.values.length-1)),c=r.promotable_p&&0===f.a.random(0,1),_=v.a.fetch(f.a.random(0,v.a.values.length-1));return new this({piece:r,place:t,promoted:c,location:_})}}]),Object(_.a)(e,[{key:"clone_with_attrs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(w(w({},this.attributes),t))}},{key:"piece",get:function(){return this.attributes.piece}},{key:"place",set:function(e){l.a.set(this.attributes,"place",e)},get:function(){return this.attributes.place}},{key:"location",get:function(){return this.attributes.location}},{key:"promoted",get:function(){return!!this.attributes.promoted},set:function(e){l.a.set(this.attributes,"promoted",e)}},{key:"name",get:function(){return this.promoted?this.piece.promoted_name:this.piece.name}},{key:"transform_clone",get:function(){var e=null;return e=this.piece.promotable_p?this.promoted?{location:this.location.flip,promoted:!this.promoted}:{promoted:!this.promoted}:{location:this.location.flip},this.clone_with_attrs(e)}},{key:"promotable_p",get:function(){if(this.piece.promotable_p&&!this.promoted)return this.danger_zone_p}},{key:"danger_zone_p",get:function(){return"black"===this.location.key?this.place.y<d.a.danger_zone_size:this.place.y>=d.a.dimension-d.a.danger_zone_size}},{key:"css_class_list",get:function(){var e=[];return e.push("location_".concat(this.location.key)),e.push("promoted_".concat(this.promoted)),e=f.a.concat(e,this.piece.css_class_list)}},{key:"bottom_spaces",get:function(){return d.a.dimension-1-this.top_spaces}},{key:"top_spaces",get:function(){return this.place.sp_flip_if_white(this.location).y}}]),e}();if(e.argv[1]===o){var j=new P({place:new m.a([1,7]),piece:y.a.fetch("P"),promoted:!0,location:v.a.fetch("white")});console.log(j.name),console.log(j.top_spaces)}}).call(this,n(172),"/index.js")},559:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return k}));n(30),n(31),n(295),n(38),n(175),n(176),n(18),n(10),n(303);var r=n(83),c=n(84),_=n(654),l=n(230),h=n(231),f=n(173),d=n(232),m=n.n(d),y=n(624);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(h.a)(this,n)}}var k=function(e){Object(l.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"css_class_list",get:function(){return["piece_name","piece_".concat(this.key)]}},{key:"promotable_p",get:function(){return!!this.promoted_name}},{key:"piece_vector",get:function(){return y.a.fetch(this.key)}}],[{key:"lookup",value:function(e){return"string"==typeof e&&(e=e.toUpperCase()),Object(_.a)(Object(f.a)(n),"lookup",this).call(this,e)}},{key:"kif_lookup",value:function(e){return this.values.find((function(t){return[t.name,t.alias_name].includes(e)}))}},{key:"kif_promoted_lookup",value:function(e){return this.values.find((function(t){return[t.promoted_name,t.promoted_alias_name].includes(e)}))}},{key:"define",get:function(){return[{key:"K",name:"玉",alias_name:"王",promoted_name:null,promoted_alias_name:null},{key:"R",name:"飛",alias_name:null,promoted_name:"龍",promoted_alias_name:"竜"},{key:"B",name:"角",alias_name:null,promoted_name:"馬",promoted_alias_name:null},{key:"G",name:"金",alias_name:null,promoted_name:null,promoted_alias_name:null},{key:"S",name:"銀",alias_name:null,promoted_name:"全",promoted_alias_name:null},{key:"N",name:"桂",alias_name:null,promoted_name:"圭",promoted_alias_name:null},{key:"L",name:"香",alias_name:null,promoted_name:"杏",promoted_alias_name:null},{key:"P",name:"歩",alias_name:null,promoted_name:"と",promoted_alias_name:null}]}}]),n}(m.a);e.argv[1]===o&&(console.log(k.fetch("K")),console.log(k.fetch("K")),console.log(k.lookup("")),console.log(k.values),console.log(k.values_map.get("K")),console.log(k.fetch("K").key))}).call(this,n(172),"/index.js")},620:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return m}));n(30),n(31),n(10),n(295);var r=n(83),c=n(84),_=n(230),l=n(231),h=n(173),f=n(232);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var m=function(e){Object(_.a)(n,e);var t=d(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"詰将棋",sfen:"position sfen 4k4/9/9/9/9/9/9/9/9 b 2r2b4g4s4n4l18p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"詰将棋 - 美濃",sfen:"position sfen ln1g5/1ks6/1ppp5/p8/9/9/9/9/9 b BGSNL2rb2g2s2n2l14p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"詰将棋 - 矢倉",sfen:"position sfen 7nl/6gk1/5gspp/5pp2/9/9/9/9/9 b BGSNL2rbg2s2n2l14p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"戦型 右四間 vs 四間飛車",sfen:"position sfen ln1g1g1nl/1ks2r3/1pppp1bpp/p3spp2/9/P1P1SP1PP/1P1PP1P2/1BK1GR3/LNSG3NL b - 25",first_location_key:"black",piece_box:[]},{key:"全部駒箱",sfen:"position sfen 9/9/9/9/9/9/9/9/9 b - 1",first_location_key:"black",piece_box:[["B",2],["R",2],["L",4],["N",4],["S",4],["G",4],["P",18],["K",2]]},{key:"平手",sfen:"position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1",first_location_key:"black",piece_box:[]},{key:"香落ち",sfen:"position sfen lnsgkgsn1/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["L",1]]},{key:"右香落ち",sfen:"position sfen 1nsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["L",1]]},{key:"角落ち",sfen:"position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1]]},{key:"飛車落ち",sfen:"position sfen lnsgkgsnl/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["R",1]]},{key:"飛香落ち",sfen:"position sfen lnsgkgsn1/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["R",1],["L",1]]},{key:"二枚落ち",sfen:"position sfen lnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1]]},{key:"三枚落ち",sfen:"position sfen lnsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",1]]},{key:"四枚落ち",sfen:"position sfen 1nsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2]]},{key:"六枚落ち",sfen:"position sfen 2sgkgs2/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2]]},{key:"八枚落ち",sfen:"position sfen 3gkg3/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2]]},{key:"十枚落ち",sfen:"position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2]]},{key:"十九枚落ち",sfen:"position sfen 4k4/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2],["P",9]]},{key:"二十枚落ち",sfen:"position sfen 9/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2],["P",9],["K",1]]}]}}]),n}(n.n(f).a);e.argv[1]===o&&(console.log(m.fetch("平手")),console.log(m.fetch("香落ち").first_location_key))}).call(this,n(172),"/index.js")},624:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return m}));n(30),n(31),n(10),n(295);var r=n(83),c=n(84),_=n(230),l=n(231),h=n(173),f=n(232);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var m=function(e){Object(_.a)(n,e);var t=d(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"K",basic_once_vectors:"pattern_king",basic_repeat_vectors:null,promoted_once_vectors:null,promoted_repeat_vectors:null,force_promote_length:null},{key:"R",basic_once_vectors:null,basic_repeat_vectors:"pattern_plus",promoted_once_vectors:"pattern_x",promoted_repeat_vectors:"pattern_plus",force_promote_length:null},{key:"B",basic_once_vectors:null,basic_repeat_vectors:"pattern_x",promoted_once_vectors:"pattern_plus",promoted_repeat_vectors:"pattern_x",force_promote_length:null},{key:"G",basic_once_vectors:"pattern_gold",basic_repeat_vectors:null,promoted_once_vectors:null,promoted_repeat_vectors:null,force_promote_length:null},{key:"S",basic_once_vectors:"pattern_silver",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:null},{key:"N",basic_once_vectors:"pattern_knight",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:1},{key:"L",basic_once_vectors:null,basic_repeat_vectors:"pattern_pawn",promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:0},{key:"P",basic_once_vectors:"pattern_pawn",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:0}]}},{key:"pattern_plus",get:function(){return[null,[0,-1],null,[-1,0],[1,0],null,[0,1],null]}},{key:"pattern_x",get:function(){return[[-1,-1],null,[1,-1],null,null,null,[-1,1],null,[1,1]]}},{key:"pattern_silver",get:function(){return[[-1,-1],[0,-1],[1,-1],null,null,null,[-1,1],null,[1,1]]}},{key:"pattern_gold",get:function(){return[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],null,[0,1],null]}},{key:"pattern_king",get:function(){return[[-1,-1],[0,-1],[1,-1],[-1,0],null,[1,0],[-1,1],[0,1],[1,1]]}},{key:"pattern_knight",get:function(){return[[-1,-2],[1,-2]]}},{key:"pattern_pawn",get:function(){return[[0,-1]]}}]),n}(n.n(f).a);e.argv[1]}).call(this,n(172),"/index.js")},653:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return f}));n(18),n(10);var r=n(83),c=n(84),_=n(13),l=n.n(_),h=n(85),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(r.a)(this,e),this.raw_body=t,this.header={}}return Object(c.a)(e,[{key:"parse",value:function(){}},{key:"location_by_offset",value:function(e){return this.base_location.advance(e)}},{key:"board",get:function(){console.warn("not implemented")}},{key:"hold_pieces",get:function(){return l.a.reduce(h.a.values,(function(a,e){return a[e.key]={},a}),{})}},{key:"turn_offset_min",get:function(){return 0}},{key:"turn_offset_max",get:function(){return this.move_infos.length}},{key:"turn_base",get:function(){return 0}},{key:"move_infos",get:function(){console.warn("not implemented")}},{key:"comments_pack",get:function(){return null}}]),e}();e.argv[1]}).call(this,n(172),"/index.js")},72:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return m}));n(30),n(31),n(10),n(295),n(38);var r=n(83),c=n(84),_=n(230),l=n(231),h=n(173),f=n(232);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var m=function(e){Object(_.a)(n,e);var t=d(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"view_mode",name:"再生"},{key:"play_mode",name:"操作"},{key:"edit_mode",name:"編集"}]}}]),n}(n.n(f).a);e.argv[1]===o&&(console.log(m.fetch("simple").key),console.log(m.fetch("simple").name))}).call(this,n(172),"/index.js")},73:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return m}));n(30),n(31),n(10),n(295),n(38);var r=n(83),c=n(84),_=n(230),l=n(231),h=n(173),f=n(232);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var m=function(e){Object(_.a)(n,e);var t=d(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"is_bg_variant_none",name:"none"},{key:"is_bg_variant_a",name:"木1"},{key:"is_bg_variant_b",name:"木2"},{key:"is_bg_variant_c",name:"紙1"},{key:"is_bg_variant_d",name:"紙2"},{key:"is_bg_variant_e",name:"紙3"},{key:"is_bg_variant_f",name:"布1"}]}}]),n}(n.n(f).a);e.argv[1]===o&&(console.log(m.fetch("is_bg_variant_a").key),console.log(m.fetch("is_bg_variant_a").name))}).call(this,n(172),"/index.js")},74:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return m}));n(30),n(31),n(10),n(295),n(38);var r=n(83),c=n(84),_=n(230),l=n(231),h=n(173),f=n(232);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var m=function(e){Object(_.a)(n,e);var t=d(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"is_pi_variant_none",name:"none"},{key:"is_pi_variant_a1by",name:"ゴシック(1文字)"},{key:"is_pi_variant_a2by",name:"ゴシック(2文字)"},{key:"is_pi_variant_b",name:"紙面風"},{key:"is_pi_variant_c",name:"図案駒(画像)"},{key:"is_pi_variant_d",name:"orangain/shogi-piece-images"},{key:"is_pi_variant_e",name:"プチッチ(画像・暗め)"}]}}]),n}(n.n(f).a);e.argv[1]===o&&(console.log(m.fetch("is_pi_variant_a1by").key),console.log(m.fetch("is_pi_variant_a1by").name))}).call(this,n(172),"/index.js")},804:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return v}));n(18),n(10);var r=n(83),c=n(84),_=n(13),l=n.n(_),h=n(559),f=n(233),d=n(177),m=n(85),y=n(234),v=function(){function e(t){Object(r.a)(this,e),this.mediator=t}return Object(c.a)(e,[{key:"to_s",get:function(){var e=this.__base_parts;return e.push(this.mediator.display_turn+1),e.join(" ")}},{key:"to_s_without_turn",get:function(){return this.__base_parts.join(" ")}},{key:"to_board_sfen",get:function(){var e=this,t=[];return l.a.times(y.a.dimension,(function(n){var o="",r=0;l.a.times(y.a.dimension,(function(t){var c=f.a.fetch([t,n]),_=e.mediator.board.lookup(c);if(l.a.isNil(_))r++;else{r>=1&&(o+=r,r=0),_.promoted&&(o+="+");var h=_.piece.key;"white"===_.location.key&&(h=h.toLowerCase()),o+=h}})),r>=1&&(o+=r),t.push(o)})),t.join("/")}},{key:"to_hold_pieces",get:function(){var e=this,t=m.a.values.map((function(t){var n=e.mediator.hold_pieces[t.key],o=h.a.values.map((function(e){var o=n[e.key]||0,r="";if(0===o)return null;o>=2&&(r+=o);var c=e.key;return r+=c="white"===t.key?c.toLowerCase():c.toUpperCase()}));return l.a.compact(o).join("")})).join("");return l.a.isEmpty(t)&&(t="-"),t}},{key:"__base_parts",get:function(){var e=[];return e.push(this.to_board_sfen),e.push(this.mediator.current_location.key[0]),e.push(this.to_hold_pieces),e}}]),e}();if(e.argv[1]===o){var k=new d.a;k.source="position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d",k.current_turn=1,k.run();var w=new v(k);console.log(w.to_s)}}).call(this,n(172),"/index.js")},85:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return m}));n(30),n(31),n(295),n(18),n(10);var r=n(83),c=n(84),_=n(230),l=n(231),h=n(173),f=n(232);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var m=function(e){Object(_.a)(n,e);var t=d(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"advance",value:function(e){return n.cycle_lookup(this.code+e)}},{key:"flip_if",value:function(e){return this.advance(e?1:0)}},{key:"flip",get:function(){return n.cycle_lookup(this.code+1)}}],[{key:"cycle_lookup",value:function(e){return"number"!=typeof e&&alert("ArgumentError: ".concat(e)),n.lookup(Math.abs(e)%n.values.length)}},{key:"define",get:function(){return[{key:"black",name:"☗",char_key:"b",value_sign:1,position_key:"is_position_south"},{key:"white",name:"☖",char_key:"w",value_sign:-1,position_key:"is_position_north"}]}}]),n}(n.n(f).a);e.argv[1]===o&&(console.log(m.cycle_lookup(-1)),console.log(m.fetch("black")),m.values.map((function(e){console.log(e)})),console.log(m.fetch("black").flip),console.log(m.fetch("white").flip))}).call(this,n(172),"/index.js")}}]);