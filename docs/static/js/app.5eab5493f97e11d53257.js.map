{"version":3,"sources":["webpack:///./src/point.js","webpack:///./src/parser_base.js","webpack:///src/components/ShogiPlayer.vue","webpack:///./src/battler.js","webpack:///./src/memory_record.js","webpack:///./src/options.md","webpack:///./src/App.vue?9b36","webpack:///./src/components/piece_stand.vue?30b5","webpack:///./src/mediator.js","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/piece.js","webpack:///./src/components/piece_stand.vue","webpack:///./src/sfen_serializer.js","webpack:///./src/components/ShogiPlayer.vue?a01d","webpack:///./src/藤井聡太四段_vs_澤田真吾六段.kif","webpack:///./src/board.js","webpack:///./src/usage.md","webpack:///./src/location.js","webpack:///src/components/piece_stand.vue","webpack:///./src/components/ShogiPlayer.vue","webpack:///./src/kif_parser.js","webpack:///./src/sfen_parser.js","webpack:///./src/assets/made-with-bulma.png","webpack:///src/App.vue"],"names":["_board","__webpack_require__","Point","value","_classCallCheck3","default","this","x","y","_parse_from_string2","_parse_from_string","_parse_from_string3","_slicedToArray3","_value","_ref","_x","_y","v","_freeze2","s","_this","_s$split$map","replace","e","_replace_table","split","map","Number","_s$split$map2","Board","dimension","toString","１","２","３","４","５","６","７","８","９","一","二","三","四","五","六","七","八","九","a","b","c","d","f","g","h","i","process","argv","__filename","console","log","fetch","key","_location","ParserBase","kifu_body","header","offset","turn_min","komaochi_p","Location","warn","_map2","values","move_infos","length","_mediator","PieceStand","_piece_stand2","mediator_update","keyboard_operation","activeElement","metaKey","code","move_to_previous","preventDefault","move_to_next","Mediator","current_turn","run","current_real_turn","focus","focus_to_slide","turn_max","_point","_piece","Battler","attributes","_assign2","piece","point","location","promoted","promoted_name","name","battler","Piece","location_key","MemoryRecord","values_map","get","element","lookup","Error","_values_map","define","_values","_from2","module","exports","esExports","render","_vm","_h","$createElement","_c","_self","attrs","id","_m","_v","staticClass","kif_body","turn_start","global_keyboard_operation","controller_show","slider_show","sfen_show","domProps","innerHTML","_s","usage_md","options_md","staticRenderFns","data-target","href","src","alt","width","height","__webpack_exports__","class","$parent","env","turn_active","mediator","location_next","_f","_l","ref","piece_key","count","_e","_sfen_parser","_kif_parser","_battler3","_sfen_serializer","any_parser","current_field","hold_pieces","move_info","test","SfenParser","KifParser","parse","field","num","_lodash2","times","m","stroke_piece","set","delete","undefined","origin_point","promoted_trigger","str","klass","push","index","turn_clamp","SfenSerializer","to_s","location_by_offset","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_f2f6dde6_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","__vue_styles__","ssrContext","Component","normalizeComponent","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default","_vue2","config","productionTip","el","template","components","App","_get3","__proto__","_getPrototypeOf2","call","toUpperCase","find","alias_name","includes","promoted_alias_name","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3d7c7146_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_piece_stand_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_piece_stand_vue___default","parts","to_baord_sfen","to_hold_pieces","join","rows","space","toLowerCase","_this2","location_info","compact","isEmpty","sfen_serializer","enable","board_turn","on","click","$event","stopPropagation","move_to","cell_class","cell_view","move_to_first","move_to_last","directives","rawName","expression","modifiers","number","type","min","max","__r","_n","target","blur","$forceUpdate","to_sfen","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2a63bcc4_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ShogiPlayer_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ShogiPlayer_vue___default","_parser_base","sfen_parser","regexp","_xregexp2","list","forEach","md","kif_lookup","kif_parser","location_base","_battler","regex","exec","__location_by_upper_or_lower_case","_this3","_hold_pieces","piece_char","_this4","p","_ShogiPlayer","marked","setOptions","Renderer","ShogiPlayer","_ShogiPlayer2"],"mappings":"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","file":"static/js/app.5eab5493f97e11d53257.js","sourcesContent":["import { Board } from \"./board\"\n\nclass Point {\n  static fetch(v) {\n    return Object.freeze(new Point(v))\n  }\n\n  constructor(value) {\n    let x, y\n    if (typeof value === \"string\") {\n      [x, y] = this._parse_from_string(value)\n    } else {\n      [x, y] = value\n    }\n    [this._x, this._y] = [x, y]\n  }\n\n  get key() {\n    return [this._x, this._y].toString()\n  }\n\n  get x() {\n    return this._x\n  }\n\n  get y() {\n    return this._y\n  }\n\n  _parse_from_string(s) {\n    s = s.replace(/([１-９一二三四五六七八九a-z])/g, (e) => this._replace_table[e])\n    const [x, y] = s.split(\"\").map((e) => Number(e))\n    return [Board.dimension - x, y - 1]\n  }\n\n  get _replace_table() {\n    /* eslint-disable object-property-newline, key-spacing */\n    return {\n      \"１\": 1, \"２\": 2, \"３\": 3, \"４\": 4, \"５\": 5, \"６\": 6, \"７\": 7, \"８\": 8, \"９\": 9,\n      \"一\": 1, \"二\": 2, \"三\": 3, \"四\": 4, \"五\": 5, \"六\": 6, \"七\": 7, \"八\": 8, \"九\": 9,\n      \"a\":  1, \"b\":  2, \"c\":  3, \"d\":  4, \"e\":  5, \"f\":  6, \"g\":  7, \"h\":  8, \"i\":  9,\n    }\n  }\n}\n\nexport { Point }\n\nif (process.argv[1] === __filename) {\n  console.log(Point.fetch(\"6a\").key)\n  console.log(Point.fetch([1, 2]).key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/point.js","import { Location } from \"./location\"\n\nclass ParserBase {\n  constructor() {\n    this.kifu_body = null\n    this.header = {}\n  }\n\n  parse() {\n  }\n\n  get field() {\n    console.warn(\"not implemented\")\n  }\n\n  get hold_pieces() {\n    return new Map(Location.values.map((e) => [e.key, new Map()]))\n  }\n\n  get turn_min() {\n    return 0\n  }\n\n  get turn_max() {\n    return this.turn_min + this.move_infos.length\n  }\n\n  location_by_offset(offset) {\n    const index = this.turn_min + offset + (this.komaochi_p ? 1 : 0)\n    let key = null\n    if ((index % 2) === 0) {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  get move_infos() {\n    console.warn(\"not implemented\")\n  }\n}\n\nexport { ParserBase }\n\nif (process.argv[1] === __filename) {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/parser_base.js","<template>\n<div class=\"shogi-player\">\n  <p>{{mediator.current_real_turn}}手目</p>\n  <div class=\"board_container board_turn\" :class=\"{enable: board_turn}\">\n    <PieceStand :location_key=\"'white'\"/>\n    <div class=\"flex_item board_wrap\">\n      <div class=\"overlay_navi previous\" @click.stop=\"move_to(-1)\"></div>\n      <div class=\"overlay_navi next\" @click.stop=\"move_to(1)\"></div>\n      <table>\n        <tr v-for=\"y in mediator.dimension\">\n          <template v-for=\"x in mediator.dimension\">\n            <td :class=\"mediator.cell_class(x -1, y - 1)\">\n              {{mediator.cell_view(x - 1, y - 1)}}\n            </td>\n          </template>\n        </tr>\n      </table>\n    </div>\n    <PieceStand :location_key=\"'black'\"/>\n  </div>\n  <template v-if=\"controller_show\">\n    <div class=\"sp-controllers buttons has-addons is-centered\">\n      <button ref=\"first\"    class=\"button first\"      @click.stop=\"move_to_first\">|◀</button>\n      <button ref=\"previous\" class=\"button previous\"   @click.stop=\"move_to_previous\">◀</button>\n      <button ref=\"next\"     class=\"button next\"       @click.stop=\"move_to_next\">▶</button>\n      <button ref=\"last\"     class=\"button last\"       @click.stop=\"move_to_last\">▶|</button>\n      <button                class=\"button board_turn\" @click.stop=\"board_turn = !board_turn\">{{board_turn ? '&#x21BA;' : '&#x21BB;'}}</button>\n    </div>\n  </template>\n  <template v-if=\"slider_show\">\n    <input type=\"range\" v-model.number=\"current_turn\" :min=\"mediator.any_parser.turn_min\" :max=\"mediator.any_parser.turn_max\" ref=\"slider\" />\n  </template>\n  <div v-if=\"sfen_show\">\n    {{mediator.to_sfen}}\n  </div>\n  <template v-if=\"debug_mode\">\n    <p>{{mediator.hold_pieces}}</p>\n    <p>次の手番:{{mediator.location_next.key}}</p>\n    <p>Sfen:{{mediator.to_sfen}}</p>\n  </template>\n</div>\n</template>\n\n<script>\nimport { Mediator } from \"../mediator\"\nimport PieceStand from \"./piece_stand\"\nimport _ from \"lodash\"\n\n// for vue template\n// import Vue from 'vue'\n// import lodash from \"lodash\"\n// Object.defineProperty(Vue.prototype, '$lodash', {value: lodash})\n\n/* eslint-disable no-new */\nexport default {\n  name: 'ShogiPlayer',\n\n  /* eslint-disable */\n  props: {\n    kifu_body:                { type: String,  default: \"position startpos\", },\n    turn_start:               { type: Number,  default: 0,                   },\n    global_keyboard_operation:  { type: Boolean, default: false                },\n    location_hash_embed_turn: { type: Boolean, default: false,               },\n    controller_show:          {                default: false,               },\n    slider_show:              { type: Boolean, default: false,               },\n    sfen_show:                { type: Boolean, default: false,               },\n    debug_mode:               { type: Boolean, default: false,               }, // process.env.NODE_ENV !== 'production'\n  },\n  /* eslint-enable */\n\n  components: {\n    PieceStand,\n  },\n\n  data() {\n    return {\n      current_turn: 0,\n      mediator: null,\n      board_turn: false,\n      env: process.env.NODE_ENV,\n    }\n  },\n\n  created() {\n    this.current_turn = this.turn_start || 0\n    this.mediator_update()\n    document.addEventListener(\"keydown\", this.keyboard_operation)\n  },\n\n  watch: {\n    current_turn: function () {\n      this.mediator_update()\n    },\n    kifu_body: function () {\n      this.mediator_update()\n    },\n  },\n\n  methods: {\n    keyboard_operation: function (e) {\n      if (this.env !== \"production\") {\n        console.log(document.activeElement)\n        console.log(e.shiftKey, e.ctrlKey, e.altKey, e.metaKey)\n        console.log(\"e\", e)\n        console.log(\"key\", e.key)\n        console.log(\"code\", e.code)\n      }\n\n      if (!this.global_keyboard_operation) {\n        return\n      }\n\n      const dom = document.activeElement\n      const controllers = [this.$refs.first, this.$refs.previous, this.$refs.next, this.$refs.last] // FIXME: 指定DOMの下にあるか？の方法がわかればもっと簡潔になる\n      if (!(dom === undefined || dom.tagName === \"BODY\" || _.includes(controllers, dom))) {\n        return\n      }\n\n      if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n        this.move_to_previous()\n        e.preventDefault()\n      }\n\n      if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n        this.move_to_next()\n        e.preventDefault()\n      }\n\n      // let gap = null\n      // let force_value = null\n      //\n      // if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n      //   gap = 1\n      // }\n      // if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n      //   gap = -1\n      // }\n      // if (e.key === \"PageUp\") {\n      //   gap = -10\n      // }\n      // if (e.key === \"PageDown\") {\n      //   gap = 10\n      // }\n      // if (e.shiftKey || e.ctrlKey || e.altKey || e.metaKey) {\n      //   if (gap) {\n      //     gap *= 10\n      //   }\n      // }\n      // if (e.key === \"[\" || e.key === \"Home\" || e.code === \"Escape\") {\n      //   force_value = this.mediator.any_parser.turn_min\n      // }\n      // if (e.key === \"]\" || e.key === \"End\") {\n      //   force_value = this.mediator.any_parser.turn_max\n      // }\n      //\n      // let v = this.current_turn\n      // if (gap !== null) {\n      //   v += gap\n      // }\n      // if (force_value !== null) {\n      //   v = force_value\n      // }\n      // if (v < this.mediator.any_parser.turn_min) {\n      //   v = this.mediator.any_parser.turn_min\n      // }\n      // if (this.mediator.any_parser.turn_max < v) {\n      //   v = this.mediator.any_parser.turn_max\n      // }\n      // this.current_turn = v\n      //\n      // if (gap !== null || force_value !== null) {\n      //   e.preventDefault()\n      // }\n    },\n\n    mediator_update() {\n      this.mediator = new Mediator()\n      this.mediator.kifu_body = this.kifu_body || \"position startpos\"\n      this.mediator.current_turn = this.current_turn\n      this.mediator.run()\n      this.current_turn = this.mediator.current_real_turn\n      if (this.location_hash_embed_turn) {\n        document.location.hash = this.current_turn\n      }\n    },\n\n    move_to(sign) {\n      if (this.board_turn) {\n        sign *= -1\n      }\n      if (sign >= 1) {\n        this.move_to_next()\n      } else {\n        this.move_to_previous()\n      }\n    },\n\n    move_to_previous() {\n      if (this.current_turn > this.mediator.any_parser.turn_min) {\n        this.current_turn--\n      }\n      if (this.$refs.previous) {\n        this.$refs.previous.focus()\n      } else {\n        this.focus_to_slide()\n      }\n    },\n\n    move_to_next() {\n      if (this.current_turn < this.mediator.any_parser.turn_max) {\n        this.current_turn++\n      }\n      if (this.$refs.next) {\n        this.$refs.next.focus()\n      } else {\n        this.focus_to_slide()\n      }\n    },\n\n    move_to_first() {\n      this.current_turn = this.mediator.any_parser.turn_min\n      if (this.$refs.first) {\n        this.$refs.first.focus()\n      } else {\n        this.focus_to_slide()\n      }\n    },\n\n    move_to_last() {\n      this.current_turn = this.mediator.any_parser.turn_max\n      if (this.$refs.last) {\n        this.$refs.last.focus()\n      } else {\n        this.focus_to_slide()\n      }\n    },\n\n    focus_to_slide() {\n      if (this.$refs.slider) {\n        this.$refs.slider.focus()\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"sass\">\n  @import \"ShogiPlayer\"\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ShogiPlayer.vue","import { Point } from './point'\nimport { Piece } from './piece'\n\nclass Battler {\n  constructor(attributes) {\n    this.attributes = Object.assign({}, attributes)\n  }\n\n  get piece() {\n    return this.attributes.piece\n  }\n\n  get point() {\n    return this.attributes.point\n  }\n\n  get location() {\n    return this.attributes.location\n  }\n\n  get promoted() {\n    return this.attributes.promoted\n  }\n\n  set promoted(v) {\n    this.attributes.promoted = v\n  }\n\n  get name() {\n    if (this.promoted) {\n      return this.piece.promoted_name\n    }\n    return this.piece.name\n  }\n}\n\nexport { Battler }\n\nif (process.argv[1] === __filename) {\n  const battler = new Battler({\n    point: new Point([1, 2]),\n    piece: Piece.fetch(\"P\"),\n    promoted: true,\n    location_key: \"white\",\n  })\n  console.log(battler.name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/battler.js","class MemoryRecord {\n  static get define() {\n    console.warn(\"not implemented\")\n\n    return [\n      { key: \"(key_x)\", },\n      { key: \"(key_y)\", },\n    ]\n  }\n\n  static lookup(key) {\n    return this.values_map.get(key)\n  }\n\n  static fetch(key) {\n    const element = this.lookup(key)\n    if (!element) {\n      throw new Error(`Key not found: ${key}`)\n    }\n    return element\n  }\n\n  static get values_map() {\n    this._values_map = this._values_map || new Map(this.define.map((e, i) => [e.key, Object.freeze(new this(Object.assign({}, e, {code: i})))]))\n    return this._values_map\n  }\n\n  static get values() {\n    this._values = this._values || Array.from(this.values_map.values())\n    return this._values\n  }\n\n  constructor(attributes) {\n    this.attributes = attributes\n  }\n\n  get key() {\n    return this.attributes.key\n  }\n\n  get name() {\n    return this.attributes.name || this.key.toString()\n  }\n\n  get code() {\n    return this.attributes.code\n  }\n}\n\nexport { MemoryRecord }\n\nif (process.argv[1] === __filename) {\n  console.log(MemoryRecord.values)\n  console.log(MemoryRecord.lookup(\"(key_x)\").name)\n  console.log(MemoryRecord.lookup(\"(key_x)\").code)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/memory_record.js","module.exports = \"| 名前                       | 意味                        | 備考                                                 | 初期値     |\\n|----------------------------|-----------------------------|------------------------------------------------------|------------|\\n| kifu_body                  | 棋譜の本体                  | KIF と SFEN に対応。駒落ちは SFEN のみ | position startpos       |\\n| turn_start                 | N手目                       | -1 を指定すると最終手になる                                       | 0 |\\n| controller_show            | 操作用のボタン類を表示する            | | false |\\n| slider_show                | スライダーを表示する                  | おすすめ | false |\\n| sfen_show                  | 下に sfen 表記を表示                  | 主に局面ペディア用 | false |\\n| global_keyboard_operation  | キーボード操作を奪う        | 盤にフォーカスしていないときでも左右が反応するようになる   | false |\\n| location_hash_embed_turn   | URLのハッシュに手番を埋める | 固定URLを作りたいときの実験用の機能 | false |\\n| debug_mode                 | デバッグモード |  | false |\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/options.md\n// module id = GL4m\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('section',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"examples\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"実行例\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"container has-text-centered\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"藤井聡太四段 vs 澤田真吾六段\")]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第43期棋王戦予選\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":_vm.kif_body,\"turn_start\":121,\"global_keyboard_operation\":true,\"controller_show\":true,\"slider_show\":true,\"sfen_show\":true}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"小池重明 vs 加藤一二三十段\")]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"加藤一二三の駒落道場\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1 moves 8c8d 7g7f 7a6b 5g5f 8d8e 8h7g 5c5d 2h5h 6b5c 7i6h 5a4b 5i4h 3a3b 4h3h 4c4d 5f5e 3b4c 5e5d 4c5d 6h5g 5d6e 5g5f 6e7f 5f5e 7f6g+ P*5d 5c6b 5h5f 6g7g 8i7g B*3d 5f6f P*5b 6i7i 8b8d 5e4d 8d7d P*7h 7d5d S*4c 3d4c 4d4c+ 4b4c B*7f 5b5c 7i6h 4c3b 6h5h P*4c 7f5d 5c5d 8g8f B*7i 8f8e P*8b 6f8f 7i3e+ 8e8d S*7b 8f8i 3e4e P*6g 7c7d 9g9f 4e5f 8i8f 5f5e 9f9e 5e6d 8f8i 7d7e 7g8e 5d5e 8e9c+ 8a9c 9e9d P*9h 9i9h 6d6e 8i8f 6e9h 9d9c+ 9a9c R*9a 9h6e 9a9c+ 5e5f 5h4h L*9b 9c8b P*8a N*7g 6e7d 8b9a S*8b 9a8b 8a8b S*6e 7d9f 8f5f 9f7h 7g8e 7h6g P*7c 7b8a P*9c 6c6d P*6h 6g8e 9c9b+ 8a9b 7c7b+ 6a7b 6e5d N*4b 5d5c+ P*5d 5c6b 7b6b L*2f R*6i L*2e N*3a 5f4f S*3d 3g3f 6b5c 2i3g 4c4d 4f5f 2c2d 2e2d P*2c 3f3e 3d3e 2d2c+ 3a2c 2f2c+ 3b2c P*3f 3e2d 5f5i 6i6h+ 1g1f L*3d N*2h 4d4e 5i5h 6h7g 2g2f 1c1d 2f2e 2d1c 3g4e 5c4d S*4f P*2f 4e5c+ L*4e 4f5g 8e7d P*6e 7d6e P*5f 5d5e 4h3g 5e5f 5g4h P*4f 3g4f 4e4f',\"turn_start\":-1,\"slider_show\":true,\"sfen_show\":true}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"藤井猛六段 vs 井上慶太六段\")]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第54期順位戦B級2組7回戦\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"turn_start\":0,\"slider_show\":true}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"羽生善治名人 vs 渡辺明竜王\")]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第21期竜王戦七番勝負第4局\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 2g2f 8c8d 2f2e 8d8e 6i7h 4a3b 2e2d 2c2d 2h2d P*2c 2d2h 7a7b 3i3h 3c3d 9g9f 9c9d 1g1f 1c1d 3h2g 8e8f 8g8f 8b8f P*8g 8f8d 2g3f 5a5b 7g7f 7c7d 8h2b+ 3a2b 7i8h 7b7c 8h7g 7c6d 3f4e 7d7e 4e5f 2b3c 6g6f 3c4d 5f6g 6a7b 5i6h 8a7c 4i5h 2a3c 6h7i 7e7f 6g7f 4d5e P*7e 9d9e B*7d P*8h 7i8h 7b8c 9f9e 8c7d 7e7d 8d7d P*7e 7d8d 5h6g P*7d 7e7d 8d7d P*7e 6d7e 7f7e 7d7e 7g7f 7e7d S*7e 7d4d P*7d 4d4g+ P*2d 2c2d 7d7c+ 4g4i 2h2d P*2c 2d3d 4c4d P*7i 5b4c 3d3e S*4e 6g5f P*7g 8i7g P*3d 3e4e 3c4e 5f5e R*2h N*3f 2h7h+ 8h9g 4e5g+ 5e4d 4i4d S*5b 4c5d 7i7h 4d4i G*6e 5d4e R*4d 4e5f 4d4i G*4h S*3h 4h4i R*5e 5f4f 3h4i G*4e P*4g 5g4g P*4h 4g3g 2i3g 4f3g 5e4e R*8i G*3h 3g3f G*4f 3f2f 9i9h 8i4i+ P*3i S*2i 3h2h 4i3i',\"turn_start\":-1,\"slider_show\":true}})],1)])])])])]),_vm._v(\" \"),_c('section',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"usage\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"導入方法\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.usage_md)}})])]),_vm._v(\" \"),_c('section',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"options\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"オプション\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.options_md)}})])]),_vm._v(\" \"),_vm._m(2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"hero is-primary\"},[_c('div',{staticClass:\"hero-head\"},[_c('nav',{staticClass:\"navbar\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"navbar-brand\"},[_c('span',{staticClass:\"navbar-burger burger\",attrs:{\"data-target\":\"navbarMenuHeroA\"}},[_c('span'),_vm._v(\" \"),_c('span'),_vm._v(\" \"),_c('span')])]),_vm._v(\" \"),_c('div',{staticClass:\"navbar-menu\",attrs:{\"id\":\"navbarMenuHeroA\"}},[_c('div',{staticClass:\"navbar-end\"},[_c('a',{staticClass:\"navbar-item\",attrs:{\"href\":\"https://github.com/akicho8/shogi-player\"}},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-github\"})]),_vm._v(\" \"),_c('span',[_vm._v(\"Github\")])])])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"hero-body\"},[_c('div',{staticClass:\"container has-text-centered\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"\\n          shogi-player\\n        \")]),_vm._v(\" \"),_c('h2',{staticClass:\"subtitle\"},[_vm._v(\"\\n          Document (作成中)\\n        \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"hero-foot\"},[_c('nav',{staticClass:\"tabs\"},[_c('div',{staticClass:\"container\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"#summary\"}},[_vm._v(\"概要\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"#examples\"}},[_vm._v(\"実行例\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"#usage\"}},[_vm._v(\"導入方法\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"#options\"}},[_vm._v(\"オプション\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"summary\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"概要\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('p',[_vm._v(\"\\n          これはブラウザ上で動く将棋の棋譜を再生するプログラムで次の特徴があります\\n        \")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"Flash 未使用\")]),_vm._v(\" \"),_c('li',[_vm._v(\"npm でインストール可\")]),_vm._v(\" \"),_c('li',[_vm._v(\"KIF と SFEN フォーマットに対応\")])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('footer',{staticClass:\"footer\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column has-text-centered\"},[_c('a',{attrs:{\"href\":\"https://github.com/akicho8/shogi-player\"}},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-github\"})]),_c('span',[_vm._v(\"Github\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"column has-text-centered\"},[_c('a',{attrs:{\"href\":\"https://bulma.io\"}},[_c('img',{attrs:{\"src\":require(\"./assets/made-with-bulma.png\"),\"alt\":\"Made with Bulma\",\"width\":\"128\",\"height\":\"24\"}})])])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f2f6dde6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = IBs/\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex_item piece_stand\",class:[(\"location_\" + _vm.location_key), _vm.$parent.env, {turn_active: _vm.$parent.mediator.location_next.key === _vm.location_key}]},[_c('ul',[_c('li',{staticClass:\"location_mark\"},[_vm._v(_vm._s(_vm._f(\"location_name\")(_vm.location_key)))]),_vm._v(\" \"),_vm._l((_vm.hold_pieces),function(ref){\nvar piece_key = ref[0];\nvar count = ref[1];\nreturn [_c('li',[_c('span',{staticClass:\"piece_name\"},[_vm._v(_vm._s(_vm._f(\"piece_name\")(piece_key)))]),_vm._v(\" \"),(count >= 2)?[_c('span',{staticClass:\"piece_count\"},[_vm._v(_vm._s(count))])]:_vm._e()],2)]})],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3d7c7146\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/piece_stand.vue\n// module id = Lpg5\n// module chunks = 1 2","import _ from \"lodash\"\n\nimport { SfenParser } from \"./sfen_parser\"\nimport { KifParser } from \"./kif_parser\"\nimport { Board } from \"./board\"\nimport { Point } from \"./point\"\nimport { Battler } from \"./battler\"\nimport { SfenSerializer } from \"./sfen_serializer\"\n\nclass Mediator {\n  constructor() {\n    this.any_parser = null\n    this.current_turn = null\n    this.current_field = null\n    this.hold_pieces = null\n    this.move_info = null\n\n    this.env = process.env.NODE_ENV\n    this.kifu_body = \"position startpos\"\n  }\n\n  run() {\n    if (/position/.test(this.kifu_body)) { // FIXME: この判定はしょぼい\n      this.any_parser = new SfenParser()\n    } else {\n      this.any_parser = new KifParser()\n    }\n\n    this.any_parser.kifu_body = this.kifu_body\n    this.any_parser.parse()\n\n    this.current_field = this.any_parser.field\n    this.hold_pieces = this.any_parser.hold_pieces\n    this.move_info = null\n\n    const move_infos = this.any_parser.move_infos\n\n    const num = this.current_real_turn - this.any_parser.turn_min\n    _(num).times((i) => {\n      const m = move_infos[i]\n      this.move_info = m\n      if (m.stroke_piece) {\n        const battler = new Battler({\n          piece: m.stroke_piece,\n          point: m.point,\n          promoted: m.promoted,\n          location: m.location,\n        })\n        {\n          const count = this.hold_pieces.get(m.location.key).get(battler.piece.key) - 1\n          if (count >= 1) {\n            this.hold_pieces.get(m.location.key).set(battler.piece.key, count)\n          } else {\n            this.hold_pieces.get(m.location.key).delete(battler.piece.key)\n          }\n        }\n        this.current_field.set(battler.point.key, battler)\n      } else {\n        {\n          const battler = this.current_field.get(m.point.key)\n          if (battler) {\n            if (this.hold_pieces.get(m.location.key) === undefined) {\n              this.hold_pieces.set(m.location_key, new Map())\n            }\n            const count = (this.hold_pieces.get(m.location.key).get(battler.piece.key) || 0) + 1\n            this.hold_pieces.get(m.location.key).set(battler.piece.key, count)\n          }\n        }\n        const battler = this.current_field.get(m.origin_point.key)\n        if (m.promoted_trigger) {\n          battler.promoted = true\n        }\n        this.current_field.delete(m.origin_point.key)\n        this.current_field.set(m.point.key, battler)\n      }\n    })\n  }\n\n  cell_view(x, y) {\n    const battler = this.current_field.get(Point.fetch([x, y]).key)\n    let str = \"\"\n    if (battler) {\n      str = battler.name\n    }\n    return str\n  }\n\n  cell_class(x, y) {\n    const battler = this.current_field.get(Point.fetch([x, y]).key)\n    let klass = []\n    if (battler) {\n      klass.push(`location_${battler.location.key}`)\n    }\n    if (this.move_info) {\n      const origin_point = this.move_info.origin_point\n      if (origin_point) {\n        if (origin_point.x === x && origin_point.y === y) {\n          klass.push(\"origin_point\")\n        }\n      }\n      const point = this.move_info.point\n      if (point.x === x && point.y === y) {\n        klass.push(\"current\")\n      }\n    }\n    return klass\n  }\n\n  turn_clamp(v) {\n    if (this.any_parser) {\n      if (v < this.any_parser.turn_min) {\n        v = this.any_parser.turn_min\n      }\n      if (this.any_parser.turn_max < v) {\n        v = this.any_parser.turn_max\n      }\n    }\n    return v\n  }\n\n  get dimension() {\n    return Board.dimension\n  }\n\n  // ruby style array index access\n  get current_real_turn() {\n    let index = this.current_turn\n    if (index < 0) {\n      index += this.any_parser.turn_max + 1\n    }\n    return this.turn_clamp(index)\n  }\n\n  get to_sfen() {\n    return (new SfenSerializer(this)).to_s\n  }\n\n  get location_next() {\n    return this.any_parser.location_by_offset(this.current_real_turn)\n  }\n}\n\nexport { Mediator }\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediator.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f2f6dde6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f2f6dde6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport 'bulma/bulma.sass'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import { MemoryRecord } from \"./memory_record\"\n\nclass Piece extends MemoryRecord {\n  static get define() {\n    return [\n      { key: \"K\", name: \"玉\", alias_name: \"王\", promoted_name: null, promoted_alias_name: null, },\n      { key: \"R\", name: \"飛\", alias_name: null, promoted_name: \"龍\", promoted_alias_name: \"竜\", },\n      { key: \"B\", name: \"角\", alias_name: null, promoted_name: \"馬\", promoted_alias_name: null, },\n      { key: \"G\", name: \"金\", alias_name: null, promoted_name: null, promoted_alias_name: null, },\n      { key: \"S\", name: \"銀\", alias_name: null, promoted_name: \"全\", promoted_alias_name: null, },\n      { key: \"N\", name: \"桂\", alias_name: null, promoted_name: \"圭\", promoted_alias_name: null, },\n      { key: \"L\", name: \"香\", alias_name: null, promoted_name: \"杏\", promoted_alias_name: null, },\n      { key: \"P\", name: \"歩\", alias_name: null, promoted_name: \"と\", promoted_alias_name: null, },\n    ]\n  }\n\n  static lookup(key) {\n    return super.lookup(key.toUpperCase())\n  }\n\n  static kif_lookup(key) {\n    return this.values.find((e) => [e.name, e.alias_name].includes(key))\n  }\n\n  static kif_promoted_lookup(key) {\n    return this.values.find((e) => [e.promoted_name, e.promoted_alias_name].includes(key))\n  }\n\n  get promoted_name() {\n    return this.attributes.promoted_name\n  }\n}\n\nexport { Piece }\n\nif (process.argv[1] === __filename) {\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.lookup(\"\"))\n  console.log(Piece.values)\n  console.log(Piece.values_map.get(\"K\"))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d7c7146\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./piece_stand.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./piece_stand.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./piece_stand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d7c7146\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./piece_stand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3d7c7146\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/piece_stand.vue\n// module id = QERr\n// module chunks = 1 2","import _ from \"lodash\"\n\nimport { Piece } from \"./piece\"\nimport { Point } from \"./point\"\nimport { Mediator } from \"./mediator\"\nimport { Location } from \"./location\"\nimport { Board } from \"./board\"\n\nclass SfenSerializer {\n  constructor(mediator) {\n    this.mediator = mediator\n  }\n\n  get to_s() {\n    const parts = []\n    parts.push(this.to_baord_sfen)\n    parts.push(this.mediator.location_next.key[0])\n    parts.push(this.to_hold_pieces)\n    parts.push(this.mediator.current_real_turn + 1)\n    return parts.join(\" \")\n  }\n\n  get to_baord_sfen() {\n    const rows = []\n    _.times(Board.dimension, (y) => {\n      let str = \"\"\n      let space = 0\n      _.times(Board.dimension, (x) => {\n        const point = Point.fetch([x, y])\n        const battler = this.mediator.current_field.get(point.key)\n        if (battler === undefined) {\n          space++\n        } else {\n          if (space >= 1) {\n            str += space\n            space = 0\n          }\n          if (battler.promoted) {\n            str += \"+\"\n          }\n          let key = battler.piece.key\n          if (battler.location.key === \"white\") {\n            key = key.toLowerCase()\n          }\n          str += key\n        }\n      })\n      if (space >= 1) {\n        str += space\n      }\n      rows.push(str)\n    })\n    return rows.join(\"/\")\n  }\n\n  get to_hold_pieces() {\n    let str = Location.values.map((location_info) => {\n      const hold_pieces = this.mediator.hold_pieces.get(location_info.key)\n      const values = Piece.values.map((e) => {\n        let count = hold_pieces.get(e.key) || 0\n        let str = \"\"\n        if (count === 0) {\n          return\n        }\n        if (count >= 2) {\n          str += count\n        }\n        let key = e.key\n        if (location_info.key === \"white\") {\n          key = key.toLowerCase()\n        } else {\n          key = key.toUpperCase()\n        }\n        str += key\n        return str\n      })\n      return _.compact(values).join(\"\")\n    }).join(\"\")\n\n    if (_.isEmpty(str)) {\n      str = \"-\"\n    }\n\n    return str\n  }\n}\n\nexport { SfenSerializer }\n\nif (process.argv[1] === __filename) {\n  const mediator = new Mediator()\n  mediator.kifu_body = \"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\"\n  mediator.current_turn = 1\n  mediator.run()\n  const sfen_serializer = new SfenSerializer(mediator)\n  console.log(sfen_serializer.to_s)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_serializer.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shogi-player\"},[_c('p',[_vm._v(_vm._s(_vm.mediator.current_real_turn)+\"手目\")]),_vm._v(\" \"),_c('div',{staticClass:\"board_container board_turn\",class:{enable: _vm.board_turn}},[_c('PieceStand',{attrs:{\"location_key\":'white'}}),_vm._v(\" \"),_c('div',{staticClass:\"flex_item board_wrap\"},[_c('div',{staticClass:\"overlay_navi previous\",on:{\"click\":function($event){$event.stopPropagation();_vm.move_to(-1)}}}),_vm._v(\" \"),_c('div',{staticClass:\"overlay_navi next\",on:{\"click\":function($event){$event.stopPropagation();_vm.move_to(1)}}}),_vm._v(\" \"),_c('table',_vm._l((_vm.mediator.dimension),function(y){return _c('tr',[_vm._l((_vm.mediator.dimension),function(x){return [_c('td',{class:_vm.mediator.cell_class(x -1, y - 1)},[_vm._v(\"\\n              \"+_vm._s(_vm.mediator.cell_view(x - 1, y - 1))+\"\\n            \")])]})],2)}))]),_vm._v(\" \"),_c('PieceStand',{attrs:{\"location_key\":'black'}})],1),_vm._v(\" \"),(_vm.controller_show)?[_c('div',{staticClass:\"sp-controllers buttons has-addons is-centered\"},[_c('button',{ref:\"first\",staticClass:\"button first\",on:{\"click\":function($event){$event.stopPropagation();_vm.move_to_first($event)}}},[_vm._v(\"|◀\")]),_vm._v(\" \"),_c('button',{ref:\"previous\",staticClass:\"button previous\",on:{\"click\":function($event){$event.stopPropagation();_vm.move_to_previous($event)}}},[_vm._v(\"◀\")]),_vm._v(\" \"),_c('button',{ref:\"next\",staticClass:\"button next\",on:{\"click\":function($event){$event.stopPropagation();_vm.move_to_next($event)}}},[_vm._v(\"▶\")]),_vm._v(\" \"),_c('button',{ref:\"last\",staticClass:\"button last\",on:{\"click\":function($event){$event.stopPropagation();_vm.move_to_last($event)}}},[_vm._v(\"▶|\")]),_vm._v(\" \"),_c('button',{staticClass:\"button board_turn\",on:{\"click\":function($event){$event.stopPropagation();_vm.board_turn = !_vm.board_turn}}},[_vm._v(_vm._s(_vm.board_turn ? '↺' : '↻'))])])]:_vm._e(),_vm._v(\" \"),(_vm.slider_show)?[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.current_turn),expression:\"current_turn\",modifiers:{\"number\":true}}],ref:\"slider\",attrs:{\"type\":\"range\",\"min\":_vm.mediator.any_parser.turn_min,\"max\":_vm.mediator.any_parser.turn_max},domProps:{\"value\":(_vm.current_turn)},on:{\"__r\":function($event){_vm.current_turn=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}})]:_vm._e(),_vm._v(\" \"),(_vm.sfen_show)?_c('div',[_vm._v(\"\\n    \"+_vm._s(_vm.mediator.to_sfen)+\"\\n  \")]):_vm._e(),_vm._v(\" \"),(_vm.debug_mode)?[_c('p',[_vm._v(_vm._s(_vm.mediator.hold_pieces))]),_vm._v(\" \"),_c('p',[_vm._v(\"次の手番:\"+_vm._s(_vm.mediator.location_next.key))]),_vm._v(\" \"),_c('p',[_vm._v(\"Sfen:\"+_vm._s(_vm.mediator.to_sfen))])]:_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a63bcc4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ShogiPlayer.vue\n// module id = eQlk\n// module chunks = 1 2","module.exports = \"先手の囲い：銀矢倉\\n後手の囲い：銀矢倉\\n先手の戦型：角換わり腰掛け銀\\n後手の戦型：角換わり腰掛け銀\\n手合割：平手\\n手数----指手---------消費時間--\\n1 ７六歩(77)   (00:00/00:00:00)\\n2 ８四歩(83)   (00:00/00:00:00)\\n3 ２六歩(27)   (00:00/00:00:00)\\n4 ３二金(41)   (00:00/00:00:00)\\n5 ７八金(69)   (00:00/00:00:00)\\n6 ８五歩(84)   (00:00/00:00:00)\\n7 ７七角(88)   (00:00/00:00:00)\\n8 ３四歩(33)   (00:00/00:00:00)\\n9 ６八銀(79)   (00:00/00:00:00)\\n10 ７七角成(22) (00:00/00:00:00)\\n11 ７七銀(68)   (00:00/00:00:00)\\n*▲戦型：角換わり\\n12 ２二銀(31)   (00:00/00:00:00)\\n13 ３八銀(39)   (00:00/00:00:00)\\n14 ６二銀(71)   (00:00/00:00:00)\\n15 ３六歩(37)   (00:00/00:00:00)\\n16 ３三銀(22)   (00:00/00:00:00)\\n17 ４六歩(47)   (00:00/00:00:00)\\n18 ６四歩(63)   (00:00/00:00:00)\\n19 ６八玉(59)   (00:00/00:00:00)\\n20 ６三銀(62)   (00:00/00:00:00)\\n21 ３七桂(29)   (00:00/00:00:00)\\n22 ４二玉(51)   (00:00/00:00:00)\\n23 ４七銀(38)   (00:00/00:00:00)\\n24 ７四歩(73)   (00:00/00:00:00)\\n25 ４八金(49)   (00:00/00:00:00)\\n26 ７三桂(81)   (00:00/00:00:00)\\n27 ２九飛(28)   (00:00/00:00:00)\\n28 ８一飛(82)   (00:00/00:00:00)\\n29 ６六歩(67)   (00:00/00:00:00)\\n30 ６二金(61)   (00:00/00:00:00)\\n31 ５六銀(47)   (00:00/00:00:00)\\n*▲戦型：角換わり腰掛け銀\\n32 ９四歩(93)   (00:00/00:00:00)\\n33 ９六歩(97)   (00:00/00:00:00)\\n34 １四歩(13)   (00:00/00:00:00)\\n35 １六歩(17)   (00:00/00:00:00)\\n36 ５四銀(63)   (00:00/00:00:00)\\n*△戦型：角換わり腰掛け銀\\n37 ７九玉(68)   (00:00/00:00:00)\\n38 ６三銀(54)   (00:00/00:00:00)\\n39 ８八玉(79)   (00:00/00:00:00)\\n40 ５四銀(63)   (00:00/00:00:00)\\n41 ２五歩(26)   (00:00/00:00:00)\\n42 ６三銀(54)   (00:00/00:00:00)\\n43 ６七銀(56)   (00:00/00:00:00)\\n*▲囲い：銀矢倉\\n44 ５四銀(63)   (00:00/00:00:00)\\n45 ５六歩(57)   (00:00/00:00:00)\\n46 ４四歩(43)   (00:00/00:00:00)\\n47 ５九飛(29)   (00:00/00:00:00)\\n48 ３一玉(42)   (00:00/00:00:00)\\n49 ５五歩(56)   (00:00/00:00:00)\\n50 ４三銀(54)   (00:00/00:00:00)\\n51 ５六銀(67)   (00:00/00:00:00)\\n52 ２二玉(31)   (00:00/00:00:00)\\n*△囲い：銀矢倉\\n53 ６九飛(59)   (00:00/00:00:00)\\n54 ３一玉(22)   (00:00/00:00:00)\\n55 ２九飛(69)   (00:00/00:00:00)\\n56 ２二玉(31)   (00:00/00:00:00)\\n57 ４五歩(46)   (00:00/00:00:00)\\n58 ４五歩(44)   (00:00/00:00:00)\\n59 ４五銀(56)   (00:00/00:00:00)\\n60 ８六歩(85)   (00:00/00:00:00)\\n61 ８六歩(87)   (00:00/00:00:00)\\n62 ８五歩打     (00:00/00:00:00)\\n63 ８五歩(86)   (00:00/00:00:00)\\n64 ９五歩(94)   (00:00/00:00:00)\\n65 ９五歩(96)   (00:00/00:00:00)\\n66 ７五歩(74)   (00:00/00:00:00)\\n67 ７五歩(76)   (00:00/00:00:00)\\n68 ６五歩(64)   (00:00/00:00:00)\\n69 ７六角打     (00:00/00:00:00)\\n70 ５二金(62)   (00:00/00:00:00)\\n71 ８六銀(77)   (00:00/00:00:00)\\n72 ６六歩(65)   (00:00/00:00:00)\\n73 ７七桂(89)   (00:00/00:00:00)\\n74 ４四歩打     (00:00/00:00:00)\\n75 ５六銀(45)   (00:00/00:00:00)\\n76 ３五歩(34)   (00:00/00:00:00)\\n77 ３五歩(36)   (00:00/00:00:00)\\n78 ８五桂(73)   (00:00/00:00:00)\\n79 ８五桂(77)   (00:00/00:00:00)\\n80 ３六歩打     (00:00/00:00:00)\\n81 ４五桂(37)   (00:00/00:00:00)\\n82 ４五歩(44)   (00:00/00:00:00)\\n83 ６四歩打     (00:00/00:00:00)\\n84 ７二桂打     (00:00/00:00:00)\\n85 ６三歩成(64) (00:00/00:00:00)\\n86 ６三金(52)   (00:00/00:00:00)\\n87 ４三角成(76) (00:00/00:00:00)\\n88 ４三金(32)   (00:00/00:00:00)\\n89 ５二銀打     (00:00/00:00:00)\\n90 ７六角打     (00:00/00:00:00)\\n91 ７七金(78)   (00:00/00:00:00)\\n92 ８七歩打     (00:00/00:00:00)\\n93 ８七金(77)   (00:00/00:00:00)\\n94 ６七角打     (00:00/00:00:00)\\n95 ６七銀(56)   (00:00/00:00:00)\\n96 ８七角成(76) (00:00/00:00:00)\\n97 ８七玉(88)   (00:00/00:00:00)\\n98 ６七歩成(66) (00:00/00:00:00)\\n99 ８九角打     (00:00/00:00:00)\\n100 ６六と(67)   (00:00/00:00:00)\\n101 ４三銀成(52) (00:00/00:00:00)\\n102 ７六金打     (00:00/00:00:00)\\n103 ８八玉(87)   (00:00/00:00:00)\\n104 ８六金(76)   (00:00/00:00:00)\\n105 ７九玉(88)   (00:00/00:00:00)\\n106 ７七金(86)   (00:00/00:00:00)\\n107 ６八歩打     (00:00/00:00:00)\\n108 ６七銀打     (00:00/00:00:00)\\n109 ６七角(89)   (00:00/00:00:00)\\n110 ６七と(66)   (00:00/00:00:00)\\n111 ３三全(43)   (00:00/00:00:00)\\n112 ３三玉(22)   (00:00/00:00:00)\\n113 ３四銀打     (00:00/00:00:00)\\n114 ４四玉(33)   (00:00/00:00:00)\\n115 ２二角打     (00:00/00:00:00)\\n116 ３三銀打     (00:00/00:00:00)\\n117 ３三銀(34)   (00:00/00:00:00)\\n118 ５五玉(44)   (00:00/00:00:00)\\n119 ３二銀(33)   (00:00/00:00:00)\\n120 ６四玉(55)   (00:00/00:00:00)\\n121 ７六桂打     (00:00/00:00:00)\\n122 ７六金(77)   (00:00/00:00:00)\\n123 ６七歩(68)   (00:00/00:00:00)\\n124 ４六角打     (00:00/00:00:00)\\n125 ５七銀打     (00:00/00:00:00)\\n126 ５五桂打     (00:00/00:00:00)\\n127 ５六銀打     (00:00/00:00:00)\\n128 ８五飛(81)   (00:00/00:00:00)\\n129 ４六銀(57)   (00:00/00:00:00)\\n130 ７八銀打     (00:00/00:00:00)\\n131 ７八玉(79)   (00:00/00:00:00)\\n132 ６七桂成(55) (00:00/00:00:00)\\n133 ６七銀(56)   (00:00/00:00:00)\\n134 ８七飛成(85) (00:00/00:00:00)\\n135 ７九玉(78)   (00:00/00:00:00)\\n136 ６七金(76)   (00:00/00:00:00)\\n137 ５五角成(22) (00:00/00:00:00)\\n138 ７五玉(64)   (00:00/00:00:00)\\n139 ６五金打     (00:00/00:00:00)\\n140 ８五玉(75)   (00:00/00:00:00)\\n141 ７七桂打     (00:00/00:00:00)\\n142 ７六玉(85)   (00:00/00:00:00)\\n143 ７五金(65)   (00:00/00:00:00)\\n144 ７五玉(76)   (00:00/00:00:00)\\n145 ６五馬(55)   (00:00/00:00:00)\\n146 ８四玉(75)   (00:00/00:00:00)\\n147 ８七馬(65)   (00:00/00:00:00)\\n148 ６八銀打     (00:00/00:00:00)\\n149 ８九玉(79)   (00:00/00:00:00)\\n150 ７七銀成(68) (00:00/00:00:00)\\n151 ８一飛打     (00:00/00:00:00)\\n152 ８三桂打     (00:00/00:00:00)\\n153 ８五歩打     (00:00/00:00:00)\\n154 ７三玉(84)   (00:00/00:00:00)\\n155 ７四歩打     (00:00/00:00:00)\\n156 投了\\nまで155手で先手の勝ち\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/藤井聡太四段_vs_澤田真吾六段.kif\n// module id = iC1h\n// module chunks = 1","class Board {\n  static get dimension() {\n    return 9\n  }\n}\n\nexport { Board }\n\nif (process.argv[1] === __filename) {\n  console.log(Board.dimension)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/board.js","module.exports = \"## Rails の場合\\n\\nインストール\\n\\n    % yarn add shogi_player\\n\\n読み込み\\n\\n    // in app/javascript/packs/shogi_player.js\\n\\n    import Vue from 'vue/dist/vue.esm'\\n    import ShogiPlayer from 'shogi_player/src/components/ShogiPlayer.vue'\\n\\n    document.addEventListener('DOMContentLoaded', () => {\\n      const app = new Vue({\\n        el: '#shogi_player_app',\\n        components: { \\\"shogi_player\\\": ShogiPlayer },\\n      })\\n    })\\n\\n表示\\n\\n    in app/views/xxx/show.html.erb\\n\\n    <!-- JavaScript の読み込み -->\\n    <%= javascript_pack_tag(\\\"shogi_player\\\") %>\\n\\n    <!-- CSSの読み込み (読み込まずに独自のデザインを適用してもかまいません) -->\\n    <%= stylesheet_pack_tag(\\\"shogi_player\\\") %>\\n\\n    <div id=\\\"shogi_player_app\\\">\\n      <shogi_player :kifu_body=\\\"'position startpos moves 7g7f 8c8d'\\\"></shogi_player>\\n    </div>\\n\\n## JavaScript に変換したものを直接使う場合\\n\\n    ただいま調査中……\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/usage.md\n// module id = jTCi\n// module chunks = 1","import { MemoryRecord } from \"./memory_record\"\n\nclass Location extends MemoryRecord {\n  static get define() {\n    return [\n      { key: \"black\", name: '☗', },\n      { key: \"white\", name: '☖', },\n    ]\n  }\n}\n\nexport { Location }\n\nif (process.argv[1] === __filename) {\n  console.log(Location.fetch(\"black\"))\n\n  Location.values.map((e) => {\n    console.log(e)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/location.js","<template>\n<div class=\"flex_item piece_stand\" :class=\"[`location_${location_key}`, $parent.env, {turn_active: $parent.mediator.location_next.key === location_key}]\">\n  <ul>\n    <li class=\"location_mark\">{{location_key | location_name}}</li>\n    <template v-for=\"[piece_key, count] in hold_pieces\">\n      <li>\n        <span class=\"piece_name\">{{piece_key | piece_name}}</span>\n        <template v-if=\"count >= 2\">\n          <span class=\"piece_count\">{{count}}</span>\n        </template>\n      </li>\n    </template>\n  </ul>\n</div>\n</template>\n\n<script>\nimport _ from \"lodash\"\nimport { Piece } from \"../piece\"\nimport { Location } from \"../location\"\n\nexport default {\n  props: {\n    location_key: { required: true },\n  },\n\n  computed: {\n    hold_pieces: function () {\n      let list = Array.from(this.$parent.mediator.hold_pieces.get(this.location_key))\n      list = list.filter(([key, count]) => count >= 1)\n      return _.sortBy(list, ([key, count]) => Piece.fetch(key).code)\n    },\n  },\n\n  filters: {\n    piece_name(key) {\n      return Piece.fetch(key).name\n    },\n    location_name(key) {\n      return Location.fetch(key).name\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"sass\">\n@import \"variables\"\n\n.shogi-player\n  .piece_stand\n    min-width: 8vmin\n    margin: 0 1vmin\n    text-align: left\n\n    // &.development\n    //   border: 2px solid $line-color\n    //   background: $board-bg-color\n    //   border-radius: 0.5vmin\n    ul\n      list-style-type: none\n      padding: 0 0.25vmin\n      margin: 1vmin\n      li\n        // 歩(2) の並びを横軸中央で揃える\n        display: flex\n        align-items: center\n\n        // 持駒\n        color: $piece-color\n        font-size: $font-size\n\n        // 持駒数\n        .piece_count\n          vertical-align: middle\n          margin-left: 0.3rem\n          font-size: $font-size * 0.8\n\n        // 駒台の上のマーク\n        .location_mark\n\n    &.turn_active\n      // border: 2px solid $line-color\n      // background: $board-bg-color\n      // border-radius: 0.5vmin\n\n      ul\n        li.location_mark\n          text-shadow: 0 0 1.0rem hsl(120,0%,50%)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/piece_stand.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2a63bcc4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ShogiPlayer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a63bcc4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ShogiPlayer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2a63bcc4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ShogiPlayer.vue\n// module id = oS6v\n// module chunks = 1 2","import XRegExp from \"xregexp\"\n\nimport { ParserBase } from \"./parser_base\"\nimport { Piece } from \"./piece\"\nimport { Point } from \"./point\"\nimport { Location } from \"./location\"\nimport { SfenParser } from \"./sfen_parser\"\n\nclass KifParser extends ParserBase {\n  get field() {\n    const sfen_parser = new SfenParser()\n    sfen_parser.kifu_body = \"position startpos\" // TODO: sfen形式の値のテーブルを持って駒落ちに対応する\n    sfen_parser.parse()\n    return sfen_parser.field\n  }\n\n  get location_base() {\n    let key = null\n    const value = this.header[\"手合割\"] || \"平手\"\n    if (value === \"平手\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  get move_infos() {\n    const regexp = XRegExp(`\n        ^\\\\s*(?<number>\\\\d+)\\\\s+\n        (?<to>[１-９1-9一二三四五六七八九]{2})?\n        (?<same>同)?\n        (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と])\n        (?<suffix>[左右直]?[寄引上]?)\n        (?<motion>不?成|打|合|生)?\n        (\\\\((?<origin_point>\\\\d{2})\\\\))? # KIFフォーマットの移動元用\n      `, 'xm')\n\n    const list = []\n    XRegExp.forEach(this.kifu_body, regexp, (md, i) => {\n      const attrs = {}\n      attrs[\"location\"] = this.location_by_offset(i)\n      if (md[\"origin_point\"]) {\n        attrs[\"origin_point\"] = Point.fetch(md[\"origin_point\"])\n      }\n      if (md[\"to\"]) {\n        attrs[\"point\"] = Point.fetch(md[\"to\"])\n      }\n      if (md[\"motion\"] === \"成\") {\n        attrs[\"promoted_trigger\"] = true\n      }\n      if (md[\"motion\"] === \"打\") {\n        attrs[\"stroke_piece\"] = Piece.kif_lookup(md[\"piece\"])\n      }\n\n      list.push(attrs)\n    })\n    return list\n  }\n}\n\nexport { KifParser }\n\nif (process.argv[1] === __filename) {\n  const kif_parser = new KifParser()\n  kif_parser.kifu_body = `\n# ----  Kifu for Windows V6.26 棋譜ファイル  ----\nkey：value\n手数----指手---------消費時間--\n*コメント0\n   1 ７六歩(77)   ( 0:00/00:00:00)\n   2 投了         ( 0:00/00:00:00)\n変化：1手\n   1 ２六歩(25)   ( 0:00/00:00:00)\n`\n  kif_parser.parse()\n  console.log(kif_parser.field)\n  console.log(kif_parser.location_base)\n  console.log(kif_parser.hold_pieces)\n  console.log(kif_parser.move_infos)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/kif_parser.js","import XRegExp from \"xregexp\"\n\nimport { ParserBase } from \"./parser_base\"\nimport { Piece } from \"./piece\"\nimport { Point } from \"./point\"\nimport { Battler } from \"./battler\"\nimport { Location } from \"./location\"\n\nclass SfenParser extends ParserBase {\n  parse() {\n    this.kifu_body = this.kifu_body.replace(/startpos/, \"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\")\n    const regex = XRegExp(\"sfen\\\\s+(?<sfen>\\\\S+)\\\\s+(?<b_or_w>\\\\S+)\\\\s+(?<hold_pieces>\\\\S+)\\\\s+(?<turn_counter_next>\\\\d+)(\\\\s+moves\\\\s+(?<moves>.*))?\")\n    this.attributes = XRegExp.exec(this.kifu_body, regex)\n    if (process.env.NODE_ENV === \"deveopment\") {\n      console.log(this.attributes)\n    }\n  }\n\n  get field() {\n    let field = new Map()\n    this.attributes[\"sfen\"].split(\"/\").forEach((e, y) => {\n      let x = 0\n      XRegExp.forEach(e, XRegExp(\"(?<promoted>\\\\+?)(?<piece>\\\\S)\"), (m, i) => {\n        if (/\\d+/.test(m.piece)) {\n          x += Number(m.piece)\n        } else {\n          const battler = new Battler({\n            point: new Point([x, y]),\n            piece: Piece.fetch(m.piece),\n            promoted: (m.promoted === \"+\"),\n            location: this.__location_by_upper_or_lower_case(m.piece),\n          })\n          field.set(battler.point.key, battler)\n          x++\n        }\n      })\n    })\n    return field\n  }\n\n  get location_base() {\n    let key = null\n    if (this.attributes[\"b_or_w\"] === \"b\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  get hold_pieces() {\n    const _hold_pieces = super.hold_pieces\n    if (this.attributes[\"hold_pieces\"] !== \"-\") {\n      XRegExp.forEach(this.attributes[\"hold_pieces\"], XRegExp(\"(?<count>\\\\d+)?(?<piece_char>\\\\S)\"), (md, i) => {\n        const piece = Piece.fetch(md.piece_char)\n        let count = Number(md.count || 1)\n        const location = this.__location_by_upper_or_lower_case(md.piece_char)\n        count += _hold_pieces.get(location.key).get(piece.key) || 0\n        _hold_pieces.get(location.key).set(piece.key, count)\n      })\n    }\n    return _hold_pieces\n  }\n\n  get turn_min() {\n    return Number(this.attributes[\"turn_counter_next\"]) - 1\n  }\n\n  get komaochi_p() {\n    return (this.turn_min % 2) === 0 && this.location_base.key === \"white\"\n  }\n\n  get move_infos() {\n    if (this.attributes[\"moves\"] === undefined) {\n      return []\n    }\n    return this.attributes[\"moves\"].split(/\\s+/).map((e, i) => {\n      const attrs = {}\n      // if (true) {\n      //   attrs[\"scene_index\"] = this.turn_min + i\n      //   attrs[\"scene_offsert\"] = i\n      // }\n      attrs[\"location\"] = this.location_by_offset(i)\n      const md = XRegExp.exec(e, XRegExp(\"(?<origin_x>\\\\S)(?<origin_y>\\\\S)(?<pos_x>\\\\S)(?<pos_y>\\\\S)(?<promoted>\\\\+?)?\"))\n      attrs[\"promoted_trigger\"] = (md.promoted === \"+\")\n      if (md[\"origin_y\"] === \"*\") {\n        attrs[\"stroke_piece\"] = Piece.fetch(md[\"origin_x\"])\n      } else {\n        attrs[\"origin_point\"] = Point.fetch(`${md[\"origin_x\"]}${md[\"origin_y\"]}`)\n      }\n      attrs[\"point\"] = Point.fetch(`${md[\"pos_x\"]}${md[\"pos_y\"]}`)\n      return attrs\n    })\n  }\n\n  __location_by_upper_or_lower_case(v) {\n    let key = null\n    if (/[A-Z]/.test(v)) {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n}\n\nexport { SfenParser }\n\nif (process.argv[1] === __filename) {\n  const sfen_parser = new SfenParser()\n  sfen_parser.kifu_body = \"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\"\n  sfen_parser.parse()\n  console.log(sfen_parser.field)\n  console.log(sfen_parser.location_base.key)\n  console.log(sfen_parser.hold_pieces)\n  console.log(sfen_parser.move_infos)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_parser.js","module.exports = __webpack_public_path__ + \"static/img/made-with-bulma.e0eab74.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/made-with-bulma.png\n// module id = waGJ\n// module chunks = 1","<template>\n<div id=\"app\">\n  <section class=\"hero is-primary\">\n    <!-- Hero head: will stick at the top -->\n    <div class=\"hero-head\">\n      <nav class=\"navbar\">\n        <div class=\"container\">\n          <div class=\"navbar-brand\">\n            <!-- <a class=\"navbar-item\"> -->\n            <!--   shogi-player -->\n            <!-- </a> -->\n            <span class=\"navbar-burger burger\" data-target=\"navbarMenuHeroA\">\n              <span></span>\n              <span></span>\n              <span></span>\n            </span>\n          </div>\n          <div id=\"navbarMenuHeroA\" class=\"navbar-menu\">\n            <div class=\"navbar-end\">\n              <!-- <a class=\"navbar-item is-active\"> -->\n              <!--   Home -->\n              <!-- </a> -->\n              <!-- <a class=\"navbar-item\"> -->\n              <!--   Examples -->\n              <!-- </a> -->\n              <a class=\"navbar-item\" href=\"https://github.com/akicho8/shogi-player\">\n                <span class=\"icon\">\n                  <i class=\"fa fa-github\"></i>\n                </span>\n                <span>Github</span>\n              </a>\n              <!-- <span class=\"navbar-item\"> -->\n              <!--   <a class=\"button is-primary is-inverted\"> -->\n              <!--     <span class=\"icon\"> -->\n              <!--       <i class=\"fa fa-github\"></i> -->\n              <!--     </span> -->\n              <!--     <span>Download</span> -->\n              <!--   </a> -->\n              <!-- </span> -->\n            </div>\n          </div>\n        </div>\n      </nav>\n    </div>\n\n    <!-- Hero content: will be in the middle -->\n    <div class=\"hero-body\">\n      <div class=\"container has-text-centered\">\n        <h1 class=\"title\">\n          shogi-player\n        </h1>\n        <h2 class=\"subtitle\">\n          Document (作成中)\n        </h2>\n      </div>\n    </div>\n\n    <!-- Hero footer: will stick at the bottom -->\n    <div class=\"hero-foot\">\n      <nav class=\"tabs\">\n        <div class=\"container\">\n          <ul>\n            <li><a href=\"#summary\">概要</a></li>\n            <li><a href=\"#examples\">実行例</a></li>\n            <li><a href=\"#usage\">導入方法</a></li>\n            <li><a href=\"#options\">オプション</a></li>\n          </ul>\n        </div>\n      </nav>\n    </div>\n  </section>\n\n  <section class=\"section\">\n    <a name=\"summary\"></a>\n    <div class=\"container\">\n      <h2 class=\"title\">概要</h2>\n      <hr>\n      <div class=\"content\">\n        <p>\n          これはブラウザ上で動く将棋の棋譜を再生するプログラムで次の特徴があります\n        </p>\n        <ul>\n          <li>Flash 未使用</li>\n          <li>npm でインストール可</li>\n          <li>KIF と SFEN フォーマットに対応</li>\n        </ul>\n      </div>\n    </div>\n  </section>\n\n  <section class=\"section\">\n    <a name=\"examples\"></a>\n    <div class=\"container\">\n      <h2 class=\"title\">実行例</h2>\n      <hr>\n\n      <section class=\"section\">\n        <div class=\"container has-text-centered\">\n          <div class=\"columns\">\n            <div class=\"column\">\n              <h3 class=\"title yumincho\">藤井聡太四段 vs 澤田真吾六段</h3>\n              <p class=\"subtitle yumincho\">第43期棋王戦予選</p>\n              <hr>\n              <ShogiPlayer :kifu_body=\"kif_body\" :turn_start=\"121\" :global_keyboard_operation=\"true\" :controller_show=\"true\" :slider_show=\"true\" :sfen_show=\"true\" />\n            </div>\n            <div class=\"column\">\n              <h3 class=\"title yumincho\">小池重明 vs 加藤一二三十段</h3>\n              <p class=\"subtitle yumincho\">加藤一二三の駒落道場</p>\n              <hr>\n              <ShogiPlayer :kifu_body=\"'position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1 moves 8c8d 7g7f 7a6b 5g5f 8d8e 8h7g 5c5d 2h5h 6b5c 7i6h 5a4b 5i4h 3a3b 4h3h 4c4d 5f5e 3b4c 5e5d 4c5d 6h5g 5d6e 5g5f 6e7f 5f5e 7f6g+ P*5d 5c6b 5h5f 6g7g 8i7g B*3d 5f6f P*5b 6i7i 8b8d 5e4d 8d7d P*7h 7d5d S*4c 3d4c 4d4c+ 4b4c B*7f 5b5c 7i6h 4c3b 6h5h P*4c 7f5d 5c5d 8g8f B*7i 8f8e P*8b 6f8f 7i3e+ 8e8d S*7b 8f8i 3e4e P*6g 7c7d 9g9f 4e5f 8i8f 5f5e 9f9e 5e6d 8f8i 7d7e 7g8e 5d5e 8e9c+ 8a9c 9e9d P*9h 9i9h 6d6e 8i8f 6e9h 9d9c+ 9a9c R*9a 9h6e 9a9c+ 5e5f 5h4h L*9b 9c8b P*8a N*7g 6e7d 8b9a S*8b 9a8b 8a8b S*6e 7d9f 8f5f 9f7h 7g8e 7h6g P*7c 7b8a P*9c 6c6d P*6h 6g8e 9c9b+ 8a9b 7c7b+ 6a7b 6e5d N*4b 5d5c+ P*5d 5c6b 7b6b L*2f R*6i L*2e N*3a 5f4f S*3d 3g3f 6b5c 2i3g 4c4d 4f5f 2c2d 2e2d P*2c 3f3e 3d3e 2d2c+ 3a2c 2f2c+ 3b2c P*3f 3e2d 5f5i 6i6h+ 1g1f L*3d N*2h 4d4e 5i5h 6h7g 2g2f 1c1d 2f2e 2d1c 3g4e 5c4d S*4f P*2f 4e5c+ L*4e 4f5g 8e7d P*6e 7d6e P*5f 5d5e 4h3g 5e5f 5g4h P*4f 3g4f 4e4f'\" :turn_start=\"-1\" :slider_show=\"true\" :sfen_show=\"true\" />\n            </div>\n          </div>\n          <div class=\"columns\">\n            <div class=\"column\">\n              <h3 class=\"title yumincho\">藤井猛六段 vs 井上慶太六段</h3>\n              <p class=\"subtitle yumincho\">第54期順位戦B級2組7回戦</p>\n              <hr>\n              <ShogiPlayer :kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :turn_start=\"0\" :slider_show=\"true\" />\n            </div>\n            <div class=\"column\">\n              <h3 class=\"title yumincho\">羽生善治名人 vs 渡辺明竜王</h3>\n              <p class=\"subtitle yumincho\">第21期竜王戦七番勝負第4局</p>\n              <hr>\n              <ShogiPlayer :kifu_body=\"'position startpos moves 2g2f 8c8d 2f2e 8d8e 6i7h 4a3b 2e2d 2c2d 2h2d P*2c 2d2h 7a7b 3i3h 3c3d 9g9f 9c9d 1g1f 1c1d 3h2g 8e8f 8g8f 8b8f P*8g 8f8d 2g3f 5a5b 7g7f 7c7d 8h2b+ 3a2b 7i8h 7b7c 8h7g 7c6d 3f4e 7d7e 4e5f 2b3c 6g6f 3c4d 5f6g 6a7b 5i6h 8a7c 4i5h 2a3c 6h7i 7e7f 6g7f 4d5e P*7e 9d9e B*7d P*8h 7i8h 7b8c 9f9e 8c7d 7e7d 8d7d P*7e 7d8d 5h6g P*7d 7e7d 8d7d P*7e 6d7e 7f7e 7d7e 7g7f 7e7d S*7e 7d4d P*7d 4d4g+ P*2d 2c2d 7d7c+ 4g4i 2h2d P*2c 2d3d 4c4d P*7i 5b4c 3d3e S*4e 6g5f P*7g 8i7g P*3d 3e4e 3c4e 5f5e R*2h N*3f 2h7h+ 8h9g 4e5g+ 5e4d 4i4d S*5b 4c5d 7i7h 4d4i G*6e 5d4e R*4d 4e5f 4d4i G*4h S*3h 4h4i R*5e 5f4f 3h4i G*4e P*4g 5g4g P*4h 4g3g 2i3g 4f3g 5e4e R*8i G*3h 3g3f G*4f 3f2f 9i9h 8i4i+ P*3i S*2i 3h2h 4i3i'\" :turn_start=\"-1\" :slider_show=\"true\" />\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  </section>\n\n  <section class=\"section\">\n    <a name=\"usage\"></a>\n    <div class=\"container\">\n      <h3 class=\"title\">導入方法</h3>\n      <hr>\n      <div class=\"content\" v-html=\"usage_md\"></div>\n    </div>\n  </section>\n\n  <section class=\"section\">\n    <a name=\"options\"></a>\n    <div class=\"container\">\n      <h2 class=\"title\">オプション</h2>\n      <hr>\n      <div class=\"content\" v-html=\"options_md\"></div>\n    </div>\n  </section>\n\n  <footer class=\"footer\">\n    <div class=\"container\">\n      <div class=\"columns\">\n        <div class=\"column has-text-centered\">\n          <a href=\"https://github.com/akicho8/shogi-player\"><span class=\"icon\"><i class=\"fa fa-github\"></i></span><span>Github</span></a>\n        </div>\n        <div class=\"column has-text-centered\">\n          <a href=\"https://bulma.io\"><img src=\"./assets/made-with-bulma.png\" alt=\"Made with Bulma\" width=\"128\" height=\"24\"></a>\n        </div>\n      </div>\n    </div>\n  </footer>\n</div>\n</template>\n\n<script>\nimport ShogiPlayer from './components/ShogiPlayer'\n\nvar marked = require('marked')\nmarked.setOptions({\n  renderer: new marked.Renderer(),\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n})\n\nexport default {\n  name: 'app',\n\n  data() {\n    // FIXME: npm run unit で raw-loader が効かない問題を回避している\n    if (process.env.NODE_ENV === \"test\") {\n      return {}\n    }\n\n    return {\n      kif_body: require(\"./藤井聡太四段_vs_澤田真吾六段.kif\"),\n      usage_md: marked(require('./usage.md')),\n      options_md: marked(require('./options.md')),\n    }\n  },\n\n  components: {\n    ShogiPlayer\n  },\n}\n</script>\n\n<style lang=\"sass\">\n.yumincho\n  font-family: \"YuMincho\", \"Yu Mincho\", serif\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue"],"sourceRoot":""}