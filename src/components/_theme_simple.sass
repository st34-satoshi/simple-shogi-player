// @import "~bulma/sass/utilities/mixins.sass"

%basic_box
  border: 1px solid $sp_simple_grid_color
  background-color: $sp_simple_board_bg
  padding: 0.2em
  border-radius: 0.25em
  min-height: 4em

%hoverable_bg
  &.hoverable_p
    &:hover
      background-color: $sp_simple_selectable_color

%hoverable_bg_for_cell
  &.hoverable_p
    &:hover
      border-color: $sp_simple_cell_hover_color
      border-style: solid
      border-width: 1px
        
.shogi-player
  &.theme-simple
    .piece_back
      color: $sp_simple_piece_color
      // font-size: 20px ! important

      .piece_fore
        // line-height: 100% // 駒箱の駒の上下のpaddingが扱いにくくなったらこれを入れる
        &.promoted_true
          color: $sp_simple_promoted_color

      &.holding_p
        +desktop
          opacity: 0.4
        +touch
          background-color: $sp_simple_holding_color
          // さらに駒を持ったときは色を濃くする
          // &:hover
          //   background-color: $sp_simple_holding_color

      // 選択できる駒だけ反応する
      &.selectable_p
        &:hover
          background-color: $sp_simple_selectable_color

      @extend %hoverable_bg_for_cell

      &.origin_place
        background-color: $sp_simple_origin_bg

      &.current
        color: $sp_simple_piece_color
        font-weight: bold
        animation: simple_blink 0.5s ease-in-out infinite alternate
        background-color: $sp_simple_current_bg1

    .board_inner
      margin: 0 $sp_simple_margin
      +board_star_mark_define($sp_simple_grid_color)

      border-collapse: separate
      border: $sp_simple_grid_outer solid $sp_simple_grid_color
      border-spacing: $sp_simple_grid_inner
      background-color: $sp_simple_grid_color

      td
        background-color: $sp_simple_board_bg
        // 盤上の駒の領域
        .piece_back
          // width: 3em
          // height: 3em
          // font-size: 0.5em
          // vertical-align: middle

          display: flex
          flex-direction: column
          justify-content: center
          align-items: center

          .piece_fore
            line-height: 100%
            // border: 1px solid blue
            // margin-top: 2.5em
            // margin-top: auto
            // margin-bottom: auto
            // height: auto

            padding-top: 0.1em // そこで上の部分に隙間を入れることで下に少し下げる

            &.location_white
              @extend %is_flip  // 相手の駒箱が二重に反転しないように盤内だけで適用

    // 駒台
    .piece_stand_outer
      font-size: 0.9em

      .piece_stand
        @extend %hoverable_bg

      // width: 1.5em   // 横幅ガクガクを防ぐためにあらかじめサイズを持っておく → 「▲1」の1を hidden にして調整するので明示的には指定しない
      .piece_count
        color: $sp_simple_piece_count_color
        margin-left: 0.1rem
        font-size: 0.6em

    // edit_mode の場合は駒箱を大きくする
    &.run_mode-edit_mode
      .piece_stand
        @extend %basic_box
        min-height: 5em

    // 駒箱
    .piece_box
      @extend %basic_box
      @extend %hoverable_bg
      font-size: 0.5em
      max-width: 5em
      li
        margin: 0.05em
        .piece_count
          font-size: 0.8em
          color: $sp_simple_piece_count_color

    // カーソル位置に表示する持駒
    .cursor_elem
      .piece_fore
        font-size: 1.15em
        &.location_white
          @extend %is_flip

@keyframes simple_blink
  0%
    background-color: $sp_simple_current_bg1
  100%
    background-color: $sp_simple_current_bg2
