webpackJsonp([2],{"+5mU":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;var i=l(n("d7EF")),r=l(n("u2KI")),a=l(n("Zrlr")),s=l(n("wxAW")),u=n("iy8a");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){(0,a.default)(this,e);var n=void 0,o=void 0;if("string"==typeof t){var r=this._parse_from_string(t),s=(0,i.default)(r,2);n=s[0],o=s[1]}else{var u=(0,i.default)(t,2);n=u[0],o=u[1]}var l=[n,o];this._x=l[0],this._y=l[1]}return(0,s.default)(e,null,[{key:"fetch",value:function(t){return(0,r.default)(new e(t))}}]),(0,s.default)(e,[{key:"_parse_from_string",value:function(e){var t=this,n=(e=e.replace(/([１-９一二三四五六七八九a-z])/g,function(e){return t._replace_table[e]})).split("").map(function(e){return Number(e)}),o=(0,i.default)(n,2),r=o[0],a=o[1];return[u.Board.dimension-r,a-1]}},{key:"key",get:function(){return[this._x,this._y].toString()}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"_replace_table",get:function(){return{"１":1,"２":2,"３":3,"４":4,"５":5,"６":6,"７":7,"８":8,"９":9,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9}}}]),e}();t.Point=c,e.argv[1]===o&&(console.log(c.fetch("6a").key),console.log(c.fetch([1,2]).key))}).call(t,n("W2nU"),"/index.js")},"+BTF":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.ParserBase=void 0;var i=u(n("ifoU")),r=u(n("Zrlr")),a=u(n("wxAW")),s=n("kHiN");function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,r.default)(this,e),this.kifu_body=null,this.header={}}return(0,a.default)(e,[{key:"parse",value:function(){}},{key:"location_by_offset",value:function(e){var t=null;return t=(this.turn_min+e+(this.komaochi_p?1:0))%2==0?"black":"white",s.Location.fetch(t)}},{key:"field",get:function(){console.warn("not implemented")}},{key:"hold_pieces",get:function(){return new i.default(s.Location.values.map(function(e){return[e.key,new i.default]}))}},{key:"turn_min",get:function(){return 0}},{key:"turn_max",get:function(){return this.turn_min+this.move_infos.length}},{key:"move_infos",get:function(){console.warn("not implemented")}},{key:"comments_pack",get:function(){return null}}]),e}();t.ParserBase=l,e.argv[1]}).call(t,n("W2nU"),"/index.js")},"1I1s":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("M4xR"),i=u(n("QERr")),r=u(n("M4fF")),a=u(n("mtWM")),s=u(n("7+uW"));function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s.default.prototype,"_",{value:r.default}),n("T0qj")({request:function(e,t){e("Request with "+t.headers["content-type"])},response:function(e,t){e("Response with "+t.headers["content-type"],"from "+t.config.url)},error:function(e,t){e("Boom",t)}}),n("Fy0/")("debug")("booting %o","ok"),t.default={name:"ShogiPlayer",props:{kifu_body:{type:String,default:"position startpos"},kifu_url:{type:String,default:null},polling_interval:{type:Number,default:3},turn_start:{type:Number,default:0},slider_show:{type:Boolean,default:!1},controller_show:{default:!1},sfen_show:{type:Boolean,default:!1},global_key_event_capture:{type:Boolean,default:!1},location_hash_embed_turn:{type:Boolean,default:!1},shift_key_mag:{type:Number,default:10},system_key_mag:{type:Number,default:50},debug_mode:{type:Boolean,default:!1}},components:{PieceStand:i.default},data:function(){return{current_turn:0,turn_edit_value:null,mediator:null,board_turn:!1,turn_edit:!1,env:"production",polling_id:null,loaded_kifu:null,error_message:null}},created:function(){this.read_kifu(),this.current_turn=this.turn_start,this.mediator_update(),document.addEventListener("keydown",this.keyboard_operation)},watch:{current_turn:function(){this.mediator_update()},turn_edit_value:function(){this.current_turn=this.turn_edit_value},kifu_url:function(){this.read_kifu()},kifu_body:function(){this.read_kifu()},loaded_kifu:function(){this.mediator_update()},debug_mode:function(e){console.log("watch debug_mode: "+e)}},methods:{read_kifu:function(){var e=this;if(this.kifu_url){var t=this.kifu_url;a.default.get(t,{params:{accessd_at:Date.now().toString()}}).then(function(t){e.loaded_kifu=t.data,e.error_message=null}).catch(function(t){e.loaded_kifu=null,e.error_message=t.message})}else this.loaded_kifu=this.kifu_body},mediator_update:function(){this.loaded_kifu&&(this.mediator=new o.Mediator,this.mediator.kifu_body=this.loaded_kifu,this.mediator.current_turn=this.current_turn,this.mediator.run(),this.current_turn=this.mediator.normalized_turn,this.location_hash_embed_turn&&(document.location.hash=this.current_turn))},keyboard_operation:function(e){if(this.debug_mode&&(console.log(document.activeElement),console.log(e.shiftKey,e.ctrlKey,e.altKey,e.metaKey),console.log("e",e),console.log("key",e.key),console.log("code",e.code)),this.global_key_event_capture){var t=document.activeElement,n=[this.$refs.first,this.$refs.previous,this.$refs.next,this.$refs.last];(void 0===t||"BODY"===t.tagName||r.default.includes(n,t))&&("Backspace"!==e.code&&"ArrowUp"!==e.code&&"ArrowLeft"!==e.code&&"k"!==e.key&&"p"!==e.key&&"b"!==e.key||(this.relative_move(-1,e),e.preventDefault()),"Space"!==e.code&&"Enter"!==e.code&&"ArrowDown"!==e.code&&"ArrowRight"!==e.code&&"j"!==e.key&&"n"!==e.key&&"f"!==e.key||(this.relative_move(1,e),e.preventDefault()))}},navi_relative_move:function(e,t){this.relative_move(e*this.board_turn_sign(),t)},relative_move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&(t.shiftKey&&this.shift_key_mag&&(e*=this.shift_key_mag),(t.ctrlKey||t.altKey||t.metaKey)&&this.system_key_mag&&(e*=this.system_key_mag));var n=this.mediator.clamp(this.current_turn+e);this.current_turn!==n&&(this.current_turn=n),this.debug_mode&&console.log([e,n,this.current_turn]),this.focus_to("slider")||(e>0?this.focus_to("next"):this.focus_to("previous"))},move_to_first:function(){this.current_turn=this.mediator.any_parser.turn_min,this.focus_to("slider")||this.focus_to("first")},move_to_last:function(){this.current_turn=this.mediator.any_parser.turn_max,this.focus_to("slider")||this.focus_to("last")},focus_to:function(e){var t=this.$refs[e];return!!t&&(t.focus(),!0)},board_turn_run:function(){this.board_turn=!this.board_turn,this.focus_to("slider")},turn_edit_run:function(){var e=this;this.turn_edit=!0,this.turn_edit_value=this.current_turn,this.$nextTick(function(){e.$refs.turn_edit_input.focus()})},board_turn_sign:function(){return this.board_turn?-1:1}}}},"3D3J":function(e,t){},"4Xd3":function(e,t,n){"use strict";var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex_item piece_stand",class:["location_"+e.location.key,e.$parent.env,{turn_active:e.$parent.mediator.location_next.key===e.location.key}]},[n("ul",[n("li",{staticClass:"location_mark"},[e._v(e._s(e.location.name))]),e._v(" "),e._l(e.hold_pieces,function(t){var o=t[0],i=t[1];return[n("li",[n("span",{class:o.css_class_list},[e._v(e._s(o.name))]),e._v(" "),i>=2?n("span",{staticClass:"piece_count"},[e._v(e._s(i))]):e._e()])]})],2)])},staticRenderFns:[]};t.a=o},AN0t:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Battler=void 0;var i=l(n("woOf")),r=l(n("Zrlr")),a=l(n("wxAW")),s=n("+5mU"),u=n("P4Jg");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){(0,r.default)(this,e),this.attributes=(0,i.default)({},t)}return(0,a.default)(e,[{key:"piece",get:function(){return this.attributes.piece}},{key:"point",get:function(){return this.attributes.point}},{key:"location",get:function(){return this.attributes.location}},{key:"promoted",get:function(){return this.attributes.promoted},set:function(e){this.attributes.promoted=e}},{key:"name",get:function(){return this.promoted?this.piece.promoted_name:this.piece.name}}]),e}();if(t.Battler=c,e.argv[1]===o){var _=new c({point:new s.Point([1,2]),piece:u.Piece.fetch("P"),promoted:!0,location_key:"white"});console.log(_.name)}}).call(t,n("W2nU"),"/index.js")},BYPO:function(e,t){},BuRC:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryRecord=void 0;var i=c(n("c/Tr")),r=c(n("woOf")),a=c(n("u2KI")),s=c(n("ifoU")),u=c(n("Zrlr")),l=c(n("wxAW"));function c(e){return e&&e.__esModule?e:{default:e}}var _=function(){function e(t){(0,u.default)(this,e),this.attributes=t}return(0,l.default)(e,null,[{key:"lookup",value:function(e){return e instanceof this?e:this.values_map.get(e)}},{key:"fetch",value:function(e){var t=this.lookup(e);if(!t)throw new Error("Key not found: "+e);return t}},{key:"define",get:function(){return console.warn("not implemented"),[{key:"(key_x)"},{key:"(key_y)"}]}},{key:"values_map",get:function(){var e=this;return this._values_map=this._values_map||new s.default(this.define.map(function(t,n){return[t.key,(0,a.default)(new e((0,r.default)({},t,{code:n})))]})),this._values_map}},{key:"values",get:function(){return this._values=this._values||(0,i.default)(this.values_map.values()),this._values}}]),(0,l.default)(e,[{key:"key",get:function(){return this.attributes.key}},{key:"name",get:function(){return this.attributes.name||this.key.toString()}},{key:"code",get:function(){return this.attributes.code}}]),e}();if(t.MemoryRecord=_,e.argv[1]===o){console.log(_.values),console.log(_.lookup("(key_x)").name),console.log(_.lookup("(key_x)").code);var f=_.lookup("(key_x)");console.log(f instanceof _)}}).call(t,n("W2nU"),"/index.js")},M4xR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mediator=void 0;var o=p(n("ifoU")),i=p(n("Zrlr")),r=p(n("wxAW")),a=p(n("M4fF")),s=n("usXP"),u=n("pelb"),l=n("iy8a"),c=n("+5mU"),_=n("AN0t"),f=n("XJjB"),d=p(n("k/Ns"));function p(e){return e&&e.__esModule?e:{default:e}}var m=function(){function e(){(0,i.default)(this,e),this.any_parser=null,this.current_turn=null,this.current_field=null,this.hold_pieces=null,this.move_info=null,this.env="production",this.kifu_body="position startpos"}return(0,r.default)(e,[{key:"run",value:function(){var e=this,t=this.kifu_body||"position startpos";/position/.test(t)?this.any_parser=new s.SfenParser:this.any_parser=new u.KifParser,this.any_parser.kifu_body=t,this.any_parser.parse(),this.current_field=this.any_parser.field,this.hold_pieces=this.any_parser.hold_pieces,this.move_info=null;var n=this.any_parser.move_infos,i=this.normalized_turn-this.any_parser.turn_min;(0,a.default)(i).times(function(t){var i=n[t];if(e.move_info=i,i.stroke_piece){var r=new _.Battler({piece:i.stroke_piece,point:i.point,promoted:i.promoted,location:i.location}),a=e.hold_pieces.get(i.location.key).get(r.piece.key)-1;a>=1?e.hold_pieces.get(i.location.key).set(r.piece.key,a):e.hold_pieces.get(i.location.key).delete(r.piece.key),e.current_field.set(r.point.key,r)}else{var s=e.current_field.get(i.point.key);if(s){void 0===e.hold_pieces.get(i.location.key)&&e.hold_pieces.set(i.location_key,new o.default);var u=(e.hold_pieces.get(i.location.key).get(s.piece.key)||0)+1;e.hold_pieces.get(i.location.key).set(s.piece.key,u)}var l=e.current_field.get(i.origin_point.key);i.promoted_trigger&&(l.promoted=!0),e.current_field.delete(i.origin_point.key),e.current_field.set(i.point.key,l)}})}},{key:"cell_view",value:function(e,t){var n=this.current_field.get(c.Point.fetch([e,t]).key),o="";return n&&(o=n.name),o}},{key:"cell_class",value:function(e,t){var n=this.current_field.get(c.Point.fetch([e,t]).key),o=[];if(n&&(o.push("location_"+n.location.key),o=a.default.concat(o,n.piece.css_class_list)),this.move_info){var i=this.move_info.origin_point;i&&i.x===e&&i.y===t&&o.push("origin_point");var r=this.move_info.point;r.x===e&&r.y===t&&o.push("current")}return o}},{key:"clamp",value:function(e){return e=Number(e),a.default.clamp(e,this.any_parser.turn_min,this.any_parser.turn_max)}},{key:"auto_link",value:function(e){return(new d.default).link(e)}},{key:"dimension",get:function(){return l.Board.dimension}},{key:"normalized_turn",get:function(){var e=Number(this.current_turn);return e<0&&(e+=this.any_parser.turn_max+1),this.clamp(e)}},{key:"location_next",get:function(){return this.any_parser.location_by_offset(this.normalized_turn)}},{key:"to_sfen",get:function(){return new f.SfenSerializer(this).to_s}},{key:"current_comments",get:function(){if(this.any_parser.comments_pack)return this.any_parser.comments_pack[this.normalized_turn]}}]),e}();t.Mediator=m},P4Jg:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Piece=void 0;var i=c(n("Zx67")),r=c(n("Zrlr")),a=c(n("wxAW")),s=c(n("zwoO")),u=c(n("yEsh")),l=c(n("Pf15"));function c(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,a.default)(t,[{key:"promoted_name",get:function(){return this.attributes.promoted_name}},{key:"css_class_list",get:function(){return["piece_name","piece_"+this.key]}}],[{key:"lookup",value:function(e){return"string"==typeof e&&(e=e.toUpperCase()),(0,u.default)(t.__proto__||(0,i.default)(t),"lookup",this).call(this,e)}},{key:"kif_lookup",value:function(e){return this.values.find(function(t){return[t.name,t.alias_name].includes(e)})}},{key:"kif_promoted_lookup",value:function(e){return this.values.find(function(t){return[t.promoted_name,t.promoted_alias_name].includes(e)})}},{key:"define",get:function(){return[{key:"K",name:"玉",alias_name:"王",promoted_name:null,promoted_alias_name:null},{key:"R",name:"飛",alias_name:null,promoted_name:"龍",promoted_alias_name:"竜"},{key:"B",name:"角",alias_name:null,promoted_name:"馬",promoted_alias_name:null},{key:"G",name:"金",alias_name:null,promoted_name:null,promoted_alias_name:null},{key:"S",name:"銀",alias_name:null,promoted_name:"全",promoted_alias_name:null},{key:"N",name:"桂",alias_name:null,promoted_name:"圭",promoted_alias_name:null},{key:"L",name:"香",alias_name:null,promoted_name:"杏",promoted_alias_name:null},{key:"P",name:"歩",alias_name:null,promoted_name:"と",promoted_alias_name:null}]}}]),t}(n("BuRC").MemoryRecord);t.Piece=_,e.argv[1]===o&&(console.log(_.fetch("K")),console.log(_.fetch("K")),console.log(_.lookup("")),console.log(_.values),console.log(_.values_map.get("K")),console.log(_.fetch("K").key))}).call(t,n("W2nU"),"/index.js")},QERr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("o1Cy"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var a=n("4Xd3");var s=function(e){n("3D3J")},u=n("VU/8")(i.a,a.a,!1,s,"data-v-bb113268",null);t.default=u.exports},XJjB:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.SfenSerializer=void 0;var i=f(n("Zrlr")),r=f(n("wxAW")),a=f(n("M4fF")),s=n("P4Jg"),u=n("+5mU"),l=n("M4xR"),c=n("kHiN"),_=n("iy8a");function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){(0,i.default)(this,e),this.mediator=t}return(0,r.default)(e,[{key:"to_s",get:function(){var e=[];return e.push(this.to_baord_sfen),e.push(this.mediator.location_next.key[0]),e.push(this.to_hold_pieces),e.push(this.mediator.normalized_turn+1),e.join(" ")}},{key:"to_baord_sfen",get:function(){var e=this,t=[];return a.default.times(_.Board.dimension,function(n){var o="",i=0;a.default.times(_.Board.dimension,function(t){var r=u.Point.fetch([t,n]),a=e.mediator.current_field.get(r.key);if(void 0===a)i++;else{i>=1&&(o+=i,i=0),a.promoted&&(o+="+");var s=a.piece.key;"white"===a.location.key&&(s=s.toLowerCase()),o+=s}}),i>=1&&(o+=i),t.push(o)}),t.join("/")}},{key:"to_hold_pieces",get:function(){var e=this,t=c.Location.values.map(function(t){var n=e.mediator.hold_pieces.get(t.key),o=s.Piece.values.map(function(e){var o=n.get(e.key)||0,i="";if(0!==o){o>=2&&(i+=o);var r=e.key;return i+=r="white"===t.key?r.toLowerCase():r.toUpperCase()}});return a.default.compact(o).join("")}).join("");return a.default.isEmpty(t)&&(t="-"),t}}]),e}();if(t.SfenSerializer=d,e.argv[1]===o){var p=new l.Mediator;p.kifu_body="position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d",p.current_turn=1,p.run();var m=new d(p);console.log(m.to_s)}}).call(t,n("W2nU"),"/index.js")},iy8a:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Board=void 0;var i=a(n("Zrlr")),r=a(n("wxAW"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"dimension",get:function(){return 9}}]),e}();t.Board=s,e.argv[1]===o&&console.log(s.dimension)}).call(t,n("W2nU"),"/index.js")},kHiN:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Location=void 0;var i=l(n("Zx67")),r=l(n("Zrlr")),a=l(n("wxAW")),s=l(n("zwoO")),u=l(n("Pf15"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,a.default)(t,null,[{key:"define",get:function(){return[{key:"black",name:"☗"},{key:"white",name:"☖"}]}}]),t}(n("BuRC").MemoryRecord);t.Location=c,e.argv[1]===o&&(console.log(c.fetch("black")),c.values.map(function(e){console.log(e)}))}).call(t,n("W2nU"),"/index.js")},nZyL:function(e,t,n){"use strict";var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"shogi-player",class:{debug:e.debug_mode}},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.error_message,expression:"error_message !== null"}]},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("article",{staticClass:"message is-danger has-text-left"},[e._m(0),e._v(" "),n("div",{staticClass:"message-body"},[n("p",[e._v(e._s(e.error_message)+">")])])])])])]),e._v(" "),e.mediator?e._e():[n("i",{staticClass:"fas fa-spinner fa-pulse"})],e._v(" "),e.mediator?[n("div",{staticClass:"turn_editor"},[e.turn_edit?e._e():[n("span",{staticClass:"turn_edit_text",on:{click:e.turn_edit_run}},[e._v(e._s(e.mediator.normalized_turn)+"手目")])],e._v(" "),e.turn_edit?[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.turn_edit_value,expression:"turn_edit_value",modifiers:{number:!0}}],ref:"turn_edit_input",staticClass:"turn_edit_input",attrs:{type:"number"},domProps:{value:e.turn_edit_value},on:{blur:[function(t){e.turn_edit=!1},function(t){e.$forceUpdate()}],input:function(t){t.target.composing||(e.turn_edit_value=e._n(t.target.value))}}})]:e._e()],2),e._v(" "),n("div",{staticClass:"board_container board_turn",class:{turned:e.board_turn}},[n("PieceStand",{attrs:{location_key:"white"}}),e._v(" "),n("div",{staticClass:"flex_item board_wrap"},[n("div",{staticClass:"overlay_navi previous",on:{click:function(t){t.stopPropagation(),e.navi_relative_move(-1,t)}}}),e._v(" "),n("div",{staticClass:"overlay_navi next",on:{click:function(t){t.stopPropagation(),e.navi_relative_move(1,t)}}}),e._v(" "),n("div",{staticClass:"overlay_navi board_turn_area",on:{click:e.board_turn_run}}),e._v(" "),n("table",e._l(e.mediator.dimension,function(t){return n("tr",[e._l(e.mediator.dimension,function(o){return[n("td",{class:e.mediator.cell_class(o-1,t-1)},[e._v("\n                "+e._s(e.mediator.cell_view(o-1,t-1))+"\n              ")])]})],2)}))]),e._v(" "),n("PieceStand",{attrs:{location_key:"black"}})],1),e._v(" "),e.controller_show?[n("div",{staticClass:"controller_block buttons has-addons is-centered"},[n("button",{ref:"first",staticClass:"button first",on:{click:function(t){t.stopPropagation(),e.move_to_first(t)}}},[e._v("|◀")]),e._v(" "),n("button",{ref:"previous",staticClass:"button previous",on:{click:function(t){t.stopPropagation(),e.relative_move(-1,t)}}},[e._v("◀")]),e._v(" "),n("button",{ref:"next",staticClass:"button next",on:{click:function(t){t.stopPropagation(),e.relative_move(1,t)}}},[e._v("▶")]),e._v(" "),n("button",{ref:"last",staticClass:"button last",on:{click:function(t){t.stopPropagation(),e.move_to_last(t)}}},[e._v("▶|")]),e._v(" "),n("button",{staticClass:"button board_turn",on:{click:function(t){t.stopPropagation(),e.board_turn_run(t)}}},[e._v(e._s(e.board_turn?"↺":"↻"))])])]:e._e(),e._v(" "),e.slider_show?[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.current_turn,expression:"current_turn",modifiers:{number:!0}}],ref:"slider",attrs:{type:"range",min:e.mediator.any_parser.turn_min,max:e.mediator.any_parser.turn_max},domProps:{value:e.current_turn},on:{__r:function(t){e.current_turn=e._n(t.target.value)},blur:function(t){e.$forceUpdate()}}})]:e._e(),e._v(" "),e._.isEmpty(e.mediator.any_parser.comments_pack)?e._e():[e.mediator.current_comments?[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},[n("div",{staticClass:"content has-text-left"},[e._l(e.mediator.current_comments,function(t){return[e._.isEmpty(t)?[n("br")]:[n("div",{domProps:{innerHTML:e._s(e.mediator.auto_link(t))}})]]})],2)])])]:e._e()],e._v(" "),e.sfen_show?n("p",{staticClass:"is-size-7 has-text-grey"},[e._v("\n    "+e._s(e.mediator.to_sfen)+"\n  ")]):e._e()]:e._e(),e._v(" "),e.debug_mode?[e.mediator?[n("p",[e._v(e._s(e.mediator.hold_pieces))]),e._v(" "),n("p",[e._v("次の手番:"+e._s(e.mediator.location_next.key))]),e._v(" "),n("p",[e._v("Sfen:"+e._s(e.mediator.to_sfen))])]:e._e()]:e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"message-header"},[t("p",[this._v("ERROR")])])}]};t.a=o},o1Cy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=u(n("d7EF")),i=u(n("c/Tr")),r=u(n("M4fF")),a=n("P4Jg"),s=n("kHiN");function u(e){return e&&e.__esModule?e:{default:e}}t.default={props:{location_key:{required:!0}},computed:{location:function(){return s.Location.fetch(this.location_key)},hold_pieces:function(){var e=(0,i.default)(this.$parent.mediator.hold_pieces.get(this.location.key));return(0,r.default)(e).filter(function(e){var t=(0,o.default)(e,2);t[0];return t[1]>=1}).map(function(e){var t=(0,o.default)(e,2),n=t[0],i=t[1];return[a.Piece.fetch(n),i]}).sortBy(e,function(e){var t=(0,o.default)(e,2),n=t[0];t[1];return n.code}).value()}}}},oS6v:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("1I1s"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var a=n("nZyL");var s=function(e){n("BYPO")},u=n("VU/8")(i.a,a.a,!1,s,"data-v-04ac83dd",null);t.default=u.exports},pelb:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.KifParser=void 0;var i=v(n("Zx67")),r=v(n("Zrlr")),a=v(n("wxAW")),s=v(n("zwoO")),u=v(n("Pf15")),l=v(n("OTSL")),c=v(n("08Lv")),_=n("+BTF"),f=n("P4Jg"),d=n("+5mU"),p=n("kHiN"),m=n("usXP");function v(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,a.default)(t,[{key:"parse",value:function(){var e=this;this.move_infos=[],this.comments_pack={};var t=null;this.kifu_body.split(/\n/).forEach(function(n){var o=l.default.exec(n,e.__kif_format_move_regexp);if(o){var i={};i.location=e.location_by_offset(Number(o.number)-1),o.origin_point&&(i.origin_point=d.Point.fetch(o.origin_point)),(0,c.default)(o.to||o.same),o.to?(i.point=d.Point.fetch(o.to),t=i.point):((0,c.default)(o.same),(0,c.default)(t),i.point=t),"成"===o.motion&&(i.promoted_trigger=!0),"打"===o.motion&&(i.stroke_piece=f.Piece.kif_lookup(o.piece)),e.move_infos.push(i)}else{var r=l.default.exec(n,(0,l.default)("^\\*(?<comment>.*)"));if(r){var a=e.move_infos.length;e.comments_pack[a]=e.comments_pack[a]||[],e.comments_pack[a].push(r.comment)}}})}},{key:"field",get:function(){var e=new m.SfenParser;return e.kifu_body="position startpos",e.parse(),e.field}},{key:"location_base",get:function(){var e=null;return e="平手"===(this.header["手合割"]||"平手")?"black":"white",p.Location.fetch(e)}},{key:"move_infos",set:function(e){this._move_infos=e},get:function(){return this._move_infos||{}}},{key:"comments_pack",set:function(e){this._comments_pack=e},get:function(){return this._comments_pack||{}}},{key:"__kif_format_move_regexp",get:function(){return(0,l.default)("\n        ^\\s*(?<number>\\d+)\\s+\n        (?<to>[１-９1-9一二三四五六七八九]{2})?\n        (?<same>同)?\\s*\n        (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と])\n        (?<suffix>[左右直]?[寄引上]?)\n        (?<motion>不?成|打|合|生)?\n        (\\((?<origin_point>\\d{2})\\))? # KIFフォーマットの移動元用\n      ","xm")}}]),t}(_.ParserBase);if(t.KifParser=h,e.argv[1]===o){var y=new h;y.kifu_body="\n   1 ２六歩(27)   ( 0:16/00:00:16)\n   2 ３四歩(33)   ( 0:22/00:00:22)\n   3 ７六歩(77)   ( 0:06/00:00:22)\n   4 ８四歩(83)   ( 0:13/00:00:35)\n   5 ２五歩(26)   ( 0:09/00:00:31)\n   6 ８五歩(84)   ( 0:16/00:00:51)\n   7 ７八金(69)   ( 0:04/00:00:35)\n   8 ３二金(41)   ( 0:09/00:01:00)\n   9 ２四歩(25)   ( 0:04/00:00:39)\n  10 同 歩(23)    ( 0:10/00:01:10)\n",y.parse(),console.log(y.move_infos),console.log(y.comments_pack)}}).call(t,n("W2nU"),"/index.js")},usXP:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.SfenParser=void 0;var i=h(n("ifoU")),r=h(n("Zx67")),a=h(n("Zrlr")),s=h(n("wxAW")),u=h(n("zwoO")),l=h(n("yEsh")),c=h(n("Pf15")),_=h(n("OTSL")),f=n("+BTF"),d=n("P4Jg"),p=n("+5mU"),m=n("AN0t"),v=n("kHiN");function h(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"parse",value:function(){this.kifu_body=this.kifu_body.replace(/startpos/,"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1");var e=(0,_.default)("sfen\\s+(?<sfen>\\S+)\\s+(?<b_or_w>\\S+)\\s+(?<hold_pieces>\\S+)\\s+(?<turn_counter_next>\\d+)(\\s+moves\\s+(?<moves>.*))?");this.attributes=_.default.exec(this.kifu_body,e)}},{key:"__location_by_upper_or_lower_case",value:function(e){var t=null;return t=/[A-Z]/.test(e)?"black":"white",v.Location.fetch(t)}},{key:"field",get:function(){var e=this,t=new i.default;return this.attributes.sfen.split("/").forEach(function(n,o){var i=0;_.default.forEach(n,(0,_.default)("(?<promoted>\\+?)(?<piece>\\S)"),function(n,r){if(/\d+/.test(n.piece))i+=Number(n.piece);else{var a=new m.Battler({point:new p.Point([i,o]),piece:d.Piece.fetch(n.piece),promoted:"+"===n.promoted,location:e.__location_by_upper_or_lower_case(n.piece)});t.set(a.point.key,a),i++}})}),t}},{key:"location_base",get:function(){var e=null;return e="b"===this.attributes.b_or_w?"black":"white",v.Location.fetch(e)}},{key:"hold_pieces",get:function(){var e=this,n=(0,l.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"hold_pieces",this);return"-"!==this.attributes.hold_pieces&&_.default.forEach(this.attributes.hold_pieces,(0,_.default)("(?<count>\\d+)?(?<piece_char>\\S)"),function(t,o){var i=d.Piece.fetch(t.piece_char),r=Number(t.count||1),a=e.__location_by_upper_or_lower_case(t.piece_char);r+=n.get(a.key).get(i.key)||0,n.get(a.key).set(i.key,r)}),n}},{key:"turn_min",get:function(){return Number(this.attributes.turn_counter_next)-1}},{key:"komaochi_p",get:function(){return this.turn_min%2==0&&"white"===this.location_base.key}},{key:"move_infos",get:function(){var e=this;return void 0===this.attributes.moves?[]:this.attributes.moves.split(/\s+/).map(function(t,n){var o={};o.location=e.location_by_offset(n);var i=_.default.exec(t,(0,_.default)("(?<origin_x>\\S)(?<origin_y>\\S)(?<pos_x>\\S)(?<pos_y>\\S)(?<promoted>\\+?)?"));return o.promoted_trigger="+"===i.promoted,"*"===i.origin_y?o.stroke_piece=d.Piece.fetch(i.origin_x):o.origin_point=p.Point.fetch(""+i.origin_x+i.origin_y),o.point=p.Point.fetch(""+i.pos_x+i.pos_y),o})}}]),t}(f.ParserBase);if(t.SfenParser=y,e.argv[1]===o){var k=new y;k.kifu_body="position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d",k.parse(),console.log(k.field),console.log(k.location_base.key),console.log(k.hold_pieces),console.log(k.move_infos)}}).call(t,n("W2nU"),"/index.js")}},["oS6v"]);
//# sourceMappingURL=shogi_player.1d6186b49fa7ca08c4e1.js.map