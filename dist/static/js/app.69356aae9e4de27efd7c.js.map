{"version":3,"sources":["webpack:///./src/parser_base.js","webpack:///./src/components/ErrorNotify.vue?3680","webpack:///./src/components/ErrorNotify.vue","webpack:///src/components/ShogiPlayer.vue","webpack:///./src/components/play_mode_module.js","webpack:///src/components/SettingModal.vue","webpack:///./src/components/ShogiPlayer.vue?66a4","webpack:///./src/components/sound_module.js","webpack:///./src/preset_info.js","webpack:///src/components/CommentArea.vue","webpack:///./src/components/polling_module.js","webpack:///./src/components/PieceStand.vue?fbed","webpack:///./src/memory_record.js","webpack:///./src/components/SettingModal.vue?be1a","webpack:///./src/第11回朝日杯将棋オープン戦本戦.kif","webpack:///./src/assets/flip_sound.wav","webpack:///./src/options.md","webpack:///./src/soldier.js","webpack:///./src/place.js","webpack:///./src/mediator.js","webpack:///./src/App.vue","webpack:///./src/components/CommentArea.vue?f2ec","webpack:///./src/assets/piece_sound.wav","webpack:///./src/main.js","webpack:///./src/piece.js","webpack:///./src/App.vue?2fba","webpack:///./src/sfen_serializer.js","webpack:///./src/components/navi_module.js","webpack:///./src/components/PieceStand.vue","webpack:///./src/sound.js","webpack:///./src/components/preset_module.js","webpack:///./src/藤井聡太四段_vs_澤田真吾六段.kif","webpack:///./src/board.js","webpack:///./src/usage.md","webpack:///./src/location.js","webpack:///./src/components/CommentArea.vue","webpack:///./src/components/ShogiPlayer.vue","webpack:///./src/kif_parser.js","webpack:///src/components/PieceStand.vue","webpack:///./src/sfen_parser.js","webpack:///./src/assets/made-with-bulma.png","webpack:///src/App.vue","webpack:///./src/components/edit_mode_module.js","webpack:///./src/components/SettingModal.vue"],"names":["__webpack_require__","_location","ParserBase","_classCallCheck3","default","this","kifu_body","header","offset","key","turn_min","komaochi_p","Location","fetch","_lodash2","reduce","values","a","e","move_infos","length","process","argv","ErrorNotify","render","_vm","_h","$createElement","_c","_self","staticClass","_t","_v","staticRenderFns","Component","normalizeComponent","__webpack_exports__","_mediator","_place","_sfen_parser","_kif_parser","Object","defineProperty","_vue2","prototype","value","debug","_response","headers","config","url","_error","_navi_module2","_edit_mode_module2","_play_mode_module2","_sound_module2","_preset_module2","_polling_module2","PieceStand","_PieceStand2","SettingModal","_SettingModal2","_ErrorNotify2","CommentArea","_CommentArea2","run_mode","axios_call","polling_interval_update","start_turn","turn_edit_value","real_turn","old_val","Mediator","position_sfen","run","v","kifu_source","turn","update_counter","SfenParser","KifParser","str","parse","data_source","_this","focus","xy","place","origin_place","list","_lodash","props","human_side","type","String","data","moves","init_sfen","init_location_key","created","mounted","watch","current_turn","current_mode","log","play_mode_mediator_update","sound_call","methods","play_mode_setup_from","undefined","mediator","current_location","sfen_serializer","to_board_sfen","init_location","to_hold_pieces","data_source_by","play_mode_current_sfen","moves_set","take","push","$emit","turn_next","to_position_sfen","computed","join","human_location","esExports","class","theme","size","variation","debug_mode","digit_show","attrs","slot","_s","error_message","_e","model","callback","$$v","current_preset","expression","icon","_l","record","name","on","click","all_flip","init_location_toggle","turn_edit","turn_edit_run","current_turn_label","directives","rawName","modifiers","number","ref","domProps","blur","$event","$forceUpdate","input","target","composing","_n","setting_modal_p","active","has-modal-card","update:active","update:run_mode","flip","location_key","hold_pieces","realized_hold_pieces_of","stopPropagation","navi_relative_move","board_flip_run","y","x","piece_outer_class","board_click","contextmenu","preventDefault","board_click_right","board_piece_inner_class","cell_view","piece_box_other_click","hold_cancel","piece_box_realize","piece","count","holding_p","piece_box_have_p","piece_box_piece_click","piece_box_piece_outer_class","piece_box_piece_inner_class","move_to_first","relative_move","move_to_last","min","max","turn_max","current_turn_set","to_sfen","comments_pack","current_comments","place_from","have_piece","interval_id","key_event_capture","_sound","sound_effect","Boolean","volume","Number","piece_sound","sound_setup","object","play","sound_load","_piece_sound2","_flip_sound2","file","isNil","Sound","options","PresetInfo","attributes","sfen","piece_box","_autolinker2","_axios","logger_debug","kifu_url","polling_interval","last_after_polling","kifu_body_from_url","clearInterval","setInterval","_this2","accessd_at","Date","now","toString","_axios2","method","params","responseType","timeout","X-SHOGI-PLAYER-TIMESTAMP","then","response","mediator_setup","catch","error","status","statusText","request","message","piece_stand_outer_class","innerHTML","location_name","$parent","piece_stand_click","location","piece_stand_piece_click","piece_class","MemoryRecord","values_map","element","lookup","Error","_values_map","define","i","_freeze2","_assign2","code","_values","_values2","__filename","staticStyle","width","_m","label","native-value","close","module","exports","p","_board","_piece","Soldier","promoted","promoted_name","promotable_p","danger_zone_p","Board","danger_zone_size","dimension","concat","css_class_list","Place","Piece","isString","_parse_from_string2","_parse_from_string","_parse_from_string3","_slicedToArray3","_value","_ref","_x","_y","s","_s$split$map","replace","_replace_table","split","map","_s$split$map2","１","２","３","４","５","６","７","８","９","一","二","三","四","五","六","七","八","九","b","c","d","f","g","h","_soldier3","_sfen_serializer","board","last_hand","env","num","times","execute_one","m","drop_piece","soldier","hold_pieces_add","place_on","promoted_trigger","delete_at","plus","arguments","hold_pieces_count","counts_hash","set","delete","to_class_list","index","clamp","_entries2","filter","_ref2","_ref3","_ref4","sortBy","_ref5","_ref6","piece_box_count","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","turn_clamp","location_by_offset","previous_location","to_s","SfenSerializer","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_008ebb94_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","__vue_styles__","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default","_","isEmpty","auto_link","productionTip","el","template","components","App","toUpperCase","_get3","__proto__","_getPrototypeOf2","call","find","alias_name","includes","promoted_alias_name","id","kif_sample1","slider_show","kif_sample2","controller_show","sfen_show","init_preset_key","usage_md","update:play_mode_long_sfen","play_mode_long_sfen_set","update:play_mode_short_sfen","play_mode_short_sfen_set","update:play_mode_move","play_mode_move_set","val","step","__r","play_mode_long_sfen","play_mode_short_sfen","play_mode_move","options_md","data-target","href","src","alt","height","parts","rows","space","toLowerCase","location_info","compact","shift_key_mag","system_key_mag","window","addEventListener","keydown_hook","dom","document","activeElement","controllers","$refs","first","previous","next","last","tagName","event","flip_sign","shiftKey","ctrlKey","altKey","metaKey","current_turn_add","focus_to","new_val","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1cb58a5f_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_PieceStand_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PieceStand_vue___default","__audio_context__","AudioContext","webkitAudioContext","buffer","__resource_load","is_loaded","source","createBufferSource","gain_node","createGain","connect","destination","gain","start","req","XMLHttpRequest","onreadystatechange","readyState","decodeAudioData","open","send","_preset_info","mediator_setup_by_preset","preset_info","forEach","piece_box_add","preset_info_values","init_preset_sfen","_soldier","_surface","new_soldier","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3a87a5fb_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CommentArea_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CommentArea_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_69ba6536_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ShogiPlayer_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ShogiPlayer_vue___default","_parser_base","before_point","line","md","_xregexp2","exec","__kif_format_move_regexp","_minimalisticAssert2","kif_lookup","sfen_parser","_move_infos","_comments_pack","kif_parser","regex","test","__location_by_upper_or_lower_case","_this3","_hold_pieces","piece_char","location_base","_this4","use","_buefy2","marked","renderer","Renderer","table","body","setOptions","ShogiPlayer","_ShogiPlayer2","_soldier2","have_piece_location","state_reset","origin_soldier","virtual_piece_create","origin_soldier2","piece_stand_click_shared","opponent_hold_pieces_move_to_my_hold_pieces","board_soldir_to_hold_pieces","cpu_location_p","put_on_my_piece_p","isEqual","shift_key","piece_transform","soldier_hold","__origin_soldier_create","piece_decriment","mouse_stick","$dialog","confirm","confirmText","cancelText","onConfirm","onCancel","virtual_piece_destroy","mousemove_hook","last_event","cursor_elem_set_pos","click_hook","which","cursor_elem","style","left","clientX","top","clientY","class_list","_piece_inner$classLis","createElement","classList","add","piece_inner","apply","_toConsumableArray3","appendChild","$el","removeChild","removeEventListener","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_95ba1cf0_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SettingModal_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SettingModal_vue___default"],"mappings":"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","file":"static/js/app.69356aae9e4de27efd7c.js","sourcesContent":["import _ from \"lodash\"\nimport { Location } from \"./location\"\n\nclass ParserBase {\n  constructor() {\n    this.kifu_body = null\n    this.header = {}\n  }\n\n  parse() {\n  }\n\n  get board() {\n    console.warn(\"not implemented\")\n  }\n\n  get hold_pieces() {\n    return _.reduce(Location.values, (a, e) => {\n      a[e.key] = {}\n      return a\n    }, {})\n  }\n\n  get turn_min() {\n    return 0\n  }\n\n  get turn_max() {\n    return this.turn_min + this.move_infos.length\n  }\n\n  location_by_offset(offset) {\n    const index = this.turn_min + offset + (this.komaochi_p ? 1 : 0)\n    let key = null\n    if ((index % 2) === 0) {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  get move_infos() {\n    console.warn(\"not implemented\")\n  }\n\n  get comments_pack() {\n    return null\n  }\n}\n\nexport { ParserBase }\n\nif (process.argv[1] === __filename) {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/parser_base.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-danger has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_vm._t(\"header\")],2),_vm._v(\" \"),_c('div',{staticClass:\"message-body\"},[_vm._t(\"default\",[_vm._v(\"(error_message)\")])],2)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d571a7b2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ErrorNotify.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d571a7b2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ErrorNotify.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ErrorNotify.vue\n// module id = null\n// module chunks = ","<template>\n<div class=\"shogi-player\" :class=\"[`theme-${theme}`, `size-${size}`, `variation-${variation}`, `run_mode-${current_mode}`, {debug_mode: debug_mode}, {digit_show: digit_show}]\">\n  <div v-if=\"error_message\">\n    <ErrorNotify>\n      <p slot=\"header\">ERROR</p>\n      <p>{{error_message}}</p>\n    </ErrorNotify>\n  </div>\n\n  <template v-if=\"!mediator\">\n    <i class=\"fas fa-spinner fa-pulse\"></i>\n  </template>\n\n  <div v-if=\"current_mode === 'edit_mode'\" class=\"edit_mode_controller\">\n    <div class=\"edit_mode_controller_wrap\">\n      <b-dropdown v-model=\"current_preset\">\n        <button class=\"button\" slot=\"trigger\">\n          <span>初期配置</span><b-icon icon=\"menu-down\"></b-icon>\n        </button>\n        <b-dropdown-item v-for=\"record in preset_info_values\" :value=\"record.key\" :key=\"record.key\">\n          {{record.name}}\n        </b-dropdown-item>\n      </b-dropdown>\n      <button class=\"button\" @click=\"all_flip\">先後反転</button>\n      <button class=\"button\" @click=\"init_location_toggle\">手番{{init_location.name}}</button>\n    </div>\n  </div>\n\n  <template v-if=\"mediator\">\n    <div class=\"turn_div\">\n      <template v-if=\"current_mode === 'view_mode' || current_mode === 'play_mode'\">\n        <template v-if=\"!turn_edit\">\n          <span class=\"turn_edit_text\" @click=\"turn_edit_run\">\n            <template v-if=\"current_mode === 'view_mode'\">\n              {{mediator.current_turn_label}}\n            </template>\n            <template v-if=\"current_mode === 'play_mode'\">\n              {{real_turn}}手目\n            </template>\n          </span>\n        </template>\n        <template v-if=\"turn_edit\">\n          <input type=\"number\" v-model.number=\"turn_edit_value\" @blur=\"turn_edit = false\" ref=\"turn_edit_input\" class=\"turn_edit_input\">\n        </template>\n      </template>\n      <span class=\"is-pulled-right modal_trigger_dots\" @click=\"setting_modal_p = true\"><b-icon icon=\"dots-vertical\" size=\"is-small\"></b-icon></span>\n      <b-modal :active.sync=\"setting_modal_p\" has-modal-card>\n        <SettingModal :run_mode.sync=\"current_mode\"></SettingModal>\n      </b-modal>\n    </div>\n    <div class=\"board_container flippable\" :class=\"{flip: flip}\">\n      <PieceStand class=\"flex_item\" :location_key=\"'white'\" :hold_pieces=\"mediator.realized_hold_pieces_of('white')\" />\n      <div class=\"flex_item board_wrap\">\n        <div class=\"overlay_navi previous\" @click.stop=\"navi_relative_move(-1, $event)\"></div>\n        <div class=\"overlay_navi next\"     @click.stop=\"navi_relative_move(+1, $event)\"></div>\n        <div class=\"overlay_navi flip_trigger_cell\" @click=\"board_flip_run\"></div>\n        <div class=\"board_outer\">\n          <table class=\"board_inner\">\n            <tr v-for=\"y in mediator.dimension\">\n              <template v-for=\"x in mediator.dimension\">\n                <td class=\"piece_outer\" :class=\"piece_outer_class([x - 1, y - 1])\" @click=\"board_click([x - 1, y - 1], $event)\" @click.right.prevent=\"board_click_right([x - 1, y - 1], $event)\">\n                  <div class=\"piece_inner_wrap\">\n                    <span class=\"piece_inner\" :class=\"mediator.board_piece_inner_class([x - 1, y - 1])\">\n                      {{mediator.cell_view([x - 1, y - 1])}}\n                    </span>\n                  </div>\n                </td>\n              </template>\n            </tr>\n          </table>\n        </div>\n      </div>\n      <div class=\"flex_item\">\n        <ul v-if=\"current_mode === 'edit_mode'\" class=\"piece_box\" @click=\"piece_box_other_click\" @click.right.prevent=\"hold_cancel\">\n          <li v-for=\"[piece, count] in mediator.piece_box_realize()\" @click.stop=\"piece_box_piece_click(piece, $event)\" :class=\"{holding_p: piece_box_have_p(piece)}\">\n            <div class=\"piece_outer\" :class=\"piece_box_piece_outer_class(piece)\">\n              <div class=\"piece_inner_wrap\">\n                <span class=\"piece_inner\" :class=\"piece_box_piece_inner_class(piece)\">{{piece.name}}</span>\n              </div>\n            </div>\n            <span v-if='count >= 2' class=\"piece_count\">{{count}}</span>\n          </li>\n        </ul>\n        <div v-if=\"current_mode !== 'edit_mode'\"></div><!-- 先手の駒台が上にくっつてしまうので防ぐため -->\n        <PieceStand :location_key=\"'black'\" :hold_pieces=\"mediator.realized_hold_pieces_of('black')\" />\n      </div>\n    </div>\n\n    <template v-if=\"current_mode === 'view_mode' || current_mode === 'play_mode'\">\n      <div v-if=\"controller_show\" class=\"controller_block buttons has-addons is-centered\">\n        <button ref=\"first\"    class=\"button first\"    @click.stop=\"move_to_first\"><b-icon icon=\"menu-left\"></b-icon></button>\n        <button ref=\"previous\" class=\"button previous\" @click.stop=\"relative_move(-1, $event)\"><b-icon icon=\"chevron-left\" size=\"is-small\"></b-icon></button>\n        <button ref=\"next\"     class=\"button next\"     @click.stop=\"relative_move(+1, $event)\"><b-icon icon=\"chevron-right\" size=\"is-small\"></b-icon></button>\n        <button ref=\"last\"     class=\"button last\"     @click.stop=\"move_to_last\"><b-icon icon=\"menu-right\"></b-icon></button>\n        <button                class=\"button flip\"     @click.stop=\"board_flip_run\"><b-icon icon=\"rotate-3d\" size=\"is-small\"></b-icon></button>\n      </div>\n      <template v-if=\"slider_show\">\n        <input type=\"range\" :value=\"real_turn\" @input=\"current_turn_set($event.target.value)\" :min=\"mediator.data_source.turn_min\" :max=\"mediator.data_source.turn_max\" ref=\"slider\" class=\"slider\" />\n      </template>\n    </template>\n\n    <div class=\"sfen_area is-size-7 has-text-grey\" v-if=\"sfen_show\">\n      {{mediator.to_sfen}}\n    </div>\n\n    <CommentArea :comments_pack=\"mediator.data_source.comments_pack\" :current_comments=\"mediator.current_comments\" />\n  </template>\n\n  <template v-if=\"debug_mode\">\n    <table class=\"table is-bordered is-narrow\">\n      <tr><th>current_mode</th><td>{{current_mode}}</td></tr>\n      <tr><th>update_counter</th><td>{{update_counter}}</td></tr>\n      <tr><th>place_from</th><td>{{place_from}}</td></tr>\n      <tr><th>have_piece</th><td>{{have_piece}}</td></tr>\n      <template v-if=\"mediator\">\n        <tr><th>駒箱</th><td>{{mediator.piece_box_realize()}}</td></tr>\n        <tr><th>持駒</th><td>{{mediator.hold_pieces}}</td></tr>\n        <tr><th>次の手番</th><td>{{mediator.current_location.key}}</td></tr>\n        <tr><th>SFEN</th><td>{{mediator.to_sfen}}</td></tr>\n        <tr><th>正規化手番</th><td>{{real_turn}}</td></tr>\n      </template>\n      <tr><th>start_turn</th><td>{{start_turn}}</td></tr>\n      <tr><th>current_turn</th><td>{{current_turn}}</td></tr>\n      <tr><th>interval_id</th><td>{{interval_id}}</td></tr>\n      <tr><th>key_event_capture</th><td>{{key_event_capture}}</td></tr>\n      <tr><th>current_preset</th><td>{{current_preset}}</td></tr>\n      <tr><th>moves</th><td>{{moves}}</td></tr>\n      <tr><th>init_sfen</th><td>{{init_sfen}}</td></tr>\n      <tr><th>init_location_key</th><td>{{init_location_key}}</td></tr>\n      <tr><th>play_mode_current_sfen</th><td>{{play_mode_current_sfen}}</td></tr>\n    </table>\n  </template>\n</div>\n</template>\n\n<script>\nimport _ from \"lodash\"\nimport Vue from 'vue'\n\nimport { Mediator } from \"../mediator\"\nimport { Place } from \"../place\"\nimport { SfenParser } from \"../sfen_parser\"\nimport { KifParser } from \"../kif_parser\"\n\n// components\nimport PieceStand from \"./PieceStand\"\nimport SettingModal from \"./SettingModal\"\nimport ErrorNotify from \"./ErrorNotify\"\nimport CommentArea from \"./CommentArea\"\n\n// mixins modules\nimport navi_module from \"./navi_module.js\"\nimport edit_mode_module from \"./edit_mode_module.js\"\nimport play_mode_module from \"./play_mode_module.js\"\nimport sound_module from \"./sound_module.js\"\nimport preset_module from \"./preset_module.js\"\nimport polling_module from \"./polling_module.js\"\n\n// To use lodash's _ in the vue template\nObject.defineProperty(Vue.prototype, '_', {value: _})\n\n// Log content type\n// localStorage.debug = \"axios\"\nrequire('axios-debug-log')({\n  request(debug, config) {\n    debug('Request with ' + config.headers['content-type'])\n  },\n  response(debug, response) {\n    debug(\n      'Response with ' + response.headers['content-type'],\n      'from ' + response.config.url\n    )\n  },\n  error(debug, error) {\n    // Read https://www.npmjs.com/package/axios#handling-errors for more info\n    debug('Boom', error)\n  }\n})\n\n/* eslint-disable no-new */\nexport default {\n  name: 'ShogiPlayer',\n\n  mixins: [\n    // ここで直接 require(\"./xxx.js\"), とは書けないので注意\n    navi_module,\n    edit_mode_module,\n    play_mode_module,\n    sound_module,\n    preset_module,\n    polling_module,\n  ],\n\n  /* eslint-disable */\n  props: {\n    run_mode:           { type: String,  default: \"view_mode\", },\n    kifu_body:          { type: String,  default: null,        },\n    start_turn:         { type: Number,  default: -1,          },\n    sfen_show:          { type: Boolean, default: false,       },\n    url_embed_turn:     { type: Boolean, default: false,       },\n    theme:              { type: String,  default: \"simple\",    },\n    size:               { type: String,  default: \"default\",   },\n    variation:          { type: String,  default: \"a\"          },\n    debug_mode:         { type: Boolean, default: false,       }, // process.env.NODE_ENV !== 'production'\n    digit_show:         { type: Boolean, default: false,       },\n  },\n  /* eslint-enable */\n\n  components: {\n    PieceStand,\n    SettingModal,\n    ErrorNotify,\n    CommentArea,\n  },\n\n  data() {\n    return {\n      current_mode: this.run_mode,\n      current_turn: this.start_turn, // N手目\n      turn_edit_value: null,         // numberフィールドで current_turn を直接操作すると空にしたとき補正値 0 に変換されて使いづらいため別にする。あと -1 のときの挙動もわかりやすい。\n      mediator: null,                // 局面管理\n      flip: false,                   // 反転したか？\n      turn_edit: false,              // N手目編集中\n      env: process.env.NODE_ENV,\n      error_message: null,\n      update_counter: 0,\n      setting_modal_p: false,\n    }\n  },\n\n  created() {\n    if (this.current_mode === \"view_mode\") {\n      if (this.kifu_url) {\n        this.axios_call()\n        this.polling_interval_update()\n      } else {\n        this.mediator_setup(this.start_turn)\n      }\n    }\n\n    if (this.current_mode === \"play_mode\") {\n      this.mediator_setup(this.start_turn)\n      this.play_mode_setup_from(\"view_mode\")\n    }\n\n    if (this.current_mode === \"edit_mode\") {\n      if (this.init_preset_key) {\n        this.mediator_setup_by_preset(this.init_preset_key) // 駒箱に「玉」を乗せたいため\n      } else {\n        this.mediator_setup(this.start_turn)\n      }\n    }\n  },\n\n  watch: {\n    current_turn(value) {\n      if (this.current_mode === \"view_mode\") {\n        this.view_mode_mediator_update(value)\n      }\n    },\n\n    turn_edit_value() {\n      if (true) {\n        // -1 になると current_turn を更新できないため最後の局面にはならない\n        this.current_turn_set(this.turn_edit_value)\n      } else {\n        // // -1 で最後を表示する場合\n        // this.current_turn = this.turn_edit_value\n      }\n    },\n\n    start_turn() {\n      this.current_turn = this.start_turn\n    },\n\n    kifu_body() {\n      this.mediator_setup(this.start_turn)\n      if (this.current_mode === \"play_mode\") {\n        this.play_mode_setup_from(\"view_mode\")\n      }\n    },\n\n    // -------------------------------------------------------------------------------- current_mode\n    run_mode(value) {\n      this.current_mode = value    // TODO: プロパティ(引数)と内部変数の名前が共有できたないためこんな複雑になっている。どうにかならないのか？\n    },\n\n    // ダイアログから変更されたとき\n    current_mode(new_val, old_val) {\n      if (this.current_mode === \"view_mode\") {\n        this.log(\"current_mode: view_mode\")\n        this.view_mode_mediator_update(this.real_turn)\n      }\n\n      if (this.current_mode === \"play_mode\") {\n        this.play_mode_setup_from(old_val)\n      }\n\n      if (this.current_mode === \"edit_mode\") {\n        this.log(\"current_mode: edit_mode\")\n        const position_sfen = this.mediator.to_position_sfen // mediator を作り直す前に現状の局面を吐き出しておく\n\n        this.mediator = new Mediator()\n        this.mediator.data_source = this.data_source_by(position_sfen)\n        this.mediator.current_turn = 0\n        this.mediator.run()\n\n        // this.current_turn = 0\n        this.init_location_key = this.mediator.current_location.key\n      }\n    },\n\n    // -------------------------------------------------------------------------------- other\n\n    // 引数は親が「変更」したときがトリガー\n    debug_mode(v) {\n      this.log(`watch debug_mode: ${v}`)\n    },\n  },\n\n  methods: {\n    mediator_setup(turn) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.kifu_source)\n      this.mediator.current_turn = turn\n      this.mediator.run()\n    },\n\n    view_mode_mediator_update(turn) {\n      this.mediator_setup(turn)\n      if (this.url_embed_turn) {\n        document.location.hash = this.real_turn\n      }\n      this.sound_call(\"piece_sound\")\n      this.update_counter++\n    },\n\n    data_source_by(str) {\n      let data_source = null\n      if (/position/.test(str)) {\n        data_source = new SfenParser()\n      } else {\n        data_source = new KifParser()\n      }\n      data_source.kifu_body = str\n      data_source.parse()\n      return data_source\n    },\n\n    turn_edit_run() {\n      this.turn_edit = true\n      this.turn_edit_value = this.real_turn\n      this.$nextTick(() => this.$refs.turn_edit_input.focus())\n    },\n\n    flip_sign() {\n      return this.flip ? -1 : 1\n    },\n\n    log(v) {\n      if (this.debug_mode) {\n        console.log(v)\n      }\n    },\n\n    piece_outer_class(xy) {\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n      const list = []\n\n      if (this.mediator.last_hand) {\n        const origin_place = this.mediator.last_hand.origin_place\n        if (origin_place) {\n          if (_.isEqual(origin_place, place)) {\n            list.push(\"origin_place\")\n          }\n        }\n        if (_.isEqual(this.mediator.last_hand.place, place)) {\n          list.push(\"current\")\n        }\n      }\n\n      if (_.isEqual(this.place_from, place)) {\n        list.push(\"holding_p\")\n      } else if (soldier) {\n        if (this.current_mode === \"edit_mode\" || (!this.cpu_location_p && this.mediator.current_location === soldier.location)) {\n          list.push(\"selectable_p\")\n        }\n      }\n\n      return list\n    },\n  },\n\n  computed: {\n    kifu_source() {\n      return this.kifu_body_from_url || this.kifu_body || this.init_preset_sfen || \"position startpos\"\n    },\n    real_turn() {\n      return this.mediator.real_turn\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\">\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ShogiPlayer.vue","import _ from \"lodash\"\n\nimport { SfenParser } from \"../sfen_parser\"\nimport { Mediator } from \"../mediator\"\nimport { Location } from \"../location\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    human_side: { type: String, default: \"black\", }, // black or white を指定すると指定してない側の操作をできないようにする\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      moves: [],                  // play_mode 時の棋譜\n      init_sfen: null,            // play_mode に入ったときの最初の状態\n      init_location_key: \"black\", // play_mode に入ったときの最初の手番\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    current_turn() {\n      if (this.current_mode === \"play_mode\") {\n        this.log(\"watch: current_turn\")\n        this.play_mode_mediator_update()\n        // this.current_turn = this.real_turn\n        // this.log(this.current_turn)\n        // this.update_counter += 1\n        // if (this.update_counter >= 1) {\n        this.sound_call(\"piece_sound\")\n        // }\n        // this.update_counter += 1\n      }\n    },\n  },\n\n  methods: {\n    play_mode_setup_from(old_val) {\n      this.log(\"play_mode_setup_from\")\n\n      // this.mediator_setup()\n      // if (old_val === \"view_mode\") {\n      //   this.init_location_key = this.mediator.current_location.key\n      // }\n      // const sfen_serializer = this.mediator.sfen_serializer\n      // this.init_sfen = \"position sfen \" + sfen_serializer.to_board_sfen + \" \" + this.init_location_key[0] + \" \" + sfen_serializer.to_hold_pieces + \" \" + \"1\"\n      // this.moves = []\n      //\n      // this.play_mode_mediator_update()\n\n      // this.mediator_setup()\n\n      if (this.mediator.data_source.init_sfen !== undefined) {\n        // 棋譜の最初からの指し手をすべて保持\n        this.init_sfen = this.mediator.data_source.init_sfen\n        this.moves = this.mediator.data_source.moves\n      } else {\n        // 現時点の状態から始める (KIFの場合)\n        if (old_val === \"view_mode\") {\n          this.init_location_key = this.mediator.current_location.key\n        }\n        const sfen_serializer = this.mediator.sfen_serializer\n        this.init_sfen = \"position sfen \" + sfen_serializer.to_board_sfen + \" \" + this.init_location.key[0] + \" \" + sfen_serializer.to_hold_pieces + \" \" + \"1\"\n        this.moves = []\n      }\n\n      this.play_mode_mediator_update()\n\n      // this.current_turn = 0\n\n      // this.mediator = new Mediator()\n      // this.mediator.data_source = this.data_source_by(this.init_sfen)\n      // this.mediator.current_turn = 0\n      // this.mediator.run()\n\n      // this.current_turn = this.real_turn\n      // this.current_turn = 0\n      // this.current_turn_watch_disable = false\n    },\n\n    play_mode_mediator_update() {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.play_mode_current_sfen)\n      this.mediator.current_turn = this.current_turn\n      this.mediator.run()\n    },\n\n    moves_set(value) {\n      this.moves = _.take(this.moves, this.real_turn) // 「待った」して指す場合を考慮してカレント以降の指し手を削除する\n      this.moves.push(value)\n      this.$emit(\"update:play_mode_long_sfen\", this.play_mode_current_sfen)\n      this.$emit(\"update:play_mode_move\", value)\n    },\n\n    turn_next() {\n      // this.sound_call(\"piece_sound\")\n\n      if (this.current_mode === \"play_mode\") {\n        const data_source = new SfenParser()\n        data_source.kifu_body = this.play_mode_current_sfen\n        data_source.parse()\n\n        this.mediator = new Mediator()\n        this.mediator.data_source = data_source\n        this.mediator.current_turn = -1\n        this.mediator.run()\n        this.current_turn = this.real_turn\n\n        this.$emit(\"update:play_mode_short_sfen\", this.mediator.to_position_sfen)\n        // this.current_turn = -1\n      }\n\n      // this.log(\"turn_next\")\n\n      // this.view_mode_mediator_update()\n    },\n  },\n\n  computed: {\n    play_mode_current_sfen() {\n      if (this.init_sfen) {\n        return this.init_sfen + \" moves \" + this.moves.join(\" \")\n      } else {\n        return null\n      }\n    },\n\n    init_location() {\n      return Location.fetch(this.init_location_key)\n    },\n\n    human_location() {\n      if (this.human_side) {\n        return Location.fetch(this.human_side)\n      } else {\n        return null\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/play_mode_module.js","<template>\n  <div class=\"modal-card has-text-left\" style=\"width: auto\">\n    <header class=\"modal-card-head\">\n      <p class=\"modal-card-title\">設定</p>\n    </header>\n    <section class=\"modal-card-body\">\n      <b-field label=\"モード\">\n        <div class=\"block\">\n          <b-radio v-model=\"current_mode\" native-value=\"view_mode\">再生</b-radio>\n          <b-radio v-model=\"current_mode\" native-value=\"play_mode\">操作</b-radio>\n          <b-radio v-model=\"current_mode\" native-value=\"edit_mode\">編集</b-radio>\n        </div>\n      </b-field>\n    </section>\n    <footer class=\"modal-card-foot\">\n      <button class=\"button is-primary\" @click=\"$parent.close()\">閉じる</button>\n    </footer>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    run_mode: {required: true},\n  },\n  data() {\n    return {\n      current_mode: this.run_mode,\n    }\n  },\n  watch: {\n    current_mode(value) {\n      this.$emit(\"update:run_mode\", value)\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SettingModal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shogi-player\",class:[(\"theme-\" + _vm.theme), (\"size-\" + _vm.size), (\"variation-\" + _vm.variation), (\"run_mode-\" + _vm.current_mode), {debug_mode: _vm.debug_mode}, {digit_show: _vm.digit_show}]},[(_vm.error_message)?_c('div',[_c('ErrorNotify',[_c('p',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"ERROR\")]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.error_message))])])],1):_vm._e(),_vm._v(\" \"),(!_vm.mediator)?[_c('i',{staticClass:\"fas fa-spinner fa-pulse\"})]:_vm._e(),_vm._v(\" \"),(_vm.current_mode === 'edit_mode')?_c('div',{staticClass:\"edit_mode_controller\"},[_c('div',{staticClass:\"edit_mode_controller_wrap\"},[_c('b-dropdown',{model:{value:(_vm.current_preset),callback:function ($$v) {_vm.current_preset=$$v},expression:\"current_preset\"}},[_c('button',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('span',[_vm._v(\"初期配置\")]),_c('b-icon',{attrs:{\"icon\":\"menu-down\"}})],1),_vm._v(\" \"),_vm._l((_vm.preset_info_values),function(record){return _c('b-dropdown-item',{key:record.key,attrs:{\"value\":record.key}},[_vm._v(\"\\n          \"+_vm._s(record.name)+\"\\n        \")])})],2),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":_vm.all_flip}},[_vm._v(\"先後反転\")]),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":_vm.init_location_toggle}},[_vm._v(\"手番\"+_vm._s(_vm.init_location.name))])],1)]):_vm._e(),_vm._v(\" \"),(_vm.mediator)?[_c('div',{staticClass:\"turn_div\"},[(_vm.current_mode === 'view_mode' || _vm.current_mode === 'play_mode')?[(!_vm.turn_edit)?[_c('span',{staticClass:\"turn_edit_text\",on:{\"click\":_vm.turn_edit_run}},[(_vm.current_mode === 'view_mode')?[_vm._v(\"\\n              \"+_vm._s(_vm.mediator.current_turn_label)+\"\\n            \")]:_vm._e(),_vm._v(\" \"),(_vm.current_mode === 'play_mode')?[_vm._v(\"\\n              \"+_vm._s(_vm.real_turn)+\"手目\\n            \")]:_vm._e()],2)]:_vm._e(),_vm._v(\" \"),(_vm.turn_edit)?[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.turn_edit_value),expression:\"turn_edit_value\",modifiers:{\"number\":true}}],ref:\"turn_edit_input\",staticClass:\"turn_edit_input\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.turn_edit_value)},on:{\"blur\":[function($event){_vm.turn_edit = false},function($event){_vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.turn_edit_value=_vm._n($event.target.value)}}})]:_vm._e()]:_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"is-pulled-right modal_trigger_dots\",on:{\"click\":function($event){_vm.setting_modal_p = true}}},[_c('b-icon',{attrs:{\"icon\":\"dots-vertical\",\"size\":\"is-small\"}})],1),_vm._v(\" \"),_c('b-modal',{attrs:{\"active\":_vm.setting_modal_p,\"has-modal-card\":\"\"},on:{\"update:active\":function($event){_vm.setting_modal_p=$event}}},[_c('SettingModal',{attrs:{\"run_mode\":_vm.current_mode},on:{\"update:run_mode\":function($event){_vm.current_mode=$event}}})],1)],2),_vm._v(\" \"),_c('div',{staticClass:\"board_container flippable\",class:{flip: _vm.flip}},[_c('PieceStand',{staticClass:\"flex_item\",attrs:{\"location_key\":'white',\"hold_pieces\":_vm.mediator.realized_hold_pieces_of('white')}}),_vm._v(\" \"),_c('div',{staticClass:\"flex_item board_wrap\"},[_c('div',{staticClass:\"overlay_navi previous\",on:{\"click\":function($event){$event.stopPropagation();_vm.navi_relative_move(-1, $event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"overlay_navi next\",on:{\"click\":function($event){$event.stopPropagation();_vm.navi_relative_move(+1, $event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"overlay_navi flip_trigger_cell\",on:{\"click\":_vm.board_flip_run}}),_vm._v(\" \"),_c('div',{staticClass:\"board_outer\"},[_c('table',{staticClass:\"board_inner\"},_vm._l((_vm.mediator.dimension),function(y){return _c('tr',[_vm._l((_vm.mediator.dimension),function(x){return [_c('td',{staticClass:\"piece_outer\",class:_vm.piece_outer_class([x - 1, y - 1]),on:{\"click\":function($event){_vm.board_click([x - 1, y - 1], $event)},\"contextmenu\":function($event){$event.preventDefault();_vm.board_click_right([x - 1, y - 1], $event)}}},[_c('div',{staticClass:\"piece_inner_wrap\"},[_c('span',{staticClass:\"piece_inner\",class:_vm.mediator.board_piece_inner_class([x - 1, y - 1])},[_vm._v(\"\\n                      \"+_vm._s(_vm.mediator.cell_view([x - 1, y - 1]))+\"\\n                    \")])])])]})],2)}))])]),_vm._v(\" \"),_c('div',{staticClass:\"flex_item\"},[(_vm.current_mode === 'edit_mode')?_c('ul',{staticClass:\"piece_box\",on:{\"click\":_vm.piece_box_other_click,\"contextmenu\":function($event){$event.preventDefault();return _vm.hold_cancel($event)}}},_vm._l((_vm.mediator.piece_box_realize()),function(ref){\nvar piece = ref[0];\nvar count = ref[1];\nreturn _c('li',{class:{holding_p: _vm.piece_box_have_p(piece)},on:{\"click\":function($event){$event.stopPropagation();_vm.piece_box_piece_click(piece, $event)}}},[_c('div',{staticClass:\"piece_outer\",class:_vm.piece_box_piece_outer_class(piece)},[_c('div',{staticClass:\"piece_inner_wrap\"},[_c('span',{staticClass:\"piece_inner\",class:_vm.piece_box_piece_inner_class(piece)},[_vm._v(_vm._s(piece.name))])])]),_vm._v(\" \"),(count >= 2)?_c('span',{staticClass:\"piece_count\"},[_vm._v(_vm._s(count))]):_vm._e()])})):_vm._e(),_vm._v(\" \"),(_vm.current_mode !== 'edit_mode')?_c('div'):_vm._e(),_vm._v(\" \"),_c('PieceStand',{attrs:{\"location_key\":'black',\"hold_pieces\":_vm.mediator.realized_hold_pieces_of('black')}})],1)],1),_vm._v(\" \"),(_vm.current_mode === 'view_mode' || _vm.current_mode === 'play_mode')?[(_vm.controller_show)?_c('div',{staticClass:\"controller_block buttons has-addons is-centered\"},[_c('button',{ref:\"first\",staticClass:\"button first\",on:{\"click\":function($event){$event.stopPropagation();return _vm.move_to_first($event)}}},[_c('b-icon',{attrs:{\"icon\":\"menu-left\"}})],1),_vm._v(\" \"),_c('button',{ref:\"previous\",staticClass:\"button previous\",on:{\"click\":function($event){$event.stopPropagation();_vm.relative_move(-1, $event)}}},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\",\"size\":\"is-small\"}})],1),_vm._v(\" \"),_c('button',{ref:\"next\",staticClass:\"button next\",on:{\"click\":function($event){$event.stopPropagation();_vm.relative_move(+1, $event)}}},[_c('b-icon',{attrs:{\"icon\":\"chevron-right\",\"size\":\"is-small\"}})],1),_vm._v(\" \"),_c('button',{ref:\"last\",staticClass:\"button last\",on:{\"click\":function($event){$event.stopPropagation();return _vm.move_to_last($event)}}},[_c('b-icon',{attrs:{\"icon\":\"menu-right\"}})],1),_vm._v(\" \"),_c('button',{staticClass:\"button flip\",on:{\"click\":function($event){$event.stopPropagation();return _vm.board_flip_run($event)}}},[_c('b-icon',{attrs:{\"icon\":\"rotate-3d\",\"size\":\"is-small\"}})],1)]):_vm._e(),_vm._v(\" \"),(_vm.slider_show)?[_c('input',{ref:\"slider\",staticClass:\"slider\",attrs:{\"type\":\"range\",\"min\":_vm.mediator.data_source.turn_min,\"max\":_vm.mediator.data_source.turn_max},domProps:{\"value\":_vm.real_turn},on:{\"input\":function($event){_vm.current_turn_set($event.target.value)}}})]:_vm._e()]:_vm._e(),_vm._v(\" \"),(_vm.sfen_show)?_c('div',{staticClass:\"sfen_area is-size-7 has-text-grey\"},[_vm._v(\"\\n      \"+_vm._s(_vm.mediator.to_sfen)+\"\\n    \")]):_vm._e(),_vm._v(\" \"),_c('CommentArea',{attrs:{\"comments_pack\":_vm.mediator.data_source.comments_pack,\"current_comments\":_vm.mediator.current_comments}})]:_vm._e(),_vm._v(\" \"),(_vm.debug_mode)?[_c('table',{staticClass:\"table is-bordered is-narrow\"},[_c('tr',[_c('th',[_vm._v(\"current_mode\")]),_c('td',[_vm._v(_vm._s(_vm.current_mode))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"update_counter\")]),_c('td',[_vm._v(_vm._s(_vm.update_counter))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"place_from\")]),_c('td',[_vm._v(_vm._s(_vm.place_from))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"have_piece\")]),_c('td',[_vm._v(_vm._s(_vm.have_piece))])]),_vm._v(\" \"),(_vm.mediator)?[_c('tr',[_c('th',[_vm._v(\"駒箱\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.piece_box_realize()))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"持駒\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.hold_pieces))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"次の手番\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.current_location.key))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"SFEN\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.to_sfen))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"正規化手番\")]),_c('td',[_vm._v(_vm._s(_vm.real_turn))])])]:_vm._e(),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"start_turn\")]),_c('td',[_vm._v(_vm._s(_vm.start_turn))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"current_turn\")]),_c('td',[_vm._v(_vm._s(_vm.current_turn))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"interval_id\")]),_c('td',[_vm._v(_vm._s(_vm.interval_id))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"key_event_capture\")]),_c('td',[_vm._v(_vm._s(_vm.key_event_capture))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"current_preset\")]),_c('td',[_vm._v(_vm._s(_vm.current_preset))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"moves\")]),_c('td',[_vm._v(_vm._s(_vm.moves))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"init_sfen\")]),_c('td',[_vm._v(_vm._s(_vm.init_sfen))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"init_location_key\")]),_c('td',[_vm._v(_vm._s(_vm.init_location_key))])]),_vm._v(\" \"),_c('tr',[_c('th',[_vm._v(\"play_mode_current_sfen\")]),_c('td',[_vm._v(_vm._s(_vm.play_mode_current_sfen))])])],2)]:_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-69ba6536\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ShogiPlayer.vue\n// module id = 3n+c\n// module chunks = 1","import _ from \"lodash\"\n\nimport { Sound } from '../sound'\n\nimport piece_sound_wav from \"../assets/piece_sound.wav\"\nimport flip_sound_wav from \"../assets/flip_sound.wav\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    sound_effect: { type: Boolean, default: false, },\n    volume:       { type: Number,  default: 0.5,   },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      piece_sound: null,\n    }\n  },\n\n  created() {\n    this.sound_setup()\n  },\n\n  watch: {\n    sound_effect() {\n      this.sound_setup()\n    },\n\n    volume() {\n      this.sound_setup()\n    },\n  },\n\n  methods: {\n    sound_call(key) {\n      if (this.sound_effect) {\n        const object = this[key]\n        if (object) {\n          object.play()\n        }\n      }\n    },\n\n    sound_setup() {\n      this.sound_load(\"piece_sound\", piece_sound_wav)\n      this.sound_load(\"flip_sound\", flip_sound_wav)\n    },\n\n    sound_load(key, file) {\n      if (this.sound_effect) {\n        const object = this[key]\n        if (_.isNil(object)) {\n          this[key] = new Sound(file)\n        }\n        this[key].options[\"volume\"] = this.volume\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sound_module.js","import { MemoryRecord } from \"./memory_record\"\n\nclass PresetInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"詰将棋\",     sfen: \"position sfen 4k4/9/9/9/9/9/9/9/9 b rb4g4s4n4l18p 1\",                           piece_box: [[\"K\", 1]]},\n      { key: \"平手\",       sfen: \"position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\", piece_box: []},\n      { key: \"香落ち\",     sfen: \"position sfen lnsgkgsn1/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\", piece_box: [[\"L\", 1]]},\n      // { key: \"右香落ち\",   sfen: \"position sfen 1nsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\", piece_box: [[\"L\", 1]]},\n      { key: \"角落ち\",     sfen: \"position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",   piece_box: [[\"B\", 1]]},\n      { key: \"飛車落ち\",   sfen: \"position sfen lnsgkgsnl/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",   piece_box: [[\"R\", 1]]},\n      { key: \"飛香落ち\",   sfen: \"position sfen lnsgkgsn1/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",   piece_box: [[\"R\", 1], [\"L\", 1]]},\n      { key: \"二枚落ち\",   sfen: \"position sfen lnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",     piece_box: [[\"B\", 1], [\"R\", 1]]},\n      // { key: \"三枚落ち\",   sfen: \"position sfen lnsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",     piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 1]]},\n      { key: \"四枚落ち\",   sfen: \"position sfen 1nsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",     piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2]]},\n      { key: \"六枚落ち\",   sfen: \"position sfen 2sgkgs2/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",       piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2]]},\n      { key: \"八枚落ち\",   sfen: \"position sfen 3gkg3/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",         piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2]]},\n      { key: \"十枚落ち\",   sfen: \"position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",           piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2]]},\n      { key: \"十九枚落ち\", sfen: \"position sfen 4k4/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",                   piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2], [\"P\", 9]]},\n      // { key: \"二十枚落ち\", sfen: \"position sfen 9/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",                     piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2], [\"P\", 9], [\"K\", 1]]},\n      /* eslint-enable */\n    ]\n  }\n\n  get sfen() {\n    return this.attributes.sfen\n  }\n\n  get piece_box() {\n    return this.attributes.piece_box\n  }\n}\n\nexport { PresetInfo }\n\nif (process.argv[1] === __filename) {\n  console.log(PresetInfo.fetch(\"平手\"))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/preset_info.js","<template>\n<div class=\"comment_area\" v-if=\"comments_pack\">\n  <div v-if=\"current_comments\">\n    <div class=\"columns\">\n      <div class=\"column\"><!-- is-three-fifths is-offset-one-fifth -->\n        <article class=\"message is-info has-text-left\">\n          <div class=\"message-body\">\n            <div class=\"content\">\n              <template v-for=\"str in current_comments\">\n                <template v-if=\"_.isEmpty(str)\">\n                  <br>\n                </template>\n                <template v-else>\n                  <div v-html=\"auto_link(str)\"></div>\n                </template>\n              </template>\n            </div>\n          </div>\n        </article>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport _ from \"lodash\"\nimport Autolinker from 'autolinker'\n\n// To use lodash's _ in the vue template\nObject.defineProperty(Vue.prototype, '_', {value: _})\n\nexport default {\n  props: {\n    comments_pack: { required: true },\n    current_comments: { required: true },\n  },\n\n  created() {\n    this.autolinker = new Autolinker()\n  },\n\n  methods: {\n    auto_link(str) {\n      return this.autolinker.link(str)\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/CommentArea.vue","import axios from \"axios\"\nconst logger_debug = require('debug')('debug')\n\nexport default {\n  /* eslint-disable */\n  props: {\n    kifu_url:           { type: String,  default: null, },\n    polling_interval:   { type: Number,  default: 0,    },\n    last_after_polling: { type: Boolean, default: true, },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      interval_id: null,\n      kifu_body_from_url: null,\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    kifu_url() {\n      this.axios_call()\n    },\n    polling_interval() {\n      this.polling_interval_update()\n    },\n  },\n\n  methods: {\n    polling_interval_update() {\n      if (this.polling_interval >= 1) {\n        if (this.interval_id) {\n          this.log(`clearInterval(${this.interval_id})`)\n          clearInterval(this.interval_id)\n          this.interval_id = null\n        }\n        this.interval_id = setInterval(() => { this.axios_call() }, this.polling_interval * 1000)\n        this.log(`setInterval() => ${this.interval_id}`)\n      }\n    },\n\n    axios_call() {\n      const url = this.kifu_url\n      // const url = \"http://localhost:3000/wr/hanairobiyori-ispt-20171104_220810.kif\"\n      // const url = \"http://tk2-221-20341.vs.sakura.ne.jp/shogi/wr/ureshino_friend-doglong-20180122_213544.kif\"\n      const accessd_at = Date.now().toString()\n      axios({\n        url: url,\n        method: \"get\",\n        params: {\"accessd_at\": accessd_at},\n        responseType: \"text\",\n        timeout: 1000 * 3,\n        headers: {\"X-SHOGI-PLAYER-TIMESTAMP\": accessd_at},\n      }).then((response) => {\n        this.error_message = null\n        this.kifu_body_from_url = response.data\n        this.mediator_setup(this.start_turn)\n      }).catch((error) => {\n        if (error.response) {\n          logger_debug(\"error.response.data: %o\", error.response.data)\n          logger_debug(\"error.response.status: %o\", error.response.status)\n          logger_debug(\"error.response.statusText: %o\", error.response.statusText)\n          logger_debug(\"error.response.headers: %o\", error.response.headers)\n        } else if (error.request) {\n          logger_debug(\"error.request: %o\", error.request)\n        } else {\n          logger_debug('error.message: %o', error.message)\n        }\n        logger_debug('error.config: %o', error.config)\n\n        this.kifu_body_from_url = null\n        this.error_message = error.message\n      })\n    },\n  },\n\n  computed: {\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/polling_module.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"piece_stand_outer\",class:_vm.piece_stand_outer_class},[_c('div',{staticClass:\"location_mark\",domProps:{\"innerHTML\":_vm._s(_vm.location_name)}}),_vm._v(\" \"),_c('ul',{staticClass:\"piece_stand\",on:{\"click\":function($event){$event.stopPropagation();_vm.$parent.piece_stand_click(_vm.location, $event)},\"contextmenu\":function($event){$event.preventDefault();return _vm.$parent.hold_cancel($event)}}},_vm._l((_vm.hold_pieces),function(ref){\nvar piece = ref[0];\nvar count = ref[1];\nreturn _c('li',{on:{\"click\":function($event){$event.stopPropagation();_vm.$parent.piece_stand_piece_click(_vm.location, piece, $event)}}},[_c('div',{staticClass:\"piece_outer\",class:_vm.piece_outer_class(piece)},[_c('div',{staticClass:\"piece_inner_wrap\"},[_c('span',{staticClass:\"piece_inner\",class:_vm.piece_class(piece)},[_vm._v(_vm._s(piece.name))])])]),_vm._v(\" \"),(count >= 2)?_c('span',{staticClass:\"piece_count\"},[_vm._v(_vm._s(count))]):_vm._e()])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1cb58a5f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PieceStand.vue\n// module id = 7rXg\n// module chunks = 1","// Example.\n//\n//   import { MemoryRecord } from \"./memory_record\"\n//\n//   class Foo extends MemoryRecord {\n//     static get define() {\n//       return [\n//         { key: \"black\", name: '☗', },\n//         { key: \"white\", name: '☖', },\n//       ]\n//     }\n//\n//     get flip() {\n//       return Foo.values[(this.code + 1) % Foo.values.length]\n//     }\n//   }\n//\n//   Foo.lookup(\"black\").key           // => \"black\"\n//   Foo.values[0] === Foo.values[0]   // => true\n//\n\nimport _ from \"lodash\"\n\nclass MemoryRecord {\n  static get define() {\n    console.warn(\"not implemented\")\n\n    return [\n      { key: \"(key_x)\", },\n      { key: \"(key_y)\", },\n    ]\n  }\n\n  static lookup(key) {\n    if (key instanceof this) {\n      return key\n    }\n    return this.values_map[key]\n  }\n\n  static fetch(key) {\n    const element = this.lookup(key)\n    if (!element) {\n      throw new Error(`Key not found: ${key}`)\n    }\n    return element\n  }\n\n  static get values_map() {\n    this._values_map = this._values_map || _.reduce(this.define, (a, e, i) => { // http://devdocs.io/lodash~4/index#reduce\n      a[e.key] = Object.freeze(new this(Object.assign({}, e, {code: i})))\n      return a\n    }, {})\n    return this._values_map\n  }\n\n  static get values() {\n    this._values = this._values || Object.values(this.values_map)\n    return this._values\n  }\n\n  constructor(attributes) {\n    this.attributes = attributes\n  }\n\n  get key() {\n    return this.attributes.key\n  }\n\n  get name() {\n    return this.attributes.name || this.key.toString()\n  }\n\n  get code() {\n    return this.attributes.code\n  }\n}\n\nexport { MemoryRecord }\n\nif (process.argv[1] === __filename) {\n  console.log(MemoryRecord.values)\n  console.log(MemoryRecord.lookup(\"(key_x)\").name)\n  console.log(MemoryRecord.lookup(\"(key_x)\").code)\n\n  let v = MemoryRecord.lookup(\"(key_x)\")\n  console.log(v instanceof MemoryRecord)\n\n  console.log(MemoryRecord.values[0] === MemoryRecord.values[0])\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/memory_record.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-card has-text-left\",staticStyle:{\"width\":\"auto\"}},[_vm._m(0),_vm._v(\" \"),_c('section',{staticClass:\"modal-card-body\"},[_c('b-field',{attrs:{\"label\":\"モード\"}},[_c('div',{staticClass:\"block\"},[_c('b-radio',{attrs:{\"native-value\":\"view_mode\"},model:{value:(_vm.current_mode),callback:function ($$v) {_vm.current_mode=$$v},expression:\"current_mode\"}},[_vm._v(\"再生\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"play_mode\"},model:{value:(_vm.current_mode),callback:function ($$v) {_vm.current_mode=$$v},expression:\"current_mode\"}},[_vm._v(\"操作\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"edit_mode\"},model:{value:(_vm.current_mode),callback:function ($$v) {_vm.current_mode=$$v},expression:\"current_mode\"}},[_vm._v(\"編集\")])],1)])],1),_vm._v(\" \"),_c('footer',{staticClass:\"modal-card-foot\"},[_c('button',{staticClass:\"button is-primary\",on:{\"click\":function($event){_vm.$parent.close()}}},[_vm._v(\"閉じる\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"modal-card-head\"},[_c('p',{staticClass:\"modal-card-title\"},[_vm._v(\"設定\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-95ba1cf0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SettingModal.vue\n// module id = C5k/\n// module chunks = 1","module.exports = \"# --- Kifu for Windows (Pro) V6.65.07 棋譜ファイル ---\\n対局ID：7151\\n記録ID：5a44ac5b15764900041b28c2\\n開始日時：2018/01/14 14:00\\n終了日時：2018/01/14 16:10\\n表題：朝日杯将棋オープン戦\\n棋戦：第11回朝日杯将棋オープン戦本戦\\n戦型：横歩取り△３三角型\\n持ち時間：各40分\\n消費時間：121▲40△40\\n場所：愛知県・東桜会館\\n振り駒：1,0,佐\\n計時方式：チェスクロック\\n秒読み：60秒\\n先手消費時間加算：0\\n後手消費時間加算：0\\n手合割：平手　　\\n先手：藤井聡太四段\\n後手：佐藤天彦名人\\n先手省略名：藤井聡\\n後手省略名：佐藤天\\n手数----指手---------消費時間--\\n*佐藤天彦名人に藤井聡太四段が挑む。第11回朝日杯将棋オープン戦（主催：朝日新聞社）本戦２回戦、佐藤天彦名人−藤井聡太四段戦は１月14日の14時に開始される。対局場は愛知県名古屋市「東桜会館」。持ち時間は各40分（チェスクロック使用）、切れると一分将棋。\\n*名古屋の公開対局の協賛は、東海東京証券、トーエネック、豊田自動織機、松坂屋名古屋店、明治。\\n*本局は本局は朝日新聞デジタル（主に現地大盤解説）、ニコニコ生放送、AbemaTVで動画中継が行われる。現地大盤解説会は木村一基九段・杉本昌隆七段・貞升南女流初段・中澤沙耶女流初段、ニコニコ生放送は井出隼平四段・塚田恵梨花女流１級、AbemaTVは三枚堂達也六段・佐々木大地四段・中村桃子女流初段・飯野愛女流１級が担当する。\\n*\\n*【第11回 朝日杯将棋オープン戦 名古屋対局｜朝日新聞デジタル】\\n*http://www.asahi.com/ad/asahihai2018/ \\n*\\n*【第11回朝日杯将棋オープン戦 本戦 佐藤天彦名人・永瀬拓矢七段・澤田真吾六段・藤井聡太四段 Cブロック - 2018/01/14 10:00開始 - ニコニコ生放送】\\n*http://live.nicovideo.jp/watch/lv310027714 \\n*\\n*【第11回朝日杯将棋オープン戦本戦トーナメント1-2回戦 | AbemaTV(アベマTV)】 \\n*https://abema.tv/channels/shogi/slots/9J1e3V9tVDdC95 \\n*\\n*(棋譜･コメント入力=紋蛇)\\n*[棋譜表示の*はコメント付きの指し手。#は局後の感想が追記された指し手。【】内は中継ブログタイトルならびにリンク]\\n   1 ２六歩(27)   ( 0:16/00:00:16)\\n*佐藤の振り歩先で振り駒が行われ、と金が４枚。藤井の先手が決まった。\\n   2 ３四歩(33)   ( 0:22/00:00:22)\\n*藤井が公式戦でタイトルホルダーと対戦するのは、本局が初めて。名人との対局とあって、報道陣がずらりと並んでいる。\\n   3 ７六歩(77)   ( 0:06/00:00:22)\\n*◆藤井 聡太（ふじい そうた）四段◆\\n*2002年７月19日生まれ、愛知県瀬戸市出身。杉本昌隆七段門下。2016年、四段。棋士番号は307。\\n   4 ８四歩(83)   ( 0:13/00:00:35)\\n*◆佐藤 天彦（さとう あまひこ）名人◆ 1988年１月16日生まれ、福岡県福岡市出身。中田功七段門下。2006年、四段。2016年、九段。棋士番号は263。 タイトル戦登場は４回。獲得は名人２期。棋戦優勝は３回。\\n   5 ２五歩(26)   ( 0:09/00:00:31)\\n*藤井の今年度成績は47勝11敗(0.810)\\n*通算成績は57勝11敗(0.838)\\n   6 ８五歩(84)   ( 0:16/00:00:51)\\n*佐藤の今年度成績は15勝15敗（0.500）\\n*通算成績は318勝145敗（0.687）\\n   7 ７八金(69)   ( 0:04/00:00:35)\\n*藤井は朝日杯に今回からの参加。一次予選で藤岡隼太アマ、大石直嗣六段、竹内雄悟四段、宮本広志五段を破って二次予選入り。二次予選で屋敷伸之九段、松尾歩八段を破って本戦に進んだ。本日行われた本戦１回戦では、澤田真吾六段を破った。\\n   8 ３二金(41)   ( 0:09/00:01:00)\\n*佐藤は本戦から登場し、１回戦で永瀬拓矢七段に勝った。朝日杯には第１回から参加し、14勝10敗(0.583)。本戦参加は第９、10回に続いてで、過去２回は１回戦で敗退している。\\n   9 ２四歩(25)   ( 0:04/00:00:39)\\n*朝日新聞デジタルでは、藤井の特集が多く組まれている。朝日杯全棋譜と解説、自宅でくつろぐ様子、藤井のライバルや名人戦・順位戦の説明など、盛りだくさんだ。\\n*\\n*【藤井四段、地元で初の公式戦へ　朝日杯将棋オープン戦：朝日新聞デジタル】\\n*https://www.asahi.com/articles/ASL1C3T6JL1COIPE00J.html \\n*\\n*【藤井聡太四段、朝日杯に挑む - 第11回朝日杯将棋オープン戦中継：朝日新聞デジタル】\\n*http://www.asahi.com/shougi/asahicup_live/fujii_souta/ \\n*\\n*【将棋｜名人への道 藤井聡太：朝日新聞デジタル】\\n*http://www.asahi.com/shougi/fujii_sota/ \\n*\\n*【藤井聡太に関するトピックス：朝日新聞デジタル】\\n*http://www.asahi.com/topics/word/%E8%97%A4%E4%BA%95%E8%81%A1%E5%A4%AA.html?iref=pc_extlink \\n  10 同　歩(23)   ( 0:10/00:01:10)\\n  11 同　飛(28)   ( 0:06/00:00:45)\\n  12 ８六歩(85)   ( 0:12/00:01:22)\\n  13 同　歩(87)   ( 0:07/00:00:52)\\n  14 同　飛(82)   ( 0:09/00:01:31)\\n  15 ３四飛(24)   ( 0:07/00:00:59)\\n*横歩取りへ。藤井は３局経験しているが、３連敗と苦戦している。\\n  16 ３三角(22)   ( 0:12/00:01:43)\\n*横歩取りは佐藤が名人獲得の原動力になった戦法。エースを新鋭との勝負に持ってきた。\\n  17 ５八玉(59)   ( 0:17/00:01:16)\\n*▲５八玉は今月６日の王位戦予選・大橋貴洸戦で指した手。ほかに▲６八玉と▲３六飛を指していた。▲５八玉は▲３六歩から▲３七桂の青野流を含みにしている。\\n  18 ６二玉(51)   ( 1:31/00:03:14)\\n*「これは佐藤名人が力戦に誘導しようとしていますね」（木村一基九段）\\n*△６二玉の前例は５局しかない。圧倒的に多いのは△５二玉だった。\\n*\\n*※局後の感想※\\n*「△６二玉は指してみたい手でした」（佐藤）\\n  19 ３六飛(34)   ( 3:47/00:05:03)\\n*３分47秒の考慮で▲３六飛。藤井は飛車を引く。穏やかな手で、突っ張るなら▲３六歩から▲３七桂が予想された。\\n  20 ８四飛(86)   ( 2:54/00:06:08)\\n*後手は△６二玉と上がったので、次は△７二銀や△７二玉から後手陣の右辺に囲うことになりそうだ。\\n  21 ３八金(49)   ( 3:01/00:08:04)\\n*先手は金開きに構える。\\n*「△２四飛に▲２七歩は、△８四飛と戻られて歩の打ち損です。▲２八銀と受けるのが形です」（木村九段）\\n*「以下△２七歩に、▲同銀は△８八角成▲同銀△５四角と攻められるので、▲３九銀と引いてどうか」（鈴木大介九段）\\n*\\n*※局後の感想※\\n*「▲３八金に代えて▲２六飛は、△８八角成▲同銀△４四角で先手不利です」（藤井）\\n  22 ９四歩(93)   ( 3:49/00:09:57)\\n  23 ９六歩(97)   ( 2:53/00:10:57)\\n  24 ７二銀(71)   ( 0:24/00:10:21)\\n  25 ４八銀(39)   ( 1:23/00:12:20)\\n  26 ２四飛(84)   ( 4:00/00:14:21)\\n*先手は４筋に銀を上がったので、２筋に歩を受けるしかない。\\n  27 ２八歩打     ( 1:06/00:13:26)\\n*低く受ける。形が悪いが、「▲２七歩は△８八角成▲同銀△５四角の筋が気になったのでしょう」と木村九段。\\n  28 ８四飛(24)   ( 1:48/00:16:09)\\n*歩を打たせたことに満足して、飛車をもとの位置に戻す。横歩取りは大駒の働きに加えて、持ち歩の数が重要。２筋に歩が打てないので、先手の攻め筋が減っている。後手が少しポイントを挙げた。\\n*「後手は玉を中住まいに戻すんじゃないかな」（木村九段）\\n  29 ７七桂(89)   ( 0:21/00:13:47)\\n*先手はどこに主張を求めるかが難しい。▲８七歩はさらに持ち歩が減るので、打ちにくかった。▲７七桂は△８六歩に▲８五歩を用意している。\\n  30 ５二玉(62)   ( 2:34/00:18:43)\\n*「ほら」（木村九段）\\n*「自分だったら浮かばないな」（鈴木九段）\\n*佐藤は玉を中住まいにした。木村九段が指摘していた構想だ。玉寄りは手損でも、先手に２筋の歩を打たせたのが大きいと見ている。\\n  31 ２六飛(36)   ( 3:38/00:17:25)\\n*飛車成りをどう受けるか、態度を尋ねた。持ち歩を温存するなら△２二銀。△４二銀と上がりたいなら△２三歩や△２四歩が考えられる。\\n*\\n*※局後の感想※\\n*▲２六飛に代えて▲５六飛△４二銀▲２六飛もあった。後手は４二に銀を上がっているので、２筋に歩を打って受けることになる。\\n  32 ２二銀(31)   ( 0:19/00:19:02)\\n  33 ５六飛(26)   ( 0:15/00:17:40)\\n*「先手は▲３六歩から▲３七桂で、２枚の桂を跳ねる攻めを狙うのでしょうか」（鈴木九段）\\n  34 ４二角(33)   ( 0:43/00:19:45)\\n*角を引き、あらかじめ▲３七桂から▲４五桂の当たりを避ける。△３三銀から△４四銀と中央に使えば、玉が堅い。\\n  35 ７五歩(76)   ( 1:08/00:18:48)\\n*飛車の可動域を広げた。▲８五歩△２四飛▲８六飛と使うのかもしれない。\\n  36 ４一玉(52)   ( 1:15/00:21:00)\\n*さらに玉を後手陣の左辺に進める。代えて△６四歩は、▲８五歩で△８二飛と引く手に限定された。\\n  37 ８五歩打     ( 1:10/00:19:58)\\n  38 ２四飛(84)   ( 0:17/00:21:17)\\n*互いに模様の取り方が難しい。横歩取りは研究将棋になりやすい戦型だが、本局は力戦形。構想力が問われている。\\n  39 ３六歩(37)   ( 0:28/00:20:26)\\n  40 ３三銀(22)   ( 0:47/00:22:04)\\n  41 ３七桂(29)   ( 0:13/00:20:39)\\n*眠っていた桂を使った。\\n  42 ４四銀(33)   ( 1:15/00:23:19)\\n*▲４五桂を先に受ける。後手は７二銀と６一金を使いにくいのが課題。\\n  43 ８四歩(85)   ( 0:34/00:21:13)\\n*飛車の横利きが止まったのを見て、すかさず伸ばす。\\n  44 ８二歩打     ( 0:28/00:23:47)\\n*▲８三歩成△同銀▲８二歩を受けた。後手は歩を手放したので、主張が減っている。\\n  45 ４六歩(47)   ( 0:50/00:22:03)\\n  46 ３三桂(21)   ( 0:22/00:24:09)\\n  47 ４七銀(48)   ( 1:19/00:23:22)\\n*木村九段と鈴木九段は、先手の模様がよいと見ている。\\n*「後手も歩を手放したから、そうなると歩得の先手がよく見えます」（鈴木九段）\\n*「４七銀の形ができているからなぁ。後手のほうが駒組みに苦労しそうです」（木村九段）\\n  48 ６四歩(63)   ( 5:22/00:29:31)\\n*先手は▲２七歩や▲６八銀など、指したい手が多い。後手は△６三銀と上がれない。▲８三歩成△同歩▲８二歩と攻められてしまう。しかし、このままでは７二銀と６一金が使えない。\\n*\\n*※局後の感想※\\n*△６四歩に代えて△２五桂だったか。佐藤は▲同桂△同飛▲３七桂で後手がつまらないと見た。以下△７五飛は▲９七角△７四飛▲４五歩△３三銀▲６五桂で中央突破できる先手がよいが、△２四飛▲６五桂△５二金▲４五桂△６一桂は難しい。\\n  49 ７六飛(56)   ( 1:19/00:24:41)\\n*先手は角を９七に使うことになりそうか。左辺だけ見れば石田流の形である。\\n  50 ５四歩(53)   ( 1:28/00:30:59)\\n*「▲７四歩と来てくれれば、△同歩▲同飛△６三銀▲７六飛△７四歩▲８三歩成△同歩▲８二歩と勝負できるかもしれないですが。このままだと、金銀が使えません」（鈴木九段）\\n  51 ６八銀(79)   ( 0:54/00:25:35)\\n*先手は７筋の壁を解消でき、強く戦えるようになった。\\n  52 １四歩(13)   ( 1:05/00:32:04)\\n*※局後の感想※\\n*△１四歩に代えて△５五歩は、▲５六歩で反発される。\\n*「後手は厚みがないので。▲５六歩に指したい手がないです」（佐藤）\\n  53 ５六歩(57)   ( 1:08/00:26:43)\\n  54 ３五歩打     ( 1:15/00:33:19)\\n*「勝負手だ」「機敏だ」「待っていたんだよ、飛車の利きが止まるのを」「難しくなったか」\\n*木村九段と鈴木九段が声をそろえる。▲３五同歩は△同銀▲３六歩△２六銀で、△３七銀成▲同金△２八飛成や△２七歩が受からない。▲５六歩を突かないで飛車の横利きを通していれば、３五に銀が来ても▲４五歩と軽く受けることができた。\\n*15時ごろの局面。現局面までの消費時間は▲藤井26分、△佐藤33分。\\n  55 ８五桂(77)   ( 3:05/00:29:48)\\n*角を働かせて攻めを待つ。\\n  56 ３六歩(35)   ( 0:41/00:34:00)\\n  57 同　銀(47)   ( 0:10/00:29:58)\\n  58 ３四飛(24)   ( 0:25/00:34:25)\\n*本格的な戦いが始まった。▲４七銀は△３六歩がある。\\n  59 ２七金(38)   ( 1:52/00:31:50)\\n*金を上がってヒモをつける。\\n*木村九段と鈴木九段は先手持ちだ。後手のほうが陣形が悪いという。ポイントを奪えば、一気に先手は押し切れそうだ。後手は玉が薄く、粘りにくい。\\n*\\n*※局後の感想※\\n*「▲２七金と上がられてひと押しがなかった。後手の動きは大したことがなかったですか」（佐藤）\\n  60 ３五歩打     ( 2:14/00:36:39)\\n*後手は歩切れに。先手は２歩を手持ちにしている。\\n  61 ４七銀(36)   ( 0:19/00:32:09)\\n*後手に１歩あれば△２四飛から△２六歩だが……。後手は手が難しい。\\n  62 ６五歩(64)   ( 1:07/00:37:46)\\n  63 ５七銀(68)   ( 0:31/00:32:40)\\n*「後手がきつい」と木村九段。先手は▲４五歩の攻めが楽しみだ。△同桂は▲同桂△同銀▲１一角成で駒得になるし、△５三銀は▲４六銀左から▲２六金や▲７九角で３五を突破される。\\n  64 ５二玉(41)   ( 1:48/00:39:34)\\n*佐藤は自分から動くことはできない。決戦に備えて、少しでも玉形を整えたい。\\n  65 ６八金(78)   ( 1:49/00:34:29)\\n*金を玉に近づけた。△８七銀の筋には気をつけたい。\\n*\\n*※局後の感想※\\n*▲６八金に代えて▲４五歩は、△５三銀▲４六銀左△６四銀▲９七角が並べられた。\\n  66 ６二金(61)   ( 0:23/00:39:57)\\n*玉の脇腹を締める。遊び駒に玉を近づけたことで、金銀が守り駒に昇格した。\\n  67 ７九飛(76)   ( 3:30/00:37:59)\\n*じっと手を渡す。互いに動きが難しくなってきたか。鈴木九段は形勢互角と判定している。\\n  68 ２三金(32)   ( 0:03/00:40:00)\\n*佐藤は持ち時間を使いきった。\\n  69 ４五歩(46)   ( 0:27/00:38:26)\\n*△４五同桂▲同桂△同銀は▲１一角成で先手の駒得。\\n  70 ５三銀(44)   ( 0:00/00:40:00)\\n*「銀多伝でどうですか。▲４六銀左に△２四金と３五を強化したら、いきなり▲９五歩から端攻めして、▲２六桂の飛車の捕獲を狙います」（鈴木九段）\\n  71 ７四歩(75)   ( 1:34/00:40:00)\\n*藤井も持ち時間を使いきった。ここから一分将棋の叩き合いだ。\\n*「７筋を突き捨てて、▲４六銀左に△５五歩から△８四飛を消すつもりですか」（鈴木九段）\\n  72 同　歩(73)   ( 0:00/00:40:00)\\n  73 ４六銀(57)   ( 0:00/00:40:00)\\n*銀が縦に並んだ形は、お互いの死角を消して好形だ。後手の飛車が狭い。▲３六歩から２七金を使って飛車を狙われそうだ。\\n*「先手が形勢よしと見て、後手の勝負手を消しながら丁寧に指している印象です」（鈴木九段）\\n  74 ５五歩(54)   ( 0:00/00:40:00)\\n*佐藤は苦しくなったといわれている。先手の陣形が厚い。\\n*\\n*※局後の感想※\\n*△５五歩に代えて、藤井の指摘した△２四金がまさったか。▲７三歩△６三銀▲８三歩成△同歩▲８二歩で、▲２六桂の飛車の捕獲を狙われるが、▲８二歩に△２六歩▲同金△２五歩▲２七金△７三桂▲同桂成△同金▲５七銀△２三金▲４六桂△２四飛▲３四歩△同金▲同桂△同飛で、佐藤は「このほうが粘りがありましたか」と話す。先手は歩切れなので、もうひと押しがあるかは明快ではない。\\n  75 同　角(88)   ( 0:00/00:40:00)\\n*後手は飛車を５四に逃げられるようになった。\\n  76 ６四銀(53)   ( 0:00/00:40:00)\\n*▲８二角成を受ける。\\n  77 ８八角(55)   ( 0:00/00:40:00)\\n  78 ７五歩(74)   ( 0:00/00:40:00)\\n*鈴木九段は▲４四歩を指摘している。△同歩に▲４五歩の継ぎ歩攻めや▲３六歩とすれば、４六の銀に活が入る。\\n  79 ４四歩(45)   ( 0:00/00:40:00)\\n  80 同　歩(43)   ( 0:00/00:40:00)\\n  81 ３六歩打     ( 0:00/00:40:00)\\n*後手は玉の近くに飛車角がいる悪形だ。玉は６三に行きたいが、▲４三銀のキズができてしまう。\\n  82 同　歩(35)   ( 0:00/00:40:00)\\n  83 同　金(27)   ( 0:00/00:40:00)\\n*「△２四飛が痛いかと思いきや、▲２九飛がぴったりですか」（鈴木九段）\\n  84 ２四飛(34)   ( 0:00/00:40:00)\\n  85 ２九飛(79)   ( 0:00/00:40:00)\\n*▲７九飛を生かした受け。先手陣に遊び駒がない。次に▲３五銀がある。「先手がさらに一本取っています」と鈴木九段。先手優勢だ。しかも、ただのリードではない。先手は玉が厚い。将棋は逆転勝ちが多いゲームだが、先手に嫌みがないと焦らせることができない。このまま藤井が手堅く押し切る可能性も高い。\\n*\\n*※局後の感想※\\n*藤井は▲７九飛と引いたあたりから、▲２九飛と使うのを考えていたという。つまり、▲７九飛は▲３六歩△同歩▲同金の活用を狙い、△２四飛に▲２九飛を用意した意味だった。\\n  86 ３四歩打     ( 0:00/00:40:00)\\n*▲３五銀を受ける。佐藤はひたすら辛抱の時間だ。\\n  87 ３五歩打     ( 0:00/00:40:00)\\n*相手が守ったところを、すぐこじ開けにいった。\\n*\\n*※局後の感想※\\n*▲３五歩に代えて▲２七歩△６三玉▲２六歩△１五歩▲２五歩も先手有力。「これもきついです」と佐藤。\\n  88 ６三玉(52)   ( 0:00/00:40:00)\\n*玉の逃走を開始。中段玉で粘れるか。\\n  89 ３四歩(35)   ( 0:00/00:40:00)\\n  90 同　金(23)   ( 0:00/00:40:00)\\n*▲３五歩に△４五金と勝負してどうか。駒損を甘受してでも、さばくしかない。\\n  91 ４三歩打     ( 0:00/00:40:00)\\n*△３一角は３三の桂が浮き、▲３五歩に△４五金がやりにくくなる。８八の角を３三に成られては、大駒が狭い。\\n*\\n*※局後の感想※\\n*▲４三歩では▲３五歩も有力だった。以下△４五金に▲同桂△同歩▲５五銀と進める。\\n  92 ５三角(42)   ( 0:00/00:40:00)\\n  93 ３五歩打     ( 0:00/00:40:00)\\n*藤井がさらに優位を拡大するか、それとも佐藤が踏みとどまって押し返すのか。勝負どころだ。\\n  94 ２五金(34)   ( 0:00/00:40:00)\\n*金は五段目でも、２五に出る。桂を手に入れて、△７六桂と打つのが狙いのようだ。\\n*\\n*※局後の感想※\\n*△２五金に代えて△４五歩は、▲３四歩△４六歩▲同銀△３四飛▲３五歩△４四飛▲４二歩成が一例。▲４二歩成に△同飛は▲３三角成、△４二同角は▲４四角で先手よしだが、歩を成った瞬間は甘い。しかし、感想戦で後手に有力手は見つからなかった。\\n  95 同　桂(37)   ( 0:00/00:40:00)\\n  96 同　桂(33)   ( 0:00/00:40:00)\\n*先手は金桂交換の駒得。藤井は模様だけでなく、実利も手にした。\\n  97 ４二歩成(43) ( 0:00/00:40:00)\\n  98 同　角(53)   ( 0:00/00:40:00)\\n  99 ３四歩(35)   ( 0:00/00:40:00)\\n*△３四同飛は▲２五金だ。△７六桂は▲４四角と軽やかにさばいてどうか。\\n*\\n*※局後の感想※\\n*「▲３四歩に代償がなかったです」（佐藤）\\n 100 ６六歩(65)   ( 0:00/00:40:00)\\n*佐藤はアヤをつけるしかない。まずは玉のコビンに手をつける。\\n*\\n*※局後の感想※\\n*△６六歩に代えて△７六桂は、▲４四角から▲５四金を狙われて受けにくい。\\n 101 同　角(88)   ( 0:00/00:40:00)\\n 102 ５四桂打     ( 0:00/00:40:00)\\n*「この両取りはうれしくありません。差が開いていると思います」（脇謙二八段）\\n 103 ５七角(66)   ( 0:00/00:40:00)\\n*角を出なかった。△４六桂に▲同角が飛車取り。一時的に自陣に戻っても、後手は駒損を回復しようとすれば、一気に角が働き。\\n 104 ７三桂(81)   ( 0:00/00:40:00)\\n*桂をぶつけて手駒を増やしにいった。△６五桂と打てれば、先手に嫌みが出てくる。\\n 105 ５五銀(46)   ( 0:00/00:40:00)\\n*天王山に銀を出た。飛車取りにもなっている。\\n 106 同　銀(64)   ( 0:00/00:40:00)\\n 107 同　歩(56)   ( 0:00/00:40:00)\\n*「△６五桂▲２四角△同角▲２三飛△３三銀▲同歩成に△６八角成と勝負しますか」（鈴木九段）\\n*それを先手が嫌うなら、▲５四歩△５七桂成▲同金とするほうが手堅いようだ。\\n 108 ６五桂(73)   ( 0:00/00:40:00)\\n 109 ５四歩(55)   ( 0:00/00:40:00)\\n*鈴木九段が推奨していた▲５四歩。△５七桂成と角を取られても、▲同金で厚い玉形がキープされている。\\n 110 ５七桂成(65) ( 0:00/00:40:00)\\n 111 同　金(68)   ( 0:00/00:40:00)\\n*盤上にいる駒の数が兵力差につながっている。後手は先手に迫れない。\\n 112 ７六歩(75)   ( 0:00/00:40:00)\\n 113 ６五金打     ( 0:00/00:40:00)\\n*玉をしばった。「手厚いねぇ」と脇八段。△７五角を消して手堅い。\\n 114 １七桂(25)   ( 0:00/00:40:00)\\n*飛車取りだが、手抜いてしばるのも有力だ。\\n*「こういうのは取るんですか」（鈴木九段）\\n*「昔は取らなかったけど、最近は取るんですよ」（杉本七段）\\n 115 同　香(19)   ( 0:00/00:40:00)\\n*落ち着いて駒を補充。\\n 116 １八角打     ( 0:00/00:40:00)\\n*飛車を逃げれば△２八飛成で逆転。\\n 117 ４三銀打     ( 0:00/00:40:00)\\n*頃はよしと詰めろをかける。\\n 118 ６一銀(72)   ( 0:00/00:40:00)\\n*▲５五桂の詰めろを受ける。\\n 119 ４二銀成(43) ( 0:00/00:40:00)\\n 120 ２九角成(18) ( 0:00/00:40:00)\\n*後手玉に即詰みがある。\\n 121 ８一角打     ( 0:00/00:40:00)\\n*△７二銀は▲７五桂まで。△７二金は▲同角成△同玉▲６四桂△６二玉▲７四桂△７一玉▲８二桂成△同玉▲７四桂△７一玉▲８二金までの詰み。\\n*この局面で佐藤が投了。藤井が名人をくだした。終局時刻は16時10分。消費時間は、▲藤井40分、△佐藤40分。\\n*藤井はベスト４に進出し、準決勝で羽生善治竜王と対戦する。その対局は２月17日に東京都千代田区「有楽町朝日ホール」で行われる。\\n*\\n*※局後の感想※\\n*「ちょっとずつポイントを失った気がします。歩切れになって、△５二玉から△６二金と狙いのない手を指す状態になっては苦しいと感じました。厚みを失っていく展開になったので、△５五歩では△２四金のほうがよかったです」（佐藤）\\n*「難しいと思っていましたが、▲２九飛と回って指しやすくなりました」（藤井）\\n 122 投了         ( 0:00/00:40:00)\\nまで121手で先手の勝ち\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/第11回朝日杯将棋オープン戦本戦.kif\n// module id = FyVW\n// module chunks = 1","module.exports = __webpack_public_path__ + \"static/media/flip_sound.2c50e2c.wav\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/flip_sound.wav\n// module id = G1k4\n// module chunks = 1","module.exports = \"| 名前                       | 意味                        | 備考                                                 | 初期値              |\\n|----------------------------|-----------------------------|------------------------------------------------------|---------------------|\\n| run_mode                   | 実行モード                  | 再生(view_mode) 操作(play_mode) 編集(edit_mode)      | 'view_mode'         |\\n| human_side                 | 人間が操作する側            | play_mode 時の人間側を指定。nullだと両方操作可       | null                |\\n| kifu_body                  | 棋譜の本体                  | KIF と SFEN に対応。駒落ちは SFEN のみ               | null                |\\n| kifu_url                   | 棋譜ファイルURL             |                                                      | null                |\\n| theme                      | テーマ名                    | none:なし simple:シンプル real:木目                  | 'simple'            |\\n| variation                  | テーマ内の亜種              | a, b, c, ...                                         | 'a'                 |\\n| size                       | サイズ                      | none x-small small default medium large x-large      | 'default'           |\\n| start_turn                 | N手目の局面を表示           | 例 0:開始前 1:初手 -1:投了図 -2:投了一手前           | -1                  |\\n| slider_show                | スライダー表示              |                                                      | false               |\\n| controller_show            | 前後移動用のボタン類表示    |                                                      | false               |\\n| sfen_show                  | 局面を sfen で表示          | 主に局面ペディア用                                   | false               |\\n| sound_effect               | 駒音                        |                                                      | false               |\\n| volume                     | 駒音ボリューム              | 0 から 1.0                                           | 0.5                 |\\n| key_event_capture          | キーボード操作を監視        | どこにもフォーカスしていないときでも左右キーが反応   | false               |\\n| polling_interval           | ポーリング間隔(秒)          | 1以上で有効。30 なら30秒間隔で kifu_url を読み直す   | 0                   |\\n| last_after_polling         | ポーリング後に最終手に移動  |                                                      | true                |\\n| shift_key_mag              | shiftキー押下時の倍速       | 1 または null 指定で無効にできる                     | 10                  |\\n| system_key_mag             | システムキー押下時の倍速    | 1 または null 指定で無効にできる                     | 50                  |\\n| url_embed_turn             | URLのハッシュに手番を埋める | 固定URLを作りたいときの実験用の機能                  | false               |\\n| debug_mode                 | デバッグモード              |                                                      | false               |\\n| digit_show              | 盤面の側面に位置を表示      | 上に数字、右端に漢数字を表示する                     | false               |\\n| init_preset_key            | 初期配置                    | kifu_body の代わりに指定するとその配置になる         | null                |\\n\\n<br>\\n\\n<article class=\\\"message is-info\\\">\\n  <div class=\\\"message-header\\\">\\n    <p>備考</p>\\n  </div>\\n  <div class=\\\"message-body\\\">\\n    <ul>\\n      <li>kifu_body も init_preset_key も指定がない場合は 'position startpos' (平手) が初期配置になります</li>\\n      <li>**kifu_url** や **kifu_body** をあとから変更したときも同期して再読み込みします。</li>\\n      <li>theme や size の値に **none** を指定したときは何もスタイルを設定しません。</li>\\n    </ul>\\n  </div>\\n</article>\\n\\n<article class=\\\"message is-warning\\\">\\n  <div class=\\\"message-header\\\">\\n    <p>注意点</p>\\n  </div>\\n  <div class=\\\"message-body\\\">\\n    **key_event_capture** は副作用があります。有効にするとどこにもフォーカスしていないときでも左右ボタンに反応するようになって便利な面もありますが、他のプログラムの操作を奪ってしまうことになるかもしれません。なので基本は false にしておいた方がよいです。\\n  </div>\\n</article>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/options.md\n// module id = GL4m\n// module chunks = 1","import _ from 'lodash'\nimport { Board } from './board'\nimport { Place } from './place'\nimport { Piece } from './piece'\n\nclass Soldier {\n  constructor(attributes) {\n    this.attributes = Object.assign({}, attributes)\n  }\n\n  get piece() {\n    return this.attributes.piece\n  }\n\n  set place(place) {\n    this.attributes.place = place\n  }\n\n  get place() {\n    return this.attributes.place\n  }\n\n  get location() {\n    return this.attributes.location\n  }\n\n  get promoted() {\n    return !!this.attributes.promoted\n  }\n\n  set promoted(v) {\n    this.attributes.promoted = v\n  }\n\n  get name() {\n    if (this.promoted) {\n      return this.piece.promoted_name\n    }\n    return this.piece.name\n  }\n\n  get piece_transform() {\n    let attrs = null\n    if (this.piece.promotable_p) {\n      if (this.promoted) {\n        attrs = {location: this.location.flip, promoted: !this.promoted}\n      } else {\n        attrs = {promoted: !this.promoted}\n      }\n    } else {\n      attrs = {location: this.location.flip}\n    }\n    return new Soldier(Object.assign({}, this.attributes, attrs))\n  }\n\n  get promotable_p() {\n    if (this.piece.promotable_p && !this.promoted) { // 成れるのに成ってなくて\n      return this.danger_zone_p\n    }\n  }\n\n  get danger_zone_p() {\n    if (this.location.key === \"black\") {\n      return this.place.y < Board.danger_zone_size\n    } else {\n      return this.place.y >= (Board.dimension - Board.danger_zone_size)\n    }\n  }\n\n  get to_class_list() {\n    let list = []\n    list.push(`location_${this.location.key}`)\n    list.push(`promoted_${this.promoted}`)\n    list = _.concat(list, this.piece.css_class_list)\n    return list\n  }\n}\n\nexport { Soldier }\n\nif (process.argv[1] === __filename) {\n  const soldier = new Soldier({\n    place: new Place([1, 2]),\n    piece: Piece.fetch(\"P\"),\n    promoted: true,\n    location_key: \"white\",\n  })\n  console.log(soldier.name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/soldier.js","import _ from \"lodash\"\n\nimport { Board } from \"./board\"\n\nclass Place {\n  static fetch(v) {\n    if (v instanceof this) {\n      return v\n    }\n    return Object.freeze(new Place(v))\n  }\n\n  constructor(value) {\n    let x, y\n    if (_.isString(value)) {\n      [x, y] = this._parse_from_string(value)\n    } else {\n      [x, y] = value            // valus is array\n    }\n    [this._x, this._y] = [x, y]\n  }\n\n  get key() {\n    return [this._x, this._y].toString()\n  }\n\n  get x() {\n    return this._x\n  }\n\n  get y() {\n    return this._y\n  }\n\n  get flip() {\n    return Place.fetch([Board.dimension - 1 - this._x, Board.dimension - 1 - this._y])\n  }\n\n  _parse_from_string(s) {\n    s = s.replace(/([１-９一二三四五六七八九a-z])/g, (e) => this._replace_table[e])\n    const [x, y] = s.split(\"\").map((e) => Number(e))\n    return [Board.dimension - x, y - 1]\n  }\n\n  get _replace_table() {\n    /* eslint-disable object-property-newline, key-spacing */\n    return {\n      \"１\": 1, \"２\": 2, \"３\": 3, \"４\": 4, \"５\": 5, \"６\": 6, \"７\": 7, \"８\": 8, \"９\": 9,\n      \"一\": 1, \"二\": 2, \"三\": 3, \"四\": 4, \"五\": 5, \"六\": 6, \"七\": 7, \"八\": 8, \"九\": 9,\n      \"a\":  1, \"b\":  2, \"c\":  3, \"d\":  4, \"e\":  5, \"f\":  6, \"g\":  7, \"h\":  8, \"i\":  9,\n    }\n  }\n\n  get to_sfen() {\n    const y_table = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"]\n    return [Board.dimension - this._x, y_table[this._y]].join(\"\")\n  }\n}\n\nexport { Place }\n\nif (process.argv[1] === __filename) {\n  console.log(Place.fetch(\"6a\").key)\n  console.log(Place.fetch([1, 2]).key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/place.js","import _ from \"lodash\"\nimport Vue from \"vue\"\n\nimport { Board } from \"./board\"\nimport { Place } from \"./place\"\nimport { Piece } from \"./piece\"\nimport { Soldier } from \"./soldier\"\nimport { SfenParser } from \"./sfen_parser\"\nimport { SfenSerializer } from \"./sfen_serializer\"\n\nclass Mediator {\n  constructor() {\n    const data_source = new SfenParser()\n    data_source.kifu_body = \"position startpos\"\n    data_source.parse()\n\n    this.data_source = data_source\n    this.current_turn = 0\n    this.board = null\n    this.hold_pieces = null\n    this.last_hand = null\n    this.piece_box = {}\n\n    this.env = process.env.NODE_ENV\n  }\n\n  run() {\n    this.board = this.data_source.board\n    this.hold_pieces = this.data_source.hold_pieces\n    this.last_hand = null\n\n    const move_infos = this.data_source.move_infos\n\n    const num = this.real_turn - this.data_source.turn_min\n    _(num).times((i) => { this.execute_one(move_infos[i]) })\n  }\n\n  execute_one(m) {\n    this.last_hand = m\n    if (m.drop_piece) {\n      const soldier = new Soldier({\n        piece: m.drop_piece,\n        place: m.place,\n        promoted: m.promoted,\n        location: m.location,\n      })\n      this.hold_pieces_add(m.location, soldier.piece, -1)\n      this.board.place_on(soldier)\n    } else {\n      {\n        const soldier = this.board.lookup(m.place)\n        if (soldier) {\n          this.hold_pieces_add(m.location, soldier.piece, 1)\n        }\n      }\n      const soldier = this.board.lookup(m.origin_place)\n      if (m.promoted_trigger) {\n        soldier.promoted = true\n      }\n      soldier.place = m.place\n      this.board.delete_at(m.origin_place)\n      this.board.place_on(soldier)\n    }\n  }\n\n  hold_pieces_count(location, piece) {\n    return this.hold_pieces[location.key][piece.key] || 0\n  }\n\n  hold_pieces_add(location, piece, plus = 1) {\n    const count = this.hold_pieces_count(location, piece) + plus\n    const counts_hash = this.hold_pieces[location.key]\n    if (count >= 1) {\n      Vue.set(counts_hash, piece.key, count)\n    } else {\n      Vue.delete(counts_hash, piece.key)\n    }\n  }\n\n  board_safe_delete_on(place) {\n    this.board.delete_at(place)\n  }\n\n  board_piece_inner_class(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n\n    if (soldier) {\n      return soldier.to_class_list\n    }\n\n    return []\n  }\n\n  cell_piece_class(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n    let list = []\n    if (soldier) {\n      list.push(`location_${soldier.location.key}`)\n    }\n    return list\n  }\n\n  cell_view(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n    let str = \"\"\n    if (soldier) {\n      str = soldier.name\n    }\n    return str\n  }\n\n  get dimension() {\n    return Board.dimension\n  }\n\n  // ruby style array index access\n  get real_turn() {\n    let index = Number(this.current_turn)\n    if (index < 0) {\n      index += this.data_source.turn_max + 1\n    }\n    return this.turn_clamp(index)\n  }\n\n  turn_clamp(index) {\n    return _.clamp(Number(index), this.data_source.turn_min, this.data_source.turn_max)\n  }\n\n  get previous_location() {\n    return this.data_source.location_by_offset(this.real_turn - 1)\n  }\n\n  get current_location() {\n    return this.data_source.location_by_offset(this.real_turn)\n  }\n\n  get current_comments() {\n    if (this.data_source.comments_pack) {\n      return this.data_source.comments_pack[this.real_turn]\n    }\n  }\n\n  get current_turn_label() {\n    if (this.real_turn === this.data_source.turn_max) {\n      return `まで${this.real_turn}手で${this.previous_location.name}の勝ち`\n    } else {\n      return `${this.real_turn}手目`\n    }\n  }\n\n  realized_hold_pieces_of(location_key) {\n    console.log(this.hold_pieces)\n    const list = Object.entries(this.hold_pieces[location_key])\n    return _(list)\n      .filter(([key, count]) => count >= 1)\n      .map(([key, count]) => [Piece.fetch(key), count])\n      .sortBy(([key, count]) => key.code)\n      .value()\n  }\n\n  // -------------------------------------------------------------------------------- serialize\n\n  get to_sfen() {\n    return this.sfen_serializer.to_s\n  }\n\n  get to_position_sfen() {\n    return `position sfen ${this.to_sfen}`\n  }\n\n  get sfen_serializer() {\n    return new SfenSerializer(this)\n  }\n\n  // -------------------------------------------------------------------------------- piece_box\n\n  piece_box_count(piece) {\n    return this.piece_box[piece.key] || 0\n  }\n\n  piece_box_add(piece, plus = 1) {\n    const count = this.piece_box_count(piece) + plus\n    if (count >= 1) {\n      Vue.set(this.piece_box, piece.key, count)\n    } else {\n      Vue.delete(this.piece_box, piece.key)\n    }\n  }\n\n  piece_box_realize() {\n    const list = Object.entries(this.piece_box) // {a: 1} => [['a', 1]]\n    return _(list)\n      .filter(([key, count]) => count >= 1)\n      .map(([key, count]) => [Piece.fetch(key), count])\n      .sortBy(([key, count]) => key.code)\n      .value()\n  }\n}\n\nexport { Mediator }\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediator.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-008ebb94\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-008ebb94\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.comments_pack)?_c('div',{staticClass:\"comment_area\"},[(_vm.current_comments)?_c('div',[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-info has-text-left\"},[_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_vm._l((_vm.current_comments),function(str){return [(_vm._.isEmpty(str))?[_c('br')]:[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.auto_link(str))}})]]})],2)])])])])]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3a87a5fb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/CommentArea.vue\n// module id = N+at\n// module chunks = 1","module.exports = __webpack_public_path__ + \"static/media/piece_sound.8673c34.wav\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/piece_sound.wav\n// module id = N1+3\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport 'bulma/bulma.sass'\nimport \"./components/ShogiPlayer.sass\" // Rails 側で sp_assets_dir を変更してから読み込みたいので .vue の中では読まないようにする\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import { MemoryRecord } from \"./memory_record\"\n\nclass Piece extends MemoryRecord {\n  static get define() {\n    return [\n      { key: \"K\", name: \"玉\", alias_name: \"王\", promoted_name: null, promoted_alias_name: null, },\n      { key: \"R\", name: \"飛\", alias_name: null, promoted_name: \"龍\", promoted_alias_name: \"竜\", },\n      { key: \"B\", name: \"角\", alias_name: null, promoted_name: \"馬\", promoted_alias_name: null, },\n      { key: \"G\", name: \"金\", alias_name: null, promoted_name: null, promoted_alias_name: null, },\n      { key: \"S\", name: \"銀\", alias_name: null, promoted_name: \"全\", promoted_alias_name: null, },\n      { key: \"N\", name: \"桂\", alias_name: null, promoted_name: \"圭\", promoted_alias_name: null, },\n      { key: \"L\", name: \"香\", alias_name: null, promoted_name: \"杏\", promoted_alias_name: null, },\n      { key: \"P\", name: \"歩\", alias_name: null, promoted_name: \"と\", promoted_alias_name: null, },\n    ]\n  }\n\n  static lookup(key) {\n    if (typeof key === \"string\") {\n      key = key.toUpperCase()\n    }\n    return super.lookup(key)\n  }\n\n  static kif_lookup(key) {\n    return this.values.find((e) => [e.name, e.alias_name].includes(key))\n  }\n\n  static kif_promoted_lookup(key) {\n    return this.values.find((e) => [e.promoted_name, e.promoted_alias_name].includes(key))\n  }\n\n  get promoted_name() {\n    return this.attributes.promoted_name\n  }\n\n  get css_class_list() {\n    return [\"piece_name\", `piece_${this.key}`]\n  }\n\n  get promotable_p() {\n    return !!this.promoted_name\n  }\n}\n\nexport { Piece }\n\nif (process.argv[1] === __filename) {\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.lookup(\"\"))\n  console.log(Piece.values)\n  console.log(Piece.values_map.get(\"K\"))\n  console.log(Piece.fetch(\"K\").key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('section',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"examples\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"サンプル\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"container has-text-centered\"},[_c('h3',{staticClass:\"title has-text-left\"},[_vm._v(\"1. 再生モード\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(2),_vm._v(\" \"),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"藤井聡太四段 vs 佐藤天彦名人\")]),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{staticClass:\"original\",attrs:{\"kifu_body\":_vm.kif_sample1,\"start_turn\":9,\"slider_show\":true,\"theme\":'real',\"size\":'large',\"variation\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false}})],1)]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(4),_vm._v(\" \"),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"羽生善治名人 vs 渡辺明竜王\")]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第21期竜王戦七番勝負第4局\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 2g2f 8c8d 2f2e 8d8e 6i7h 4a3b 2e2d 2c2d 2h2d P*2c 2d2h 7a7b 3i3h 3c3d 9g9f 9c9d 1g1f 1c1d 3h2g 8e8f 8g8f 8b8f P*8g 8f8d 2g3f 5a5b 7g7f 7c7d 8h2b+ 3a2b 7i8h 7b7c 8h7g 7c6d 3f4e 7d7e 4e5f 2b3c 6g6f 3c4d 5f6g 6a7b 5i6h 8a7c 4i5h 2a3c 6h7i 7e7f 6g7f 4d5e P*7e 9d9e B*7d P*8h 7i8h 7b8c 9f9e 8c7d 7e7d 8d7d P*7e 7d8d 5h6g P*7d 7e7d 8d7d P*7e 6d7e 7f7e 7d7e 7g7f 7e7d S*7e 7d4d P*7d 4d4g+ P*2d 2c2d 7d7c+ 4g4i 2h2d P*2c 2d3d 4c4d P*7i 5b4c 3d3e S*4e 6g5f P*7g 8i7g P*3d 3e4e 3c4e 5f5e R*2h N*3f 2h7h+ 8h9g 4e5g+ 5e4d 4i4d S*5b 4c5d 7i7h 4d4i G*6e 5d4e R*4d 4e5f 4d4i G*4h S*3h 4h4i R*5e 5f4f 3h4i G*4e P*4g 5g4g P*4h 4g3g 2i3g 4f3g 5e4e R*8i G*3h 3g3f G*4f 3f2f 9i9h 8i4i+ P*3i S*2i 3h2h 4i3i',\"start_turn\":-1,\"theme\":'real',\"variation\":'p'}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_vm._m(5),_vm._v(\" \"),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"藤井猛六段 vs 井上慶太六段\")]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第54期順位戦B級2組7回戦\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"start_turn\":0,\"slider_show\":true,\"theme\":'real',\"variation\":'g'}})],1)]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(6),_vm._v(\" \"),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"藤井聡太四段 vs 澤田真吾六段\")]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第43期棋王戦予選\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":_vm.kif_sample2,\"start_turn\":121,\"controller_show\":true,\"slider_show\":true}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_vm._m(7),_vm._v(\" \"),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"小池重明 vs 加藤一二三十段\")]),_vm._v(\" \"),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"加藤一二三の駒落道場\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1 moves 8c8d 7g7f 7a6b 5g5f 8d8e 8h7g 5c5d 2h5h 6b5c 7i6h 5a4b 5i4h 3a3b 4h3h 4c4d 5f5e 3b4c 5e5d 4c5d 6h5g 5d6e 5g5f 6e7f 5f5e 7f6g+ P*5d 5c6b 5h5f 6g7g 8i7g B*3d 5f6f P*5b 6i7i 8b8d 5e4d 8d7d P*7h 7d5d S*4c 3d4c 4d4c+ 4b4c B*7f 5b5c 7i6h 4c3b 6h5h P*4c 7f5d 5c5d 8g8f B*7i 8f8e P*8b 6f8f 7i3e+ 8e8d S*7b 8f8i 3e4e P*6g 7c7d 9g9f 4e5f 8i8f 5f5e 9f9e 5e6d 8f8i 7d7e 7g8e 5d5e 8e9c+ 8a9c 9e9d P*9h 9i9h 6d6e 8i8f 6e9h 9d9c+ 9a9c R*9a 9h6e 9a9c+ 5e5f 5h4h L*9b 9c8b P*8a N*7g 6e7d 8b9a S*8b 9a8b 8a8b S*6e 7d9f 8f5f 9f7h 7g8e 7h6g P*7c 7b8a P*9c 6c6d P*6h 6g8e 9c9b+ 8a9b 7c7b+ 6a7b 6e5d N*4b 5d5c+ P*5d 5c6b 7b6b L*2f R*6i L*2e N*3a 5f4f S*3d 3g3f 6b5c 2i3g 4c4d 4f5f 2c2d 2e2d P*2c 3f3e 3d3e 2d2c+ 3a2c 2f2c+ 3b2c P*3f 3e2d 5f5i 6i6h+ 1g1f L*3d N*2h 4d4e 5i5h 6h7g 2g2f 1c1d 2f2e 2d1c 3g4e 5c4d S*4f P*2f 4e5c+ L*4e 4f5g 8e7d P*6e 7d6e P*5f 5d5e 4h3g 5e5f 5g4h P*4f 3g4f 4e4f',\"start_turn\":-1,\"controller_show\":true,\"slider_show\":true,\"sfen_show\":true}})],1)]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_vm._m(8),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('h3',{staticClass:\"title has-text-left\"},[_vm._v(\"2. 操作モード\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(9),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"start_turn\":-1,\"slider_show\":true,\"controller_show\":true,\"theme\":'real',\"size\":'medium',\"variation\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false,\"run_mode\":'play_mode'}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_vm._m(10),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"start_turn\":-1,\"slider_show\":true,\"controller_show\":true,\"theme\":'real',\"size\":'medium',\"variation\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false,\"run_mode\":'play_mode',\"human_side\":'black'}})],1)]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('h3',{staticClass:\"title has-text-left\"},[_vm._v(\"3. 編集モード\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(11),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"start_turn\":-1,\"slider_show\":true,\"theme\":'real',\"size\":'medium',\"variation\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false,\"run_mode\":'edit_mode'}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_vm._m(12),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"init_preset_key\":'詰将棋',\"slider_show\":true,\"theme\":'real',\"size\":'medium',\"variation\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false,\"run_mode\":'edit_mode'}})],1)]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),(false)?[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(13),_vm._v(\" \"),_c('ShogiPlayer',{attrs:{\"kifu_url\":'http://tk2-221-20341.vs.sakura.ne.jp/shogi/wr/ureshino_friend-doglong-20180122_213544.kif?plain=1',\"start_turn\":-1,\"controller_show\":true,\"slider_show\":true,\"debug_mode\":true,\"polling_interval\":30}})],1)]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br')]:_vm._e(),_vm._v(\" \"),_vm._m(14),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-success has-text-left\"},[_vm._m(15),_vm._v(\" \"),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_c('ul',[_c('li',[_vm._v(\"右の\"),_c('b-icon',{attrs:{\"icon\":\"dots-vertical\",\"size\":\"is-small\"}}),_vm._v(\"をクリックするとモードを切り替えれます\")],1),_vm._v(\" \"),_c('li',[_vm._v(\"棋譜再生モードの途中で「操作」に切り替えると手番側の駒を動かせるようになります。検討したいときに使います\")]),_vm._v(\" \"),_c('li',[_vm._v(\"「操作」モードに入るとき SFEN (USI) の場合はそのまま再生モードでの棋譜を保持した状態で始まります。(スライダーで最初の局面に戻せる)\")]),_vm._v(\" \"),_vm._m(16),_vm._v(\" \"),_c('li',[_vm._v(\"手番に関わらず、ただ自由に駒を動かしたいときは「編集」モードにします。\")])])])])])])])],2)])])]),_vm._v(\" \"),_c('section',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"usage\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"使い方\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.usage_md)}})])]),_vm._v(\" \"),_c('section',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"options\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"オプション\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('ShogiPlayer',{attrs:{\"run_mode\":_vm.run_mode,\"kifu_body\":_vm.kifu_body,\"start_turn\":_vm.start_turn,\"theme\":_vm.theme,\"size\":_vm.size,\"variation\":_vm.variation,\"debug_mode\":_vm.debug_mode,\"digit_show\":_vm.digit_show,\"key_event_capture\":_vm.key_event_capture,\"slider_show\":_vm.slider_show,\"controller_show\":_vm.controller_show,\"sfen_show\":_vm.sfen_show,\"sound_effect\":_vm.sound_effect,\"volume\":_vm.volume,\"human_side\":_vm.human_side},on:{\"update:play_mode_long_sfen\":_vm.play_mode_long_sfen_set,\"update:play_mode_short_sfen\":_vm.play_mode_short_sfen_set,\"update:play_mode_move\":_vm.play_mode_move_set}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('section',[_c('b-field',{attrs:{\"label\":\"run_mode\"}},[_c('div',{staticClass:\"block\"},[_c('b-radio',{attrs:{\"native-value\":\"view_mode\"},model:{value:(_vm.run_mode),callback:function ($$v) {_vm.run_mode=$$v},expression:\"run_mode\"}},[_vm._v(\"view_mode\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"play_mode\"},model:{value:(_vm.run_mode),callback:function ($$v) {_vm.run_mode=$$v},expression:\"run_mode\"}},[_vm._v(\"play_mode\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"edit_mode\"},model:{value:(_vm.run_mode),callback:function ($$v) {_vm.run_mode=$$v},expression:\"run_mode\"}},[_vm._v(\"edit_mode\")])],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"theme\"}},[_c('div',{staticClass:\"block\"},[_c('b-radio',{attrs:{\"native-value\":\"none\"},model:{value:(_vm.theme),callback:function ($$v) {_vm.theme=$$v},expression:\"theme\"}},[_vm._v(\"none\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"simple\"},model:{value:(_vm.theme),callback:function ($$v) {_vm.theme=$$v},expression:\"theme\"}},[_vm._v(\"simple\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"real\"},model:{value:(_vm.theme),callback:function ($$v) {_vm.theme=$$v},expression:\"theme\"}},[_vm._v(\"real\")])],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"variation\"}},[_c('div',{staticClass:\"block\"},[_vm._l((['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']),function(val){return [_c('b-radio',{attrs:{\"native-value\":val},model:{value:(_vm.variation),callback:function ($$v) {_vm.variation=$$v},expression:\"variation\"}},[_vm._v(_vm._s(val))])]})],2)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"size\"}},[_c('div',{staticClass:\"block\"},[_c('b-radio',{attrs:{\"native-value\":\"none\"},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}},[_vm._v(\"none\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"x-small\"},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}},[_vm._v(\"x-small\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"small\"},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}},[_vm._v(\"small\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"default\"},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}},[_vm._v(\"default\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"medium\"},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}},[_vm._v(\"medium\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"large\"},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}},[_vm._v(\"large\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"x-large\"},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}},[_vm._v(\"x-large\")])],1)]),_vm._v(\" \"),(false)?[_c('b-field',{attrs:{\"label\":\"variation\"}},[_c('b-select',{attrs:{\"placeholder\":\"Select a name\"},model:{value:(_vm.variation),callback:function ($$v) {_vm.variation=$$v},expression:\"variation\"}},_vm._l((['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n']),function(val){return _c('option',{key:val,domProps:{\"value\":val}},[_vm._v(_vm._s(val))])}))],1)]:_vm._e(),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"start_turn\"}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.start_turn),callback:function ($$v) {_vm.start_turn=$$v},expression:\"start_turn\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"slider_show\"}},[_c('b-switch',{model:{value:(_vm.slider_show),callback:function ($$v) {_vm.slider_show=$$v},expression:\"slider_show\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"controller_show\"}},[_c('b-switch',{model:{value:(_vm.controller_show),callback:function ($$v) {_vm.controller_show=$$v},expression:\"controller_show\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"sfen_show\"}},[_c('b-switch',{model:{value:(_vm.sfen_show),callback:function ($$v) {_vm.sfen_show=$$v},expression:\"sfen_show\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"sound_effect\"}},[_c('b-switch',{model:{value:(_vm.sound_effect),callback:function ($$v) {_vm.sound_effect=$$v},expression:\"sound_effect\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"volume\"}},[_c('div',{staticClass:\"block\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.volume),expression:\"volume\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1.0\",\"step\":\"0.01\"},domProps:{\"value\":(_vm.volume)},on:{\"__r\":function($event){_vm.volume=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_vm._v(\" \"+_vm._s(_vm.volume)+\"\\n              \")])]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"human_side\"}},[_c('div',{staticClass:\"block\"},[_c('b-radio',{attrs:{\"native-value\":\"\"},model:{value:(_vm.human_side),callback:function ($$v) {_vm.human_side=$$v},expression:\"human_side\"}},[_vm._v(\"両方\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"black\"},model:{value:(_vm.human_side),callback:function ($$v) {_vm.human_side=$$v},expression:\"human_side\"}},[_vm._v(\"☗\")]),_vm._v(\" \"),_c('b-radio',{attrs:{\"native-value\":\"white\"},model:{value:(_vm.human_side),callback:function ($$v) {_vm.human_side=$$v},expression:\"human_side\"}},[_vm._v(\"☖\")])],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"key_event_capture\"}},[_c('b-switch',{model:{value:(_vm.key_event_capture),callback:function ($$v) {_vm.key_event_capture=$$v},expression:\"key_event_capture\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"debug_mode\"}},[_c('b-switch',{model:{value:(_vm.debug_mode),callback:function ($$v) {_vm.debug_mode=$$v},expression:\"debug_mode\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"digit_show\"}},[_c('b-switch',{model:{value:(_vm.digit_show),callback:function ($$v) {_vm.digit_show=$$v},expression:\"digit_show\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"kifu_body\"}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.kifu_body),callback:function ($$v) {_vm.kifu_body=$$v},expression:\"kifu_body\"}})],1),_vm._v(\" \"),_c('article',{staticClass:\"message is-primary has-text-left\"},[_vm._m(17),_vm._v(\" \"),_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                <shogi-player\\n                :\"),_c('b',[_vm._v(\"run_mode\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.run_mode)+\"'\\\"\\n                :\"),_c('b',[_vm._v(\"theme\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.theme)+\"'\\\"\\n                :\"),_c('b',[_vm._v(\"variation\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.variation)+\"'\\\"\\n                :\"),_c('b',[_vm._v(\"size\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.size)+\"'\\\"\\n                :\"),_c('b',[_vm._v(\"start_turn\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.start_turn)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"slider_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.slider_show)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"controller_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.controller_show)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"sfen_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.sfen_show)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"human_side\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.human_side)+\"'\\\"\\n                :\"),_c('b',[_vm._v(\"sound_effect\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.sound_effect)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"volume\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.volume)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"key_event_capture\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.key_event_capture)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"debug_mode\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.debug_mode)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"digit_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.digit_show)+\"\\\"\\n                :\"),_c('b',[_vm._v(\"kifu_body\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.kifu_body)+\"'\\\"\\n                />\\n              \")])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('h4',{staticClass:\"title\"},[_vm._v(\"Emit Events\")]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"@update:play_mode_long_sfen: 操作モードで指した直後の局面を発行(movesあり)\"}},[_c('b-input',{attrs:{\"value\":_vm.play_mode_long_sfen,\"type\":\"textarea\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"@update:play_mode_short_sfen: 操作モードで指した直後の局面を発行(movesなし)\"}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.play_mode_short_sfen),callback:function ($$v) {_vm.play_mode_short_sfen=$$v},expression:\"play_mode_short_sfen\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":\"@update:play_mode_move: 操作モードで指した手(sfenのmovesの最後の1つ)\"}},[_c('b-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.play_mode_move),callback:function ($$v) {_vm.play_mode_move=$$v},expression:\"play_mode_move\"}})],1),_vm._v(\" \"),_c('br')],2)])]),_vm._v(\" \"),_c('div',{staticClass:\"table_wrap\"},[_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.options_md)}})])])]),_vm._v(\" \"),_vm._m(18)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"hero is-primary is-medium\"},[_c('div',{staticClass:\"hero-head\"},[_c('nav',{staticClass:\"navbar\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"navbar-brand\"},[_c('span',{staticClass:\"navbar-burger burger\",attrs:{\"data-target\":\"navbarMenuHeroA\"}},[_c('span'),_vm._v(\" \"),_c('span'),_vm._v(\" \"),_c('span')])]),_vm._v(\" \"),_c('div',{staticClass:\"navbar-menu\",attrs:{\"id\":\"navbarMenuHeroA\"}},[_c('div',{staticClass:\"navbar-end\"},[_c('a',{staticClass:\"navbar-item\",attrs:{\"href\":\"https://github.com/akicho8/shogi-player\"}},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fab fa-github\"})]),_vm._v(\" \"),_c('span',[_vm._v(\"Github\")])])])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"hero-body\"},[_c('div',{staticClass:\"container has-text-centered\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"\\n          shogi-player\\n        \")]),_vm._v(\" \"),_c('h2',{staticClass:\"subtitle\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"hero-foot\"},[_c('nav',{staticClass:\"tabs\"},[_c('div',{staticClass:\"container\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"#summary\"}},[_vm._v(\"概要\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"#examples\"}},[_vm._v(\"サンプル\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"#usage\"}},[_vm._v(\"使い方\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"#options\"}},[_vm._v(\"オプション\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"summary\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"概要\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('p',[_vm._v(\"\\n          将棋の棋譜を再生する JavaScript で次の特徴があります\\n        \")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"KIF と SFEN フォーマットに対応\")]),_vm._v(\" \"),_c('li',[_vm._v(\"Flash 未使用\")]),_vm._v(\" \"),_c('li',[_vm._v(\"npm でインストール可\")])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  コメント付きの KIF 表示。9手目から表示。テーマ:real。駒音あり\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"subtitle yumincho\"},[_c('a',{attrs:{\"href\":\"http://www.asahi.com/shougi/asahicup_live/?ref=jsa\",\"target\":\"_blank\"}},[_vm._v(\"第11回朝日杯将棋オープン戦本戦\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  シンプル。最終手から表示。※盤面クリックで操作可。天王山クリックで反転\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  スライダーのみ表示。初手から表示\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  コントローラーとスライダー付き。121手目から表示。\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  駒落ち。最終手から表示。局面のSFENも表示\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-success has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"共通する操作方法\")])]),_vm._v(\" \"),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_c('ul',[_c('li',[_vm._v(\"盤面の左右をクリックすると前後の手番に進む\")]),_vm._v(\" \"),_c('li',[_vm._v(\"シフトを押しながらで10倍速\")]),_vm._v(\" \"),_c('li',[_vm._v(\"シフト以外のシステムキーだと50倍速(シフトキーも押していると500倍速)\")]),_vm._v(\" \"),_c('li',[_vm._v(\"天王山(５五の地点)をクリックすると反転\")]),_vm._v(\" \"),_c('li',[_vm._v(\"「N手目」の部分をクリックで編集可\")]),_vm._v(\" \"),_c('li',[_vm._v(\"スライダーがある場合は優先的にフォーカスする\")]),_vm._v(\" \"),_c('li',[_vm._v(\"スライダーにフォーカスがある状態だと左右キーが効く(ブラウザの標準機能)\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  自分で操作できる。戻れば操作をやり直せる\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  human_side オプションで先手側だけ操作できるようにする\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  すべての駒を自由に動かせる\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                  詰将棋用の初期配置で開始\\n                \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info has-text-centered\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"\\n                    外部KIFファイルの読み込み\\n                  \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-success has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"操作方法\")])]),_vm._v(\" \"),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_c('ul',[_c('li',[_vm._v(\"盤上の駒は右クリックで裏返せます\")]),_vm._v(\" \"),_c('li',[_vm._v(\"shift, option, meta, control キーのいずれかを押しながら左クリックでも裏返せます\")]),_vm._v(\" \"),_c('li',[_vm._v(\"駒を持った状態で右クリックすると駒を元に戻します\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"再生モードからのモード切り替えについて\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_vm._v(\"一方 KIF の場合は都合上\"),_c('b',[_vm._v(\"現在の局面から\")]),_vm._v(\"の開始になります。(スライダーで最初の局面に戻せない)。※SFENと同様になるよう今後対応予定\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"引数\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('footer',{staticClass:\"footer\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column has-text-centered\"},[_c('a',{attrs:{\"href\":\"https://bulma.io\"}},[_c('img',{attrs:{\"src\":require(\"./assets/made-with-bulma.png\"),\"alt\":\"Made with Bulma\",\"width\":\"128\",\"height\":\"24\"}})])])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-008ebb94\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = PGEs\n// module chunks = 1","import _ from \"lodash\"\n\nimport { Piece } from \"./piece\"\nimport { Place } from \"./place\"\nimport { Mediator } from \"./mediator\"\nimport { Location } from \"./location\"\nimport { Board } from \"./board\"\n\nclass SfenSerializer {\n  constructor(mediator) {\n    this.mediator = mediator\n  }\n\n  get to_s() {\n    const parts = []\n    parts.push(this.to_board_sfen)                    // 9/9/9/9...\n    parts.push(this.mediator.current_location.key[0]) // \"b\"\n    parts.push(this.to_hold_pieces)                   // \"-\"\n    parts.push(this.mediator.real_turn + 1)     // 1\n    return parts.join(\" \")\n  }\n\n  get to_board_sfen() {\n    const rows = []\n    _.times(Board.dimension, (y) => {\n      let str = \"\"\n      let space = 0\n      _.times(Board.dimension, (x) => {\n        const place = Place.fetch([x, y])\n        const soldier = this.mediator.board.lookup(place)\n        if (_.isNil(soldier)) {\n          space++\n        } else {\n          if (space >= 1) {\n            str += space\n            space = 0\n          }\n          if (soldier.promoted) {\n            str += \"+\"\n          }\n          let key = soldier.piece.key\n          if (soldier.location.key === \"white\") {\n            key = key.toLowerCase()\n          }\n          str += key\n        }\n      })\n      if (space >= 1) {\n        str += space\n      }\n      rows.push(str)\n    })\n    return rows.join(\"/\")\n  }\n\n  get to_hold_pieces() {\n    let str = Location.values.map((location_info) => {\n      const hold_pieces = this.mediator.hold_pieces[location_info.key]\n      const values = Piece.values.map((e) => {\n        let count = hold_pieces[e.key] || 0\n        let str = \"\"\n        if (count === 0) {\n          return null\n        }\n        if (count >= 2) {\n          str += count\n        }\n        let key = e.key\n        if (location_info.key === \"white\") {\n          key = key.toLowerCase()\n        } else {\n          key = key.toUpperCase()\n        }\n        str += key\n        return str\n      })\n      return _.compact(values).join(\"\")\n    }).join(\"\")\n\n    if (_.isEmpty(str)) {\n      str = \"-\"\n    }\n\n    return str\n  }\n}\n\nexport { SfenSerializer }\n\nif (process.argv[1] === __filename) {\n  const mediator = new Mediator()\n  mediator.kifu_body = \"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\"\n  mediator.current_turn = 1\n  mediator.run()\n  const sfen_serializer = new SfenSerializer(mediator)\n  console.log(sfen_serializer.to_s)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_serializer.js","import _ from \"lodash\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    slider_show:        { type: Boolean, default: false, },\n    controller_show:    { type: Boolean, default: false, },\n    key_event_capture:  { type: Boolean, default: false  },\n    shift_key_mag:      { type: Number,  default: 10,    },\n    system_key_mag:     { type: Number,  default: 50,    },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n    }\n  },\n\n  mounted() {\n    window.addEventListener(\"keydown\", this.keydown_hook, false)\n  },\n\n  created() {\n  },\n\n  watch: {\n  },\n\n  methods: {\n    keydown_hook(e) {\n      if (this.debug_mode && false) {\n        this.log(document.activeElement)\n        this.log(e.shiftKey, e.ctrlKey, e.altKey, e.metaKey)\n        this.log(\"e\", e)\n        this.log(\"key\", e.key)\n        this.log(\"code\", e.code)\n        this.log(\"repeat\", e.repeat)\n      }\n\n      if (!this.key_event_capture) {\n        return\n      }\n\n      const dom = document.activeElement\n      const controllers = [this.$refs.first, this.$refs.previous, this.$refs.next, this.$refs.last] // FIXME: 指定DOMの下にあるか？の方法がわかればもっと簡潔になる\n      if (!(dom === undefined || dom.tagName === \"BODY\" || _.includes(controllers, dom))) {\n        return\n      }\n\n      if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n        this.relative_move(-1, e)\n        e.preventDefault()\n      }\n\n      if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n        this.relative_move(1, e)\n        e.preventDefault()\n      }\n\n      // let gap = null\n      // let force_value = null\n      //\n      // if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n      //   gap = 1\n      // }\n      // if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n      //   gap = -1\n      // }\n      // if (e.key === \"PageUp\") {\n      //   gap = -10\n      // }\n      // if (e.key === \"PageDown\") {\n      //   gap = 10\n      // }\n      // if (e.shiftKey || e.ctrlKey || e.altKey || e.metaKey) {\n      //   if (gap) {\n      //     gap *= 10\n      //   }\n      // }\n      // if (e.key === \"[\" || e.key === \"Home\" || e.code === \"Escape\") {\n      //   force_value = this.mediator.data_source.turn_min\n      // }\n      // if (e.key === \"]\" || e.key === \"End\") {\n      //   force_value = this.mediator.data_source.turn_max\n      // }\n      //\n      // let v = this.current_turn\n      // if (gap !== null) {\n      //   v += gap\n      // }\n      // if (force_value !== null) {\n      //   v = force_value\n      // }\n      // if (v < this.mediator.data_source.turn_min) {\n      //   v = this.mediator.data_source.turn_min\n      // }\n      // if (this.mediator.data_source.turn_max < v) {\n      //   v = this.mediator.data_source.turn_max\n      // }\n      // this.current_turn = v\n      //\n      // if (gap !== null || force_value !== null) {\n      //   e.preventDefault()\n      // }\n    },\n\n    navi_relative_move(v, event) {\n      this.relative_move(v * this.flip_sign(), event)\n    },\n\n    relative_move(v, event = null) {\n      if (event) {\n        if (event.shiftKey) {\n          if (this.shift_key_mag) {\n            v *= this.shift_key_mag\n          }\n        }\n        if (event.ctrlKey || event.altKey || event.metaKey) {\n          if (this.system_key_mag) {\n            v *= this.system_key_mag\n          }\n        }\n      }\n\n      // const new_val = this.mediator.turn_clamp(this.current_turn + v)\n      // if (this.current_turn !== new_val) {\n      //   this.current_turn = new_val\n      // }\n      this.current_turn_add(v)\n      // let pos = this.real_turn\n      // const new_val = this.mediator.turn_clamp(pos + v)\n      // if (pos !== new_val) {\n      //   this.current_turn = new_val\n      // }\n\n      if (!this.focus_to(\"slider\")) {\n        if (v > 0) {\n          this.focus_to(\"next\")\n        } else {\n          this.focus_to(\"previous\")\n        }\n      }\n    },\n\n    move_to_first() {\n      this.current_turn_set(this.mediator.data_source.turn_min)\n      this.focus_to(\"slider\") || this.focus_to(\"first\")\n    },\n\n    move_to_last() {\n      this.current_turn_set(this.mediator.data_source.turn_max)\n      this.focus_to(\"slider\") || this.focus_to(\"last\")\n    },\n\n    current_turn_add(v) {\n      this.current_turn_set(this.real_turn + v)\n    },\n\n    current_turn_set(v) {\n      // const new_val = this.mediator.turn_clamp(this.current_turn + v)\n      // if (this.current_turn !== new_val) {\n      //   this.current_turn = new_val\n      // }\n      const new_val = this.mediator.turn_clamp(v)\n      if (this.real_turn !== new_val) {\n        this.current_turn = new_val\n        if (this.debug_mode) {\n          this.log([v, new_val, this.current_turn])\n        }\n      }\n    },\n\n    focus_to(key) {\n      const el = this.$refs[key]\n      if (el) {\n        el.focus()\n        return true\n      }\n      return false\n    },\n\n    board_flip_run() {\n      this.flip = !this.flip\n      this.sound_call(\"flip_sound\")\n      this.focus_to(\"slider\")\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navi_module.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceStand.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceStand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1cb58a5f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PieceStand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PieceStand.vue\n// module id = a83v\n// module chunks = 1","// const piece_sound = new Sound(\"../static/piece_sound.wav\", {volume: 0.5})\n// piece_sound.options[:volume] = 0.2\n// piece_sound.play()\n\nimport axios from \"axios\"\n\nvar __audio_context__\n\n// new Sound() のたびに new AudioContext() すると6回目ぐらいでエラーになるため根本的な解決にはなっていないが外で一回だけ呼ぶ\nif (typeof window !== \"undefined\" && process.env.NODE_ENV !== \"test\") {\n  window.AudioContext = window.AudioContext || window.webkitAudioContext\n  __audio_context__ = new AudioContext()\n}\n\nclass Sound {\n  constructor(url, options = {}) {\n    this.url = url\n    this.options = options\n    this.buffer = null\n\n    if (process.env.NODE_ENV === \"test\") {\n      return\n    }\n\n    this.__resource_load()\n  }\n\n  play() {\n    if (this.is_loaded) {\n      const source = __audio_context__.createBufferSource()\n      source.buffer = this.buffer\n      if (true) {\n        // Sound -> GainNode -> Destination\n        const gain_node = __audio_context__.createGain()\n        source.connect(gain_node)\n        gain_node.connect(__audio_context__.destination)\n        gain_node.gain.value = this.volume\n      } else {\n        // Sound -> Destination\n        source.connect(__audio_context__.destination)\n      }\n      source.start(0)\n    }\n  }\n\n  get is_loaded() {\n    return this.buffer !== null\n  }\n\n  get volume() {\n    let volume = 1.0\n    if (this.options[\"volume\"] !== undefined) {\n      volume = this.options[\"volume\"]\n    }\n    return volume\n  }\n\n  __resource_load() {\n    if (false) {\n      axios(this.uri, {responseType: \"arraybuffer\"})\n        .then((data) => { this.context.decodeAudioData(data) }).then((buffer) => { this.buffer = buffer })\n    } else {\n      const req = new XMLHttpRequest()\n      req.responseType = \"arraybuffer\"\n      req.onreadystatechange = () => {\n        if (req.readyState === 4) {\n          if (req.status === 0 || req.status === 200) {\n            __audio_context__.decodeAudioData(req.response, (buffer) => {\n              this.buffer = buffer\n            })\n          }\n        }\n      }\n      req.open(\"GET\", this.url, true)\n      req.send(\"\")\n    }\n  }\n}\n\nexport { Sound }\n\n\n\n// WEBPACK FOOTER //\n// ./src/sound.js","import { Piece } from \"../piece\"\nimport { SfenParser } from \"../sfen_parser\"\nimport { Mediator } from \"../mediator\"\nimport { PresetInfo } from \"../preset_info\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    init_preset_key: { type: String,  default: null, },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      current_preset: this.init_preset_key, // 選択中の初期配置\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    // あとからフォームで変更があったとき\n    current_preset(value) {\n      this.mediator_setup_by_preset(value)\n    }\n  },\n\n  methods: {\n    mediator_setup_by_preset(value) {\n      if (value) {\n        const preset_info = PresetInfo.fetch(value)\n        const data_source = new SfenParser()\n        data_source.kifu_body = preset_info.sfen\n        data_source.parse()\n\n        this.mediator = new Mediator()\n        this.mediator.data_source = data_source\n        preset_info.piece_box.forEach(([e, c]) => {\n          this.mediator.piece_box_add(Piece.fetch(e), c)\n        })\n        this.mediator.run()\n      }\n    },\n  },\n\n  computed: {\n    // テンプレートの中で PresetInfo を簡単に参照できないVueの制約のため\n    preset_info_values() {\n      return PresetInfo.values\n    },\n\n    // 初期配置指定がある場合、その sfen を返す\n    init_preset_sfen() {\n      if (this.init_preset_key) {\n        return PresetInfo.fetch(this.init_preset_key).sfen\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/preset_module.js","module.exports = \"先手の囲い：銀矢倉\\n後手の囲い：銀矢倉\\n先手の戦型：角換わり腰掛け銀\\n後手の戦型：角換わり腰掛け銀\\n手合割：平手\\n手数----指手---------消費時間--\\n1 ７六歩(77)   (00:00/00:00:00)\\n2 ８四歩(83)   (00:00/00:00:00)\\n3 ２六歩(27)   (00:00/00:00:00)\\n4 ３二金(41)   (00:00/00:00:00)\\n5 ７八金(69)   (00:00/00:00:00)\\n6 ８五歩(84)   (00:00/00:00:00)\\n7 ７七角(88)   (00:00/00:00:00)\\n8 ３四歩(33)   (00:00/00:00:00)\\n9 ６八銀(79)   (00:00/00:00:00)\\n10 ７七角成(22) (00:00/00:00:00)\\n11 ７七銀(68)   (00:00/00:00:00)\\n*▲戦型：角換わり\\n12 ２二銀(31)   (00:00/00:00:00)\\n13 ３八銀(39)   (00:00/00:00:00)\\n14 ６二銀(71)   (00:00/00:00:00)\\n15 ３六歩(37)   (00:00/00:00:00)\\n16 ３三銀(22)   (00:00/00:00:00)\\n17 ４六歩(47)   (00:00/00:00:00)\\n18 ６四歩(63)   (00:00/00:00:00)\\n19 ６八玉(59)   (00:00/00:00:00)\\n20 ６三銀(62)   (00:00/00:00:00)\\n21 ３七桂(29)   (00:00/00:00:00)\\n22 ４二玉(51)   (00:00/00:00:00)\\n23 ４七銀(38)   (00:00/00:00:00)\\n24 ７四歩(73)   (00:00/00:00:00)\\n25 ４八金(49)   (00:00/00:00:00)\\n26 ７三桂(81)   (00:00/00:00:00)\\n27 ２九飛(28)   (00:00/00:00:00)\\n28 ８一飛(82)   (00:00/00:00:00)\\n29 ６六歩(67)   (00:00/00:00:00)\\n30 ６二金(61)   (00:00/00:00:00)\\n31 ５六銀(47)   (00:00/00:00:00)\\n*▲戦型：角換わり腰掛け銀\\n32 ９四歩(93)   (00:00/00:00:00)\\n33 ９六歩(97)   (00:00/00:00:00)\\n34 １四歩(13)   (00:00/00:00:00)\\n35 １六歩(17)   (00:00/00:00:00)\\n36 ５四銀(63)   (00:00/00:00:00)\\n*△戦型：角換わり腰掛け銀\\n37 ７九玉(68)   (00:00/00:00:00)\\n38 ６三銀(54)   (00:00/00:00:00)\\n39 ８八玉(79)   (00:00/00:00:00)\\n40 ５四銀(63)   (00:00/00:00:00)\\n41 ２五歩(26)   (00:00/00:00:00)\\n42 ６三銀(54)   (00:00/00:00:00)\\n43 ６七銀(56)   (00:00/00:00:00)\\n*▲囲い：銀矢倉\\n44 ５四銀(63)   (00:00/00:00:00)\\n45 ５六歩(57)   (00:00/00:00:00)\\n46 ４四歩(43)   (00:00/00:00:00)\\n47 ５九飛(29)   (00:00/00:00:00)\\n48 ３一玉(42)   (00:00/00:00:00)\\n49 ５五歩(56)   (00:00/00:00:00)\\n50 ４三銀(54)   (00:00/00:00:00)\\n51 ５六銀(67)   (00:00/00:00:00)\\n52 ２二玉(31)   (00:00/00:00:00)\\n*△囲い：銀矢倉\\n53 ６九飛(59)   (00:00/00:00:00)\\n54 ３一玉(22)   (00:00/00:00:00)\\n55 ２九飛(69)   (00:00/00:00:00)\\n56 ２二玉(31)   (00:00/00:00:00)\\n57 ４五歩(46)   (00:00/00:00:00)\\n58 ４五歩(44)   (00:00/00:00:00)\\n59 ４五銀(56)   (00:00/00:00:00)\\n60 ８六歩(85)   (00:00/00:00:00)\\n61 ８六歩(87)   (00:00/00:00:00)\\n62 ８五歩打     (00:00/00:00:00)\\n63 ８五歩(86)   (00:00/00:00:00)\\n64 ９五歩(94)   (00:00/00:00:00)\\n65 ９五歩(96)   (00:00/00:00:00)\\n66 ７五歩(74)   (00:00/00:00:00)\\n67 ７五歩(76)   (00:00/00:00:00)\\n68 ６五歩(64)   (00:00/00:00:00)\\n69 ７六角打     (00:00/00:00:00)\\n70 ５二金(62)   (00:00/00:00:00)\\n71 ８六銀(77)   (00:00/00:00:00)\\n72 ６六歩(65)   (00:00/00:00:00)\\n73 ７七桂(89)   (00:00/00:00:00)\\n74 ４四歩打     (00:00/00:00:00)\\n75 ５六銀(45)   (00:00/00:00:00)\\n76 ３五歩(34)   (00:00/00:00:00)\\n77 ３五歩(36)   (00:00/00:00:00)\\n78 ８五桂(73)   (00:00/00:00:00)\\n79 ８五桂(77)   (00:00/00:00:00)\\n80 ３六歩打     (00:00/00:00:00)\\n81 ４五桂(37)   (00:00/00:00:00)\\n82 ４五歩(44)   (00:00/00:00:00)\\n83 ６四歩打     (00:00/00:00:00)\\n84 ７二桂打     (00:00/00:00:00)\\n85 ６三歩成(64) (00:00/00:00:00)\\n86 ６三金(52)   (00:00/00:00:00)\\n87 ４三角成(76) (00:00/00:00:00)\\n88 ４三金(32)   (00:00/00:00:00)\\n89 ５二銀打     (00:00/00:00:00)\\n90 ７六角打     (00:00/00:00:00)\\n91 ７七金(78)   (00:00/00:00:00)\\n92 ８七歩打     (00:00/00:00:00)\\n93 ８七金(77)   (00:00/00:00:00)\\n94 ６七角打     (00:00/00:00:00)\\n95 ６七銀(56)   (00:00/00:00:00)\\n96 ８七角成(76) (00:00/00:00:00)\\n97 ８七玉(88)   (00:00/00:00:00)\\n98 ６七歩成(66) (00:00/00:00:00)\\n99 ８九角打     (00:00/00:00:00)\\n100 ６六と(67)   (00:00/00:00:00)\\n101 ４三銀成(52) (00:00/00:00:00)\\n102 ７六金打     (00:00/00:00:00)\\n103 ８八玉(87)   (00:00/00:00:00)\\n104 ８六金(76)   (00:00/00:00:00)\\n105 ７九玉(88)   (00:00/00:00:00)\\n106 ７七金(86)   (00:00/00:00:00)\\n107 ６八歩打     (00:00/00:00:00)\\n108 ６七銀打     (00:00/00:00:00)\\n109 ６七角(89)   (00:00/00:00:00)\\n110 ６七と(66)   (00:00/00:00:00)\\n111 ３三全(43)   (00:00/00:00:00)\\n112 ３三玉(22)   (00:00/00:00:00)\\n113 ３四銀打     (00:00/00:00:00)\\n114 ４四玉(33)   (00:00/00:00:00)\\n115 ２二角打     (00:00/00:00:00)\\n116 ３三銀打     (00:00/00:00:00)\\n117 ３三銀(34)   (00:00/00:00:00)\\n118 ５五玉(44)   (00:00/00:00:00)\\n119 ３二銀(33)   (00:00/00:00:00)\\n120 ６四玉(55)   (00:00/00:00:00)\\n121 ７六桂打     (00:00/00:00:00)\\n122 ７六金(77)   (00:00/00:00:00)\\n123 ６七歩(68)   (00:00/00:00:00)\\n124 ４六角打     (00:00/00:00:00)\\n125 ５七銀打     (00:00/00:00:00)\\n126 ５五桂打     (00:00/00:00:00)\\n127 ５六銀打     (00:00/00:00:00)\\n128 ８五飛(81)   (00:00/00:00:00)\\n129 ４六銀(57)   (00:00/00:00:00)\\n130 ７八銀打     (00:00/00:00:00)\\n131 ７八玉(79)   (00:00/00:00:00)\\n132 ６七桂成(55) (00:00/00:00:00)\\n133 ６七銀(56)   (00:00/00:00:00)\\n134 ８七飛成(85) (00:00/00:00:00)\\n135 ７九玉(78)   (00:00/00:00:00)\\n136 ６七金(76)   (00:00/00:00:00)\\n137 ５五角成(22) (00:00/00:00:00)\\n138 ７五玉(64)   (00:00/00:00:00)\\n139 ６五金打     (00:00/00:00:00)\\n140 ８五玉(75)   (00:00/00:00:00)\\n141 ７七桂打     (00:00/00:00:00)\\n142 ７六玉(85)   (00:00/00:00:00)\\n143 ７五金(65)   (00:00/00:00:00)\\n144 ７五玉(76)   (00:00/00:00:00)\\n145 ６五馬(55)   (00:00/00:00:00)\\n146 ８四玉(75)   (00:00/00:00:00)\\n147 ８七馬(65)   (00:00/00:00:00)\\n148 ６八銀打     (00:00/00:00:00)\\n149 ８九玉(79)   (00:00/00:00:00)\\n150 ７七銀成(68) (00:00/00:00:00)\\n151 ８一飛打     (00:00/00:00:00)\\n152 ８三桂打     (00:00/00:00:00)\\n153 ８五歩打     (00:00/00:00:00)\\n154 ７三玉(84)   (00:00/00:00:00)\\n155 ７四歩打     (00:00/00:00:00)\\n156 投了\\nまで155手で先手の勝ち\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/藤井聡太四段_vs_澤田真吾六段.kif\n// module id = iC1h\n// module chunks = 1","import _ from 'lodash'\nimport Vue from 'vue'\nimport { Soldier } from \"./soldier\"\n\nclass Board {\n  static get dimension() {\n    return 9\n  }\n\n  static get danger_zone_size() {\n    return 3\n  }\n\n  constructor() {\n    this._surface = {}\n  }\n\n  place_on(soldier) {\n    Vue.set(this._surface, soldier.place.key, soldier)\n  }\n\n  lookup(place) {\n    return this._surface[place.key]\n  }\n\n  delete_at(place) {\n    delete this._surface[place.key]\n  }\n\n  get flip() {\n    const value = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location.flip,\n        place: soldier.place.flip,\n      }))\n      value.place_on(new_soldier)\n    })\n    return value\n  }\n}\n\nexport { Board }\n\nif (process.argv[1] === __filename) {\n  console.log(Board.dimension)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/board.js","module.exports = \"## Rails (+ Vue) の場合\\n\\nインストール\\n\\n    % yarn add shogi-player\\n\\n読み込み\\n\\n(in app/javascript/packs/shogi_player.js)\\n\\n    import Vue from \\\"vue/dist/vue.esm\\\"\\n    import ShogiPlayer from \\\"shogi-player/src/components/ShogiPlayer.vue\\\"\\n\\n    import _ from \\\"lodash\\\"\\n    Object.defineProperty(Vue.prototype, \\\"_\\\", {value: _})\\n\\n    document.addEventListener(\\\"DOMContentLoaded\\\", () => {\\n      new Vue({\\n        el: \\\"#shogi_player_app\\\",\\n        components: { ShogiPlayer },\\n      })\\n    })\\n\\n表示\\n\\n(in app/views/xxx/show.html.erb)\\n\\n    <%= javascript_pack_tag(\\\"shogi_player\\\") %>\\n    <%= stylesheet_pack_tag(\\\"shogi_player\\\") %>\\n\\n    <div id=\\\"shogi_player_app\\\">\\n      <ShogiPlayer :kifu_body=\\\"'position startpos moves 7g7f 8c8d'\\\"></ShogiPlayer>\\n    </div>\\n\\n## React で使う場合\\n\\n    import React from 'react'\\n    import ReactDOM from 'react-dom'\\n    import ShogiPlayer from 'shogi-player/react/src/ShogiPlayer.js'\\n\\n    class App extends React.Component {\\n      render() {\\n        return (\\n          <ShogiPlayer kifu_body='position startpos moves 7g7f 8c8d' start_turn=\\\"9\\\" />\\n        )\\n      }\\n    }\\n\\n    ReactDOM.render(\\n      <App />,\\n      document.getElementById('app')\\n    )\\n\\n<article class=\\\"message is-warning\\\">\\n  <div class=\\\"message-header\\\">\\n    <p>注意点</p>\\n  </div>\\n  <div class=\\\"message-body\\\">\\n     React 版は最低限の機能しかありません\\n  </div>\\n</article>\\n\\n## JavaScript に変換したものを直接使う場合\\n\\n    ただいま調査中\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/usage.md\n// module id = jTCi\n// module chunks = 1","import { MemoryRecord } from \"./memory_record\"\n\nclass Location extends MemoryRecord {\n  static get define() {\n    return [\n      { key: \"black\", name: '☗', },\n      { key: \"white\", name: '☖', },\n    ]\n  }\n\n  get flip() {\n    return Location.values[(this.code + 1) % Location.values.length]\n  }\n}\n\nexport { Location }\n\nif (process.argv[1] === __filename) {\n  console.log(Location.fetch(\"black\"))\n\n  Location.values.map((e) => {\n    console.log(e)\n  })\n\n  console.log(Location.fetch(\"black\").flip)\n  console.log(Location.fetch(\"white\").flip)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/location.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CommentArea.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CommentArea.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a87a5fb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CommentArea.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CommentArea.vue\n// module id = lujB\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-69ba6536\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ShogiPlayer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-69ba6536\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ShogiPlayer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ShogiPlayer.vue\n// module id = oS6v\n// module chunks = 1","import XRegExp from \"xregexp\"\nimport assert from \"minimalistic-assert\"\n\nimport { ParserBase } from \"./parser_base\"\nimport { Piece } from \"./piece\"\nimport { Place } from \"./place\"\nimport { Location } from \"./location\"\nimport { SfenParser } from \"./sfen_parser\"\n\nclass KifParser extends ParserBase {\n  get board() {\n    const sfen_parser = new SfenParser()\n    sfen_parser.kifu_body = \"position startpos\" // TODO: sfen形式の値のテーブルを持って駒落ちに対応する\n    sfen_parser.parse()\n    return sfen_parser.board\n  }\n\n  get location_base() {\n    let key = null\n    const value = this.header[\"手合割\"] || \"平手\"\n    if (value === \"平手\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  parse() {\n    this.move_infos = []\n    this.comments_pack = {}\n    let before_point = null\n\n    this.kifu_body.split(/\\n/).forEach((line) => {\n      const md = XRegExp.exec(line, this.__kif_format_move_regexp)\n      if (md) {\n        const attrs = {}\n        attrs[\"location\"] = this.location_by_offset(Number(md[\"number\"]) - 1)\n        if (md[\"origin_place\"]) {\n          attrs[\"origin_place\"] = Place.fetch(md[\"origin_place\"])\n        }\n        assert(md[\"to\"] || md[\"same\"])\n        if (md[\"to\"]) {\n          attrs[\"place\"] = Place.fetch(md[\"to\"])\n          before_point = attrs[\"place\"]\n        } else {\n          assert(md[\"same\"])\n          assert(before_point)\n          attrs[\"place\"] = before_point\n        }\n        if (md[\"motion\"] === \"成\") {\n          attrs[\"promoted_trigger\"] = true\n        }\n        if (md[\"motion\"] === \"打\") {\n          attrs[\"drop_piece\"] = Piece.kif_lookup(md[\"piece\"])\n        }\n        this.move_infos.push(attrs)\n      } else {\n        const md = XRegExp.exec(line, XRegExp(\"^\\\\*(?<comment>.*)\"))\n        if (md) {\n          const index = this.move_infos.length\n          this.comments_pack[index] = this.comments_pack[index] || []\n          this.comments_pack[index].push(md[\"comment\"])\n        }\n      }\n    })\n  }\n\n  set move_infos(v) {\n    this._move_infos = v\n  }\n\n  get move_infos() {\n    return this._move_infos || []\n  }\n\n  set comments_pack(v) {\n    this._comments_pack = v\n  }\n\n  get comments_pack() {\n    return this._comments_pack || []\n  }\n\n  get __kif_format_move_regexp() {\n    return XRegExp(`\n        ^\\\\s*(?<number>\\\\d+)\\\\s+\n        (?<to>[１-９1-9一二三四五六七八九]{2})?\n        (?<same>同)?\\\\s*\n        (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と])\n        (?<suffix>[左右直]?[寄引上]?)\n        (?<motion>不?成|打|合|生)?\n        (\\\\((?<origin_place>\\\\d{2})\\\\))? # KIFフォーマットの移動元用\n      `, 'xm')\n  }\n}\n\nexport { KifParser }\n\nif (process.argv[1] === __filename) {\n  const kif_parser = new KifParser()\n//   kif_parser.kifu_body = `\n// # ----  Kifu for Windows V6.26 棋譜ファイル  ----\n// key：value\n// 手数----指手---------消費時間--\n// *コメント0a\n// *コメント0b\n//    1 ７六歩(77)   ( 0:00/00:00:00)\n// *コメント1a\n// *コメント1b\n//    2 ３四歩(33)   ( 0:00/00:00:00)\n//    3 投了         ( 0:00/00:00:00)\n// `\n\n  kif_parser.kifu_body = `\n   1 ２六歩(27)   ( 0:16/00:00:16)\n   2 ３四歩(33)   ( 0:22/00:00:22)\n   3 ７六歩(77)   ( 0:06/00:00:22)\n   4 ８四歩(83)   ( 0:13/00:00:35)\n   5 ２五歩(26)   ( 0:09/00:00:31)\n   6 ８五歩(84)   ( 0:16/00:00:51)\n   7 ７八金(69)   ( 0:04/00:00:35)\n   8 ３二金(41)   ( 0:09/00:01:00)\n   9 ２四歩(25)   ( 0:04/00:00:39)\n  10 同 歩(23)    ( 0:10/00:01:10)\n`\n  kif_parser.parse()\n  // console.log(kif_parser.board)\n  // console.log(kif_parser.location_base)\n  // console.log(kif_parser.hold_pieces)\n  console.log(kif_parser.move_infos)\n  console.log(kif_parser.comments_pack)\n  console.log(kif_parser.init_sfen === undefined)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/kif_parser.js","<template>\n<div class=\"piece_stand_outer\" :class=\"piece_stand_outer_class\">\n  <div class=\"location_mark\" v-html=\"location_name\"></div>\n  <ul class=\"piece_stand\" @click.stop=\"$parent.piece_stand_click(location, $event)\" @click.right.prevent=\"$parent.hold_cancel\">\n    <li v-for=\"[piece, count] in hold_pieces\" @click.stop=\"$parent.piece_stand_piece_click(location, piece, $event)\">\n      <div class=\"piece_outer\" :class=\"piece_outer_class(piece)\">\n        <div class=\"piece_inner_wrap\">\n          <span class=\"piece_inner\" :class=\"piece_class(piece)\">{{piece.name}}</span>\n        </div>\n      </div>\n      <span v-if=\"count >= 2\" class=\"piece_count\">{{count}}</span>\n    </li>\n  </ul>\n</div>\n</template>\n\n<script>\nimport { Location } from \"../location\"\nimport _ from \"lodash\"\n\nexport default {\n  props: {\n    location_key: { required: true },\n    hold_pieces: { required: true },\n  },\n\n  methods: {\n    hold_piece_holding_p(piece) {\n      return this.$parent.have_piece_location === this.location && this.$parent.have_piece === piece\n    },\n\n    piece_outer_class(piece) {\n      let list = []\n      if (this.hold_piece_holding_p(piece)) {\n        list.push(\"holding_p\")\n      } else if (this.$parent.current_mode === \"edit_mode\" || (!this.$parent.cpu_location_p && this.$parent.mediator.current_location === this.location)) {\n        list.push(\"selectable_p\")\n      }\n      return list\n    },\n\n    piece_class(piece) {\n      let list = []\n      list = _.concat(list, piece.css_class_list)\n      list.push(`location_${this.location.key}`)\n      list.push(\"promoted_false\")\n      return list\n    },\n  },\n\n  computed: {\n    location() {\n      return Location.fetch(this.location_key)\n    },\n\n    piece_stand_outer_class() {\n      const list = []\n      list.push(`location_${this.location.key}`)\n      list.push(this.$parent.env)\n      if (this.$parent.mediator.current_location === this.location) {\n        list.push(\"turn_active\")\n      }\n      return list\n    },\n\n    location_name() {\n      // if (this.location.key === \"white\") {\n      //   return '<span style=\"color:white\">☗</span>'\n      // } else {\n      return this.location.name\n      // }\n    }\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PieceStand.vue","import XRegExp from \"xregexp\"\nimport Vue from \"vue\"\nimport _ from \"lodash\"\n\nimport { Board } from \"./board\"\nimport { ParserBase } from \"./parser_base\"\nimport { Piece } from \"./piece\"\nimport { Place } from \"./place\"\nimport { Soldier } from \"./soldier\"\nimport { Location } from \"./location\"\n\nclass SfenParser extends ParserBase {\n  parse() {\n    this.kifu_body = this.kifu_body.replace(/startpos/, \"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\")\n    const regex = XRegExp(\"sfen\\\\s+(?<sfen>\\\\S+)\\\\s+(?<b_or_w>\\\\S+)\\\\s+(?<hold_pieces>\\\\S+)\\\\s+(?<turn_counter_next>\\\\d+)(\\\\s+moves\\\\s+(?<moves>.*))?\")\n    this.attributes = XRegExp.exec(this.kifu_body, regex)\n    if (process.env.NODE_ENV === \"deveopment\") {\n      console.log(this.attributes)\n    }\n  }\n\n  get board() {\n    const board = new Board()\n    this.attributes[\"sfen\"].split(\"/\").forEach((e, y) => {\n      let x = 0\n      XRegExp.forEach(e, XRegExp(\"(?<promoted>\\\\+?)(?<piece>\\\\S)\"), (m, i) => {\n        if (/\\d+/.test(m.piece)) {\n          x += Number(m.piece)\n        } else {\n          const soldier = new Soldier({\n            place: new Place([x, y]),\n            piece: Piece.fetch(m.piece),\n            promoted: (m.promoted === \"+\"),\n            location: this.__location_by_upper_or_lower_case(m.piece),\n          })\n          board.place_on(soldier)\n          x++\n        }\n      })\n    })\n    return board\n  }\n\n  get location_base() {\n    let key = null\n    if (this.attributes[\"b_or_w\"] === \"b\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  get hold_pieces() {\n    const _hold_pieces = super.hold_pieces\n    if (this.attributes[\"hold_pieces\"] !== \"-\") {\n      XRegExp.forEach(this.attributes[\"hold_pieces\"], XRegExp(\"(?<count>\\\\d+)?(?<piece_char>\\\\S)\"), (md, i) => {\n        const piece = Piece.fetch(md.piece_char)\n        let count = Number(md.count || 1)\n        const location = this.__location_by_upper_or_lower_case(md.piece_char)\n        count += _hold_pieces[location.key][piece.key] || 0\n        Vue.set(_hold_pieces[location.key], piece.key, count)\n      })\n    }\n    return _hold_pieces\n  }\n\n  get turn_min() {\n    return Number(this.attributes[\"turn_counter_next\"]) - 1\n  }\n\n  get komaochi_p() {\n    return (this.turn_min % 2) === 0 && this.location_base.key === \"white\"\n  }\n\n  get move_infos() {\n    return this.moves.map((e, i) => {\n      const attrs = {}\n      // if (true) {\n      //   attrs[\"scene_index\"] = this.turn_min + i\n      //   attrs[\"scene_offset\"] = i\n      // }\n      attrs[\"location\"] = this.location_by_offset(i)\n      const md = XRegExp.exec(e, XRegExp(\"(?<origin_x>\\\\S)(?<origin_y>\\\\S)(?<pos_x>\\\\S)(?<pos_y>\\\\S)(?<promoted>\\\\+?)?\"))\n      attrs[\"promoted_trigger\"] = (md.promoted === \"+\")\n      if (md[\"origin_y\"] === \"*\") {\n        attrs[\"drop_piece\"] = Piece.fetch(md[\"origin_x\"])\n      } else {\n        attrs[\"origin_place\"] = Place.fetch(`${md[\"origin_x\"]}${md[\"origin_y\"]}`)\n      }\n      attrs[\"place\"] = Place.fetch(`${md[\"pos_x\"]}${md[\"pos_y\"]}`)\n      return attrs\n    })\n  }\n\n  get moves() {\n    let moves = this.attributes[\"moves\"]\n    if (_.isNil(moves) || moves === \"\") {\n      return []\n    }\n    return moves.split(/\\s+/)\n  }\n\n  // 最初の局面\n  get init_sfen() {\n    const parts = []\n    parts.push(\"position\")\n    parts.push(\"sfen\")\n    parts.push(this.attributes[\"sfen\"])\n    parts.push(this.attributes[\"b_or_w\"])\n    parts.push(this.attributes[\"hold_pieces\"])\n    parts.push(this.attributes[\"turn_counter_next\"])\n    return parts.join(\" \")\n  }\n\n  __location_by_upper_or_lower_case(v) {\n    let key = null\n    if (/[A-Z]/.test(v)) {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n}\n\nexport { SfenParser }\n\nif (process.argv[1] === __filename) {\n  const sfen_parser = new SfenParser()\n  sfen_parser.kifu_body = \"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\"\n  sfen_parser.parse()\n  console.log(sfen_parser.board)\n  console.log(sfen_parser.location_base.key)\n  console.log(sfen_parser.hold_pieces)\n  console.log(sfen_parser.move_infos)\n  console.log(sfen_parser.moves)\n  console.log(sfen_parser.init_sfen)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_parser.js","module.exports = __webpack_public_path__ + \"static/img/made-with-bulma.e0eab74.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/made-with-bulma.png\n// module id = waGJ\n// module chunks = 1","<template>\n<div id=\"app\">\n  <section class=\"hero is-primary is-medium\">\n    <!-- Hero head: will stick at the top -->\n    <div class=\"hero-head\">\n      <nav class=\"navbar\">\n        <div class=\"container\">\n          <div class=\"navbar-brand\">\n            <!-- <a class=\"navbar-item\"> -->\n            <!--   shogi-player -->\n            <!-- </a> -->\n            <span class=\"navbar-burger burger\" data-target=\"navbarMenuHeroA\">\n              <span></span>\n              <span></span>\n              <span></span>\n            </span>\n          </div>\n          <div id=\"navbarMenuHeroA\" class=\"navbar-menu\">\n            <div class=\"navbar-end\">\n              <!-- <a class=\"navbar-item is-active\"> -->\n              <!--   Home -->\n              <!-- </a> -->\n              <!-- <a class=\"navbar-item\"> -->\n              <!--   Examples -->\n              <!-- </a> -->\n              <a class=\"navbar-item\" href=\"https://github.com/akicho8/shogi-player\">\n                <span class=\"icon\">\n                  <i class=\"fab fa-github\"></i>\n                </span>\n                <span>Github</span>\n              </a>\n              <!-- <span class=\"navbar-item\"> -->\n              <!--   <a class=\"button is-primary is-inverted\"> -->\n              <!--     <span class=\"icon\"> -->\n              <!--       <i class=\"fa fa-github\"></i> -->\n              <!--     </span> -->\n              <!--     <span>Download</span> -->\n              <!--   </a> -->\n              <!-- </span> -->\n            </div>\n          </div>\n        </div>\n      </nav>\n    </div>\n\n    <!-- Hero content: will be in the middle -->\n    <div class=\"hero-body\">\n      <div class=\"container has-text-centered\">\n        <h1 class=\"title\">\n          shogi-player\n        </h1>\n        <h2 class=\"subtitle\">\n        </h2>\n      </div>\n    </div>\n\n    <!-- Hero footer: will stick at the bottom -->\n    <div class=\"hero-foot\">\n      <nav class=\"tabs\">\n        <div class=\"container\">\n          <ul>\n            <li><a href=\"#summary\">概要</a></li>\n            <li><a href=\"#examples\">サンプル</a></li>\n            <li><a href=\"#usage\">使い方</a></li>\n            <li><a href=\"#options\">オプション</a></li>\n          </ul>\n        </div>\n      </nav>\n    </div>\n  </section>\n\n  <section class=\"section\">\n    <a name=\"summary\"></a>\n    <div class=\"container\">\n      <h2 class=\"title\">概要</h2>\n      <hr>\n      <div class=\"content\">\n        <p>\n          将棋の棋譜を再生する JavaScript で次の特徴があります\n        </p>\n        <ul>\n          <li>KIF と SFEN フォーマットに対応</li>\n          <li>Flash 未使用</li>\n          <li>npm でインストール可</li>\n        </ul>\n      </div>\n    </div>\n  </section>\n\n  <section class=\"section\">\n    <a name=\"examples\"></a>\n    <div class=\"container\">\n      <h2 class=\"title\">サンプル</h2>\n      <hr>\n      <section class=\"section\">\n        <div class=\"container has-text-centered\">\n          <h3 class=\"title has-text-left\">1. 再生モード</h3>\n          <hr>\n          <div class=\"columns\">\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  コメント付きの KIF 表示。9手目から表示。テーマ:real。駒音あり\n                </div>\n              </article>\n              <h3 class=\"title yumincho\">藤井聡太四段 vs 佐藤天彦名人</h3>\n              <p class=\"subtitle yumincho\">\n                <a href=\"http://www.asahi.com/shougi/asahicup_live/?ref=jsa\" target=\"_blank\">第11回朝日杯将棋オープン戦本戦</a>\n              </p>\n              <hr>\n              <ShogiPlayer class=\"original\" :kifu_body=\"kif_sample1\" :start_turn=\"9\" :slider_show=\"true\" :theme=\"'real'\" :size=\"'large'\" :variation=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\"/>\n            </div>\n          </div>\n          <br>\n          <br>\n\n          <div class=\"columns\">\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  シンプル。最終手から表示。※盤面クリックで操作可。天王山クリックで反転\n                </div>\n              </article>\n              <h3 class=\"title yumincho\">羽生善治名人 vs 渡辺明竜王</h3>\n              <p class=\"subtitle yumincho\">第21期竜王戦七番勝負第4局</p>\n              <hr>\n              <ShogiPlayer :kifu_body=\"'position startpos moves 2g2f 8c8d 2f2e 8d8e 6i7h 4a3b 2e2d 2c2d 2h2d P*2c 2d2h 7a7b 3i3h 3c3d 9g9f 9c9d 1g1f 1c1d 3h2g 8e8f 8g8f 8b8f P*8g 8f8d 2g3f 5a5b 7g7f 7c7d 8h2b+ 3a2b 7i8h 7b7c 8h7g 7c6d 3f4e 7d7e 4e5f 2b3c 6g6f 3c4d 5f6g 6a7b 5i6h 8a7c 4i5h 2a3c 6h7i 7e7f 6g7f 4d5e P*7e 9d9e B*7d P*8h 7i8h 7b8c 9f9e 8c7d 7e7d 8d7d P*7e 7d8d 5h6g P*7d 7e7d 8d7d P*7e 6d7e 7f7e 7d7e 7g7f 7e7d S*7e 7d4d P*7d 4d4g+ P*2d 2c2d 7d7c+ 4g4i 2h2d P*2c 2d3d 4c4d P*7i 5b4c 3d3e S*4e 6g5f P*7g 8i7g P*3d 3e4e 3c4e 5f5e R*2h N*3f 2h7h+ 8h9g 4e5g+ 5e4d 4i4d S*5b 4c5d 7i7h 4d4i G*6e 5d4e R*4d 4e5f 4d4i G*4h S*3h 4h4i R*5e 5f4f 3h4i G*4e P*4g 5g4g P*4h 4g3g 2i3g 4f3g 5e4e R*8i G*3h 3g3f G*4f 3f2f 9i9h 8i4i+ P*3i S*2i 3h2h 4i3i'\" :start_turn=\"-1\" :theme=\"'real'\" :variation=\"'p'\"/>\n            </div>\n\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  スライダーのみ表示。初手から表示\n                </div>\n              </article>\n              <h3 class=\"title yumincho\">藤井猛六段 vs 井上慶太六段</h3>\n              <p class=\"subtitle yumincho\">第54期順位戦B級2組7回戦</p>\n              <hr>\n              <ShogiPlayer :kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :start_turn=\"0\" :slider_show=\"true\" :theme=\"'real'\" :variation=\"'g'\" />\n            </div>\n\n          </div>\n          <br>\n          <br>\n\n          <div class=\"columns\">\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  コントローラーとスライダー付き。121手目から表示。\n                </div>\n              </article>\n              <h3 class=\"title yumincho\">藤井聡太四段 vs 澤田真吾六段</h3>\n              <p class=\"subtitle yumincho\">第43期棋王戦予選</p>\n              <hr>\n              <ShogiPlayer :kifu_body=\"kif_sample2\" :start_turn=\"121\" :controller_show=\"true\" :slider_show=\"true\" />\n            </div>\n\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  駒落ち。最終手から表示。局面のSFENも表示\n                </div>\n              </article>\n              <h3 class=\"title yumincho\">小池重明 vs 加藤一二三十段</h3>\n              <p class=\"subtitle yumincho\">加藤一二三の駒落道場</p>\n              <hr>\n              <ShogiPlayer :kifu_body=\"'position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1 moves 8c8d 7g7f 7a6b 5g5f 8d8e 8h7g 5c5d 2h5h 6b5c 7i6h 5a4b 5i4h 3a3b 4h3h 4c4d 5f5e 3b4c 5e5d 4c5d 6h5g 5d6e 5g5f 6e7f 5f5e 7f6g+ P*5d 5c6b 5h5f 6g7g 8i7g B*3d 5f6f P*5b 6i7i 8b8d 5e4d 8d7d P*7h 7d5d S*4c 3d4c 4d4c+ 4b4c B*7f 5b5c 7i6h 4c3b 6h5h P*4c 7f5d 5c5d 8g8f B*7i 8f8e P*8b 6f8f 7i3e+ 8e8d S*7b 8f8i 3e4e P*6g 7c7d 9g9f 4e5f 8i8f 5f5e 9f9e 5e6d 8f8i 7d7e 7g8e 5d5e 8e9c+ 8a9c 9e9d P*9h 9i9h 6d6e 8i8f 6e9h 9d9c+ 9a9c R*9a 9h6e 9a9c+ 5e5f 5h4h L*9b 9c8b P*8a N*7g 6e7d 8b9a S*8b 9a8b 8a8b S*6e 7d9f 8f5f 9f7h 7g8e 7h6g P*7c 7b8a P*9c 6c6d P*6h 6g8e 9c9b+ 8a9b 7c7b+ 6a7b 6e5d N*4b 5d5c+ P*5d 5c6b 7b6b L*2f R*6i L*2e N*3a 5f4f S*3d 3g3f 6b5c 2i3g 4c4d 4f5f 2c2d 2e2d P*2c 3f3e 3d3e 2d2c+ 3a2c 2f2c+ 3b2c P*3f 3e2d 5f5i 6i6h+ 1g1f L*3d N*2h 4d4e 5i5h 6h7g 2g2f 1c1d 2f2e 2d1c 3g4e 5c4d S*4f P*2f 4e5c+ L*4e 4f5g 8e7d P*6e 7d6e P*5f 5d5e 4h3g 5e5f 5g4h P*4f 3g4f 4e4f'\" :start_turn=\"-1\" :controller_show=\"true\" :slider_show=\"true\" :sfen_show=\"true\" />\n            </div>\n          </div>\n          <br>\n          <br>\n\n          <div class=\"columns\">\n            <div class=\"column\">\n              <article class=\"message is-success has-text-left\">\n                <div class=\"message-header\">\n                  <p>共通する操作方法</p>\n                </div>\n                <div class=\"message-body\">\n                  <div class=\"content\">\n                    <ul>\n                      <li>盤面の左右をクリックすると前後の手番に進む</li>\n                      <li>シフトを押しながらで10倍速</li>\n                      <li>シフト以外のシステムキーだと50倍速(シフトキーも押していると500倍速)</li>\n                      <li>天王山(５五の地点)をクリックすると反転</li>\n                      <li>「N手目」の部分をクリックで編集可</li>\n                      <li>スライダーがある場合は優先的にフォーカスする</li>\n                      <li>スライダーにフォーカスがある状態だと左右キーが効く(ブラウザの標準機能)</li>\n                    </ul>\n                  </div>\n                </div>\n              </article>\n            </div>\n          </div>\n\n          <br>\n          <br>\n          <br>\n          <h3 class=\"title has-text-left\">2. 操作モード</h3>\n          <hr>\n\n          <div class=\"columns\">\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  自分で操作できる。戻れば操作をやり直せる\n                </div>\n              </article>\n              <ShogiPlayer :kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :start_turn=\"-1\" :slider_show=\"true\" :controller_show=\"true\" :theme=\"'real'\" :size=\"'medium'\" :variation=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\" :run_mode=\"'play_mode'\"/>\n            </div>\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  human_side オプションで先手側だけ操作できるようにする\n                </div>\n              </article>\n              <ShogiPlayer :kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :start_turn=\"-1\" :slider_show=\"true\" :controller_show=\"true\" :theme=\"'real'\" :size=\"'medium'\" :variation=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\" :run_mode=\"'play_mode'\" :human_side=\"'black'\"/>\n            </div>\n          </div>\n\n          <br>\n          <br>\n          <h3 class=\"title has-text-left\">3. 編集モード</h3>\n          <hr>\n\n          <div class=\"columns\">\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  すべての駒を自由に動かせる\n                </div>\n              </article>\n              <ShogiPlayer :kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :start_turn=\"-1\" :slider_show=\"true\" :theme=\"'real'\" :size=\"'medium'\" :variation=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\" :run_mode=\"'edit_mode'\"/>\n            </div>\n\n            <div class=\"column\">\n              <article class=\"message is-info has-text-centered\">\n                <div class=\"message-body\">\n                  詰将棋用の初期配置で開始\n                </div>\n              </article>\n              <ShogiPlayer :init_preset_key=\"'詰将棋'\" :slider_show=\"true\" :theme=\"'real'\" :size=\"'medium'\" :variation=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\" :run_mode=\"'edit_mode'\"/>\n            </div>\n          </div>\n          <br>\n          <br>\n\n          <template v-if=\"false\">\n            <div class=\"columns\">\n              <div class=\"column\">\n                <article class=\"message is-info has-text-centered\">\n                  <div class=\"message-body\">\n                    外部KIFファイルの読み込み\n                  </div>\n                </article>\n                <ShogiPlayer :kifu_url=\"'http://tk2-221-20341.vs.sakura.ne.jp/shogi/wr/ureshino_friend-doglong-20180122_213544.kif?plain=1'\" :start_turn=\"-1\" :controller_show=\"true\" :slider_show=\"true\" :debug_mode=\"true\" :polling_interval=\"30\" />\n              </div>\n            </div>\n            <br>\n            <br>\n          </template>\n\n          <div class=\"columns\">\n            <div class=\"column\">\n              <article class=\"message is-success has-text-left\">\n                <div class=\"message-header\">\n                  <p>操作方法</p>\n                </div>\n                <div class=\"message-body\">\n                  <div class=\"content\">\n                    <ul>\n                      <li>盤上の駒は右クリックで裏返せます</li>\n                      <li>shift, option, meta, control キーのいずれかを押しながら左クリックでも裏返せます</li>\n                      <li>駒を持った状態で右クリックすると駒を元に戻します</li>\n                    </ul>\n                  </div>\n                </div>\n              </article>\n            </div>\n          </div>\n\n          <div class=\"columns\">\n            <div class=\"column\">\n              <article class=\"message is-success has-text-left\">\n                <div class=\"message-header\">\n                  <p>再生モードからのモード切り替えについて</p>\n                </div>\n                <div class=\"message-body\">\n                  <div class=\"content\">\n                    <ul>\n                      <li>右の<b-icon icon=\"dots-vertical\" size=\"is-small\"></b-icon>をクリックするとモードを切り替えれます</li>\n                      <li>棋譜再生モードの途中で「操作」に切り替えると手番側の駒を動かせるようになります。検討したいときに使います</li>\n                      <li>「操作」モードに入るとき SFEN (USI) の場合はそのまま再生モードでの棋譜を保持した状態で始まります。(スライダーで最初の局面に戻せる)</li>\n                      <li>一方 KIF の場合は都合上<b>現在の局面から</b>の開始になります。(スライダーで最初の局面に戻せない)。※SFENと同様になるよう今後対応予定</li>\n                      <li>手番に関わらず、ただ自由に駒を動かしたいときは「編集」モードにします。</li>\n                    </ul>\n                  </div>\n                </div>\n              </article>\n            </div>\n          </div>\n\n        </div>\n      </section>\n    </div>\n  </section>\n\n  <section class=\"section\">\n    <a name=\"usage\"></a>\n    <div class=\"container\">\n      <h3 class=\"title\">使い方</h3>\n      <hr>\n      <div class=\"content\" v-html=\"usage_md\"></div>\n    </div>\n  </section>\n\n  <section class=\"section\">\n    <a name=\"options\"></a>\n    <div class=\"container\">\n      <h2 class=\"title\">オプション</h2>\n      <hr>\n      <div class=\"columns\">\n        <div class=\"column\">\n          <ShogiPlayer\n            :run_mode=\"run_mode\"\n            :kifu_body=\"kifu_body\"\n            :start_turn=\"start_turn\"\n            :theme=\"theme\"\n            :size=\"size\"\n            :variation=\"variation\"\n            :debug_mode=\"debug_mode\"\n            :digit_show=\"digit_show\"\n            :key_event_capture=\"key_event_capture\"\n            :slider_show=\"slider_show\"\n            :controller_show=\"controller_show\"\n            :sfen_show=\"sfen_show\"\n            :sound_effect=\"sound_effect\"\n            :volume=\"volume\"\n            :human_side=\"human_side\"\n            @update:play_mode_long_sfen=\"play_mode_long_sfen_set\"\n            @update:play_mode_short_sfen=\"play_mode_short_sfen_set\"\n            @update:play_mode_move=\"play_mode_move_set\"\n            />\n        </div>\n      </div>\n      <div class=\"columns\">\n        <div class=\"column\">\n          <section>\n            <b-field label=\"run_mode\">\n              <div class=\"block\">\n                <b-radio v-model=\"run_mode\" native-value=\"view_mode\">view_mode</b-radio>\n                <b-radio v-model=\"run_mode\" native-value=\"play_mode\">play_mode</b-radio>\n                <b-radio v-model=\"run_mode\" native-value=\"edit_mode\">edit_mode</b-radio>\n              </div>\n            </b-field>\n\n            <b-field label=\"theme\">\n              <div class=\"block\">\n                <b-radio v-model=\"theme\" native-value=\"none\">none</b-radio>\n                <b-radio v-model=\"theme\" native-value=\"simple\">simple</b-radio>\n                <b-radio v-model=\"theme\" native-value=\"real\">real</b-radio>\n              </div>\n            </b-field>\n\n            <b-field label=\"variation\">\n              <div class=\"block\">\n                <template v-for=\"val in ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']\">\n                  <b-radio v-model=\"variation\" :native-value=\"val\">{{val}}</b-radio>\n                </template>\n              </div>\n            </b-field>\n\n            <b-field label=\"size\">\n              <div class=\"block\">\n                <b-radio v-model=\"size\" native-value=\"none\">none</b-radio>\n                <b-radio v-model=\"size\" native-value=\"x-small\">x-small</b-radio>\n                <b-radio v-model=\"size\" native-value=\"small\">small</b-radio>\n                <b-radio v-model=\"size\" native-value=\"default\">default</b-radio>\n                <b-radio v-model=\"size\" native-value=\"medium\">medium</b-radio>\n                <b-radio v-model=\"size\" native-value=\"large\">large</b-radio>\n                <b-radio v-model=\"size\" native-value=\"x-large\">x-large</b-radio>\n              </div>\n            </b-field>\n\n            <template v-if=\"false\">\n              <b-field label=\"variation\">\n                <b-select placeholder=\"Select a name\" v-model=\"variation\">\n                  <option v-for=\"val in ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n']\" :value=\"val\" :key=\"val\">{{val}}</option>\n                </b-select>\n              </b-field>\n            </template>\n\n            <b-field label=\"start_turn\">\n              <b-input v-model=\"start_turn\" type=\"number\" />\n            </b-field>\n            <b-field label=\"slider_show\">\n              <b-switch v-model=\"slider_show\" />\n            </b-field>\n            <b-field label=\"controller_show\">\n              <b-switch v-model=\"controller_show\" />\n            </b-field>\n            <b-field label=\"sfen_show\">\n              <b-switch v-model=\"sfen_show\" />\n            </b-field>\n            <b-field label=\"sound_effect\">\n              <b-switch v-model=\"sound_effect\" />\n            </b-field>\n            <b-field label=\"volume\">\n              <div class=\"block\">\n                <input v-model.number=\"volume\" type=\"range\" min=\"0\" max=\"1.0\" step=\"0.01\" /> {{volume}}\n              </div>\n            </b-field>\n            <b-field label=\"human_side\">\n              <div class=\"block\">\n                <b-radio v-model=\"human_side\" native-value=\"\">両方</b-radio>\n                <b-radio v-model=\"human_side\" native-value=\"black\">☗</b-radio>\n                <b-radio v-model=\"human_side\" native-value=\"white\">☖</b-radio>\n              </div>\n            </b-field>\n            <b-field label=\"key_event_capture\">\n              <b-switch v-model=\"key_event_capture\" />\n            </b-field>\n            <b-field label=\"debug_mode\">\n              <b-switch v-model=\"debug_mode\" />\n            </b-field>\n            <b-field label=\"digit_show\">\n              <b-switch v-model=\"digit_show\" />\n            </b-field>\n            <b-field label=\"kifu_body\">\n              <b-input v-model=\"kifu_body\" type=\"textarea\" />\n            </b-field>\n\n            <article class=\"message is-primary has-text-left\">\n              <div class=\"message-header\">\n                <p>引数</p>\n              </div>\n              <div class=\"message-body\">\n                &lt;shogi-player\n                :<b>run_mode</b>=\"'{{run_mode}}'\"\n                :<b>theme</b>=\"'{{theme}}'\"\n                :<b>variation</b>=\"'{{variation}}'\"\n                :<b>size</b>=\"'{{size}}'\"\n                :<b>start_turn</b>=\"{{start_turn}}\"\n                :<b>slider_show</b>=\"{{slider_show}}\"\n                :<b>controller_show</b>=\"{{controller_show}}\"\n                :<b>sfen_show</b>=\"{{sfen_show}}\"\n                :<b>human_side</b>=\"'{{human_side}}'\"\n                :<b>sound_effect</b>=\"{{sound_effect}}\"\n                :<b>volume</b>=\"{{volume}}\"\n                :<b>key_event_capture</b>=\"{{key_event_capture}}\"\n                :<b>debug_mode</b>=\"{{debug_mode}}\"\n                :<b>digit_show</b>=\"{{digit_show}}\"\n                :<b>kifu_body</b>=\"'{{kifu_body}}'\"\n                /&gt;\n              </div>\n            </article>\n\n            <br>\n            <br>\n            <h4 class=\"title\">Emit Events</h4>\n            <b-field label=\"@update:play_mode_long_sfen: 操作モードで指した直後の局面を発行(movesあり)\">\n              <b-input :value=\"play_mode_long_sfen\" type=\"textarea\" />\n            </b-field>\n            <b-field label=\"@update:play_mode_short_sfen: 操作モードで指した直後の局面を発行(movesなし)\">\n              <b-input v-model=\"play_mode_short_sfen\" type=\"textarea\" />\n            </b-field>\n            <b-field label=\"@update:play_mode_move: 操作モードで指した手(sfenのmovesの最後の1つ)\">\n              <b-input v-model=\"play_mode_move\" type=\"text\" />\n            </b-field>\n            <br>\n\n          </section>\n        </div>\n      </div>\n      <div class=\"table_wrap\">\n        <div class=\"content\" v-html=\"options_md\"></div>\n      </div>\n    </div>\n  </section>\n\n  <footer class=\"footer\">\n    <div class=\"container\">\n      <div class=\"columns\">\n        <div class=\"column has-text-centered\">\n          <a href=\"https://bulma.io\"><img src=\"./assets/made-with-bulma.png\" alt=\"Made with Bulma\" width=\"128\" height=\"24\"></a>\n        </div>\n      </div>\n    </div>\n  </footer>\n</div>\n</template>\n\n<script>\nimport ShogiPlayer from './components/ShogiPlayer'\n\nimport Vue from 'vue'\nimport Buefy from 'buefy'\n\nVue.use(Buefy)\n\nconst marked = require('marked')\nconst renderer = new marked.Renderer()\nrenderer.table = (header, body) => '<div class=\"table_wrap\"><table>\\n' + '<thead>\\n' + header + '</thead>\\n' + '<tbody>\\n' + body + '</tbody>\\n' + '</table></div>\\n'\nmarked.setOptions({\n  renderer: renderer,\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n})\n\nexport default {\n  name: 'app',\n\n  data() {\n    // FIXME: npm run unit で raw-loader が効かない問題を回避している\n    if (process.env.NODE_ENV === \"test\") {\n      return {}\n    }\n\n    return {\n      // カスタマイズ用\n      run_mode: \"view_mode\",   // play_mode\n      theme: \"simple\",\n      variation: \"a\",\n      size: \"default\",\n      start_turn: -1,\n      slider_show: true,\n      controller_show: true,\n      sfen_show: true,\n      human_side: \"\",\n      sound_effect: true,\n      volume: 0.5,\n      key_event_capture: false,\n      debug_mode: false,\n      digit_show: false,\n      kifu_body: \"position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+\",\n\n      play_mode_long_sfen: null,\n      play_mode_short_sfen: null,\n      play_mode_move: null,\n\n      kif_sample1: require(\"./第11回朝日杯将棋オープン戦本戦.kif\"),\n      kif_sample2: require(\"./藤井聡太四段_vs_澤田真吾六段.kif\"),\n      usage_md: marked(require('./usage.md')),\n      options_md: marked(require('./options.md')),\n    }\n  },\n\n  components: {\n    ShogiPlayer\n  },\n\n  methods: {\n    play_mode_long_sfen_set(v) {\n      this.play_mode_long_sfen = v\n    },\n    play_mode_short_sfen_set(v) {\n      this.play_mode_short_sfen = v\n    },\n    play_mode_move_set(v) {\n      this.play_mode_move = v\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\">\n@import \"./App\"\n@import \"buefy/lib/buefy.css\"\n\n// ここで読み込むとカレントディレクトリが /src 扱いのため components/* から ../assets と参照してもパスが合わない\n// main.js で読み込むと .sass のファイル基準になる\n// @import \"./components/ShogiPlayer.sass\"\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","import _ from \"lodash\"\n\nimport { Place } from \"../place\"\nimport { Soldier } from \"../soldier\"\n// import { SfenParser } from \"../sfen_parser\"\n// import { Mediator } from \"../mediator\"\nimport { Location } from \"../location\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      // |------------------------+------------+------------+---------------------|\n      // | どこの駒を持ち上げた？ | place_from | have_piece | have_piece_location |\n      // |------------------------+------------+------------+---------------------|\n      // | 盤上                   | ○         |            | ○                  |\n      // | 駒台                   |            | ○         | ○                  |\n      // | 駒箱                   |            | ○         |                     |\n      // |------------------------+------------+------------+---------------------|\n      place_from: null,           // 盤上ら動かそうとしているときの元位置\n      have_piece: null,           // 駒台 or 駒箱から持った駒\n      have_piece_location: null,  // 駒台から持ったときだけ先後が入っている。駒箱から取り出しているときは null\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n  },\n\n  methods: {\n    // -------------------------------------------------------------------------------- play_mode\n\n    // 駒箱の駒を持ち上げている？\n    piece_box_have_p(piece) {\n      return _.isNil(this.have_piece_location) && this.have_piece === piece\n    },\n\n    // FIXME: 駒を持っているときは「駒箱の駒」に対して一切反応しないようにしたい。そうすると駒箱だけの判定で済む\n    piece_box_other_click(e) {\n      this.log(\"駒箱クリック\")\n\n      if (_.isNil(this.have_piece_location) && this.have_piece) {\n        this.log(\"持っているならキャンセル\")\n        this.state_reset()\n        return true\n      }\n\n      if (this.have_piece_location && this.have_piece) {\n        this.log(\"駒台から駒箱に移動\")\n        this.mediator.piece_box_add(this.have_piece)\n        this.mediator.hold_pieces_add(this.have_piece_location, this.have_piece, -1)\n        this.state_reset()\n        return true\n      }\n\n      if (this.origin_soldier) {\n        this.log(\"盤上の駒を駒箱に移動\")\n        this.mediator.piece_box_add(this.origin_soldier.piece)\n        this.mediator.board.delete_at(this.origin_soldier.place)\n        this.state_reset()\n        return true\n      }\n\n      return false\n    },\n\n    piece_box_piece_click(piece, e) {\n      // 駒をクリックしたとき駒箱をクリックするのと同じ処理を実行\n      if (this.piece_box_other_click(e)) {\n        return\n      }\n\n      this.log(\"駒台の駒を持つ\")\n      this.have_piece = piece\n      this.have_piece_location = null\n      this.virtual_piece_create(e, this.origin_soldier2.to_class_list)\n    },\n\n    // 駒台 or 駒台の駒をクリックしたときの共通処理\n    piece_stand_click_shared(location, e) {\n      if (this.have_piece_location === location && this.have_piece) {\n        this.log(\"自分の駒台から駒を持ち上げているならキャンセル\")\n        this.state_reset()\n        return true\n      }\n\n      // 相手の持駒を自分の駒台に移動\n      if (this.current_mode === \"edit_mode\") {\n        if (this.have_piece_location !== location && this.have_piece) {\n          this.opponent_hold_pieces_move_to_my_hold_pieces(location)\n          return true\n        }\n      }\n\n      if (this.current_mode === \"play_mode\") {\n        if (this.origin_soldier) {\n          this.log(\"play_mode では盤上の駒を駒台に置くことはできない\")\n          return true\n        }\n      }\n\n      // 盤上の駒を駒台に置く\n      if (this.origin_soldier) {\n        this.log(\"盤上の駒を駒台に置く\")\n        this.board_soldir_to_hold_pieces(location)\n        return true\n      }\n\n      return false\n    },\n\n    // 駒台クリック\n    piece_stand_click(location, e) {\n      this.piece_stand_click_shared(location, e)\n    },\n\n    // 駒台の駒をクリック\n    piece_stand_piece_click(location, piece, e) {\n      this.log(\"駒台の駒をクリック\")\n\n      if (this.piece_stand_click_shared(location, e)) {\n        return\n      }\n\n      // クリックしたけど持駒がない\n      if (this.mediator.hold_pieces_count(location, piece) <= 0) {\n        this.log(\"クリックしたけど持駒がない\")\n        return\n      }\n\n      // 相手の持駒を持とうとしたときは無効\n      if (this.current_mode === \"play_mode\" && location !== this.mediator.current_location) {\n        this.log(\"相手の持駒を持とうとしたときは無効\")\n        return\n      }\n\n      if (this.cpu_location_p) {\n        this.log(\"片方の手番だけを操作できるようにする human_side の指定があってCPU側なので無効とする\")\n        return\n      }\n\n      this.log(\"駒台の駒を持つ\")\n      this.have_piece = piece\n      this.have_piece_location = location\n      this.virtual_piece_create(e, this.origin_soldier2.to_class_list)\n    },\n\n    // 盤をクリック\n    board_click(xy, e) {\n      this.log(\"board_click\")\n      this.log(`shiftKey: ${e.shiftKey}`)\n\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n\n      // -------------------------------------------------------------------------------- Validation\n\n      if (this.cpu_location_p) {\n        this.log(\"片方の手番だけを操作できるようにする human_side の指定があってCPU側なので無効とする\")\n        return\n      }\n\n      // 自分の手番で相手の駒を持ち上げようとしたので無効とする\n      if (this.current_mode === \"play_mode\" && !this.holding_p && soldier && soldier.location !== this.mediator.current_location) {\n        this.log(\"自分の手番で相手の駒を持ち上げようとしたので無効とする\")\n        return\n      }\n\n      // 持たずに何もないところをクリックしたので無効とする\n      if (!this.holding_p && !soldier) {\n        this.log(\"持たずに何もないところをクリックしたので無効とする\")\n        return\n      }\n\n      // 自分の駒の上に駒を重ねようとしたので状況キャンセル\n      if (this.current_mode === \"play_mode\" && this.put_on_my_piece_p(soldier)) {\n        this.log(\"自分の駒の上に駒を重ねようとしたので状況キャンセル\")\n        this.state_reset()\n        return\n      }\n\n      // 盤上の駒を持って同じ位置に戻したので状況キャンセル\n      if (_.isEqual(this.place_from, place)) {\n        this.log(\"盤上の駒を持って同じ位置に戻したので状況キャンセル\")\n        this.state_reset()\n        return\n      }\n\n      // --------------------------------------------------------------------------------\n\n      const shift_key = e.shiftKey | e.ctrlKey | e.altKey | e.metaKey\n      this.log(`holding_p: ${this.holding_p}`)\n      if (!this.holding_p && soldier && shift_key) {\n        this.log(\"盤上の駒を裏返す\")\n        this.mediator.board.place_on(soldier.piece_transform)\n        return\n      }\n\n      // 盤上の駒を持ちあげる\n      if (!this.holding_p) {\n        this.log(\"盤上の駒を持ちあげる\")\n        this.soldier_hold(place, e)\n        return\n      }\n\n      // 盤上から移動\n      if (this.place_from) {\n        this.log(\"盤上から移動\")\n        if (soldier) {\n          this.mediator.hold_pieces_add(this.origin_soldier.location, soldier.piece) // 相手の駒があれば取る\n          // this.$forceUpdate()\n        }\n\n        const new_soldier = new Soldier({\n          piece: this.origin_soldier.piece,\n          place: place,\n          promoted: this.origin_soldier.promoted,\n          location: this.origin_soldier.location,\n        })\n\n        if (this.current_mode === \"play_mode\" && (new_soldier.promotable_p || this.origin_soldier.promotable_p)) { // 入って成る or 出て成る\n          this.mouse_stick = false // ダイアログ選択時時は動かしている駒を止める\n\n          // 元が成ってないとき\n          this.$dialog.confirm({\n            message: '成りますか？',\n            confirmText: '成',\n            cancelText: '不成',\n            onConfirm: () => {\n              new_soldier.promoted = true\n            },\n            // 最後に必ず呼ばれる\n            onCancel: () => {\n              this.moves_set(this.origin_soldier.place.to_sfen + place.to_sfen + (new_soldier.promoted ? \"+\" : \"\")) // 7g7f+\n              this.mediator.board.place_on(new_soldier)                             // 置く\n              this.mediator.board.delete_at(this.place_from)\n              this.state_reset()\n              this.turn_next()\n            },\n          })\n        } else {\n          if (this.current_mode === \"play_mode\") {\n            this.moves_set(this.origin_soldier.place.to_sfen + place.to_sfen) // 7g7f\n          }\n          this.mediator.board.place_on(new_soldier)                          // 置く\n          this.mediator.board.delete_at(this.place_from)\n          this.state_reset()\n          this.turn_next()\n        }\n\n        return\n      }\n\n      // 持駒を置く\n      if (this.have_piece) {\n        // this.sound_call(\"piece_sound\")\n        const soldier = this.__origin_soldier_create(place)\n        this.piece_decriment()\n        this.mediator.board.place_on(soldier) // 置く\n        this.moves_set(soldier.piece.key + \"*\" + place.to_sfen) // P*7g\n        this.state_reset()\n        this.turn_next()\n        return\n      }\n\n      throw new Error(\"must not happen\")\n    },\n\n    board_click_right(xy, e) {\n      this.log(\"盤を右クリック\")\n\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n\n      // FIXME: click_hook のところだけで行いたい\n      if (this.holding_p) {\n        this.log(\"持ち上げた駒を元に戻す\")\n        this.state_reset()\n        return\n      }\n\n      if (!this.holding_p && soldier) {\n        this.log(\"盤上の駒を裏返す\")\n        this.mediator.board.place_on(soldier.piece_transform)\n      }\n    },\n\n    hold_cancel(e) {\n      // FIXME: click_hook のところだけで行いたい\n      if (this.holding_p) {\n        this.log(\"持ち上げた駒を元に戻す\")\n        this.state_reset()\n      }\n    },\n\n    // 盤上の駒を駒台に置く\n    board_soldir_to_hold_pieces(location) {\n      // this.sound_call(\"piece_sound\")\n      this.mediator.hold_pieces_add(location, this.origin_soldier.piece) // 駒台にプラス\n      this.mediator.board.delete_at(this.origin_soldier.place)\n      this.state_reset()\n    },\n\n    opponent_hold_pieces_move_to_my_hold_pieces(location) {\n      this.log(\"相手の持駒を自分の駒台に移動\")\n      // this.sound_call(\"piece_sound\")\n      this.piece_decriment()\n      this.mediator.hold_pieces_add(location, this.have_piece)\n      this.state_reset()\n    },\n\n    // 駒を減らす\n    piece_decriment() {\n      if (this.have_piece_location) {\n        this.mediator.hold_pieces_add(this.have_piece_location, this.have_piece, -1)\n      } else {\n        this.mediator.piece_box_add(this.have_piece, -1)\n      }\n    },\n\n    // 自分の駒の上に重ねた？\n    put_on_my_piece_p(soldier) {\n      return this.holding_p && soldier && soldier.location === this.mediator.current_location\n    },\n\n    // 盤面の駒を持ち上げる\n    soldier_hold(place, e) {\n      this.place_from = place\n      this.virtual_piece_create(e, this.origin_soldier.to_class_list)\n    },\n\n    state_reset() {\n      this.log(\"state_reset\")\n      this.place_from = null // 持ってない状態にする\n      this.have_piece = null\n      this.have_piece_location = null\n      this.virtual_piece_destroy()\n    },\n\n    // -------------------------------------------------------------------------------- piece_box\n\n    piece_box_piece_outer_class(piece) {\n      let list = []\n      if (this.piece_box_have_p(piece)) {\n        list.push(\"holding_p\")\n      } else if (this.current_mode === \"edit_mode\") {\n        list.push(\"selectable_p\")\n      }\n      return list\n    },\n\n    piece_box_piece_inner_class(piece) {\n      let list = []\n      list = _.concat(list, piece.css_class_list)\n      list.push(\"location_black\")\n      list.push(\"promoted_false\")\n      return list\n    },\n\n    // --------------------------------------------------------------------------------\n\n    all_flip() {\n      // 盤面反転\n      this.mediator.board = this.mediator.board.flip\n\n      // 持駒反転\n      this.mediator.hold_pieces = _.reduce(Location.values, (a, e) => {\n        a[e.key] = this.mediator.hold_pieces[e.flip.key]\n        return a\n      }, {})\n    },\n\n    init_location_toggle() {\n      this.init_location_key = this.init_location.flip.key\n    },\n\n    mousemove_hook(e) {\n      this.last_event = e\n      this.cursor_elem_set_pos()\n    },\n\n    // 右クリックならキャンセル\n    click_hook(e) {\n      if (e.which !== 1) {\n        this.state_reset()\n      }\n    },\n\n    cursor_elem_set_pos() {\n      if (this.cursor_elem && this.last_event && this.mouse_stick) {\n        this.cursor_elem.style.left = `${this.last_event.clientX}px`\n        this.cursor_elem.style.top = `${this.last_event.clientY}px`\n      }\n    },\n\n    // マウス位置に表示する駒の生成\n    //   .piece_outer.cursor_elem\n    //     .piece_inner\n    virtual_piece_create(event, class_list) {\n      this.virtual_piece_destroy()\n\n      this.cursor_elem = document.createElement(\"div\")\n      this.cursor_elem.classList.add(\"piece_outer\", \"cursor_elem\")\n      const piece_inner = document.createElement(\"div\")\n      const list = _.concat(class_list, [\"piece_inner\"])\n      piece_inner.classList.add(...list)\n      if (this.flip) {\n        piece_inner.classList.add(\"virtual_piece_flip\") // 盤面を反転している場合は駒も反転する\n      }\n      this.cursor_elem.appendChild(piece_inner)\n      this.$el.appendChild(this.cursor_elem)\n\n      this.mouse_stick = true\n\n      this.last_event = event\n      this.log(this.last_event)\n      this.cursor_elem_set_pos()\n\n      window.addEventListener(\"mousemove\", this.mousemove_hook, false)\n      window.addEventListener(\"click\", this.click_hook, false)\n    },\n\n    virtual_piece_destroy() {\n      if (this.cursor_elem) {\n        this.$el.removeChild(this.cursor_elem)\n        this.cursor_elem = null\n        this.mouse_stick = false\n\n        window.removeEventListener(\"mousemove\", this.mousemove_hook)\n        window.removeEventListener(\"click\", this.click_hook)\n      }\n    },\n\n    // 駒箱や駒台から持ち上げている駒\n    __origin_soldier_create(place) {\n      return new Soldier({\n        piece: this.have_piece,\n        place: place,\n        promoted: false,\n        location: this.have_piece_location || Location.fetch(\"black\"),\n      })\n    },\n  },\n\n  computed: {\n    // 移動元の駒(盤上から)\n    origin_soldier() {\n      if (this.place_from) {\n        return this.mediator.board.lookup(this.place_from)\n      }\n    },\n\n    // 移動元の駒(駒台 or 駒箱から)\n    origin_soldier2() {\n      if (this.have_piece) {\n        const place = Place.fetch([0, 0])\n        return this.__origin_soldier_create(place)\n      }\n    },\n\n    // 駒を持ち上げている状態？\n    holding_p() {\n      return !_.isNil(this.place_from) || !_.isNil(this.have_piece)\n    },\n\n    // 片方の手番だけを操作できるようにする human_side の指定があってCPUの手番？\n    cpu_location_p() {\n      return this.current_mode === \"play_mode\" && this.human_location && this.human_location !== this.mediator.current_location\n    }\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/edit_mode_module.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SettingModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SettingModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-95ba1cf0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SettingModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SettingModal.vue\n// module id = zlNq\n// module chunks = 1"],"sourceRoot":""}